<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Practical Electronics for Inventors, Third Edition</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<div id="filepos3154665" class="calibre3"><span><img alt="image" src="images/01917.jpg" class="calibre1606"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.12</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>There are shields available for almost anything you could want an Arduino to do. They range from relay control to LED displays and audio file players. Most of these are designed with the Arduino Uno in mind, but are also usually compatible with the Arduino Mega.</span></div>
<div class="calibre30"><span>An encyclopedic list that includes useful technical details about the pin usage of these shields can be found at <a href="http://shieldlist.org/">http://shieldlist.org/</a>. Some of the author’s favorite shields are listed in <a href="#filepos3155966">Table 13.5</a>.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><a></a><span class="bold">TABLE 13.5 Common Arduino Shields</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3155966" class="calibre3"><span><img alt="image" src="images/01918.jpg" class="calibre231"/></span></div>
<div id="filepos3156113" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">13.4.5   The Arduino C Library</span></span></span></span></span></div>
<div class="calibre11"><span>You may hear people refer to the “Arduino language,” but Arduino is actually just programmed in the C programming language, which has been around for many years. But Arduino provides a set of Arduino core functions that you can use in your programs, or sketches.</span></div>
<div class="calibre26"><span>There are a large number of commands available in the Arduino library. A selection of the most commonly used commands are listed in <a href="#filepos3157212">Table 13.6</a>.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><span class="bold">TABLE 13.6 Arduino Library Functions</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3157212" class="calibre3"><span><img alt="image" src="images/01919.jpg" class="calibre204"/></span></div>
<div class="calibre3"><span><img alt="image" src="images/01920.jpg" class="calibre1158"/></span></div>
<div class="calibre30"><span>The main Arduino core, including all the commands listed in <a href="#filepos3157212">Table 13.6</a>, is automatically included in every sketch that you write. However, there are a number of other libraries that come bundled with the Arduino IDE that are added to your code only when you use them. To include them, use the include command followed by the name of the library, like this:</span></div>
<div class="calibre3"><span><img alt="image" src="images/01921.jpg" class="calibre1607"/></span></div>
<div class="calibre30"><span>This command includes the Servo library that we will use in the example Arduino project that follows.</span></div>
<div class="calibre26"><span><a></a>The libraries that are included in the Arduino IDE are listed in <a href="#filepos3158825">Table 13.7</a>.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><span class="bold">TABLE 13.7 Standard Arduino Libraries</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3158825" class="calibre3"><span><img alt="image" src="images/01922.jpg" class="calibre1538"/></span></div>
<div class="calibre4"><span><img alt="image" src="images/01923.jpg" class="calibre1331"/></span></div><div class="calibre32"> </div>
<div class="calibre26"><span>As well as the official Arduino libraries, as an open system, anyone can write a library and contribute it to the community, and many of these are extremely useful. Some of these other libraries are listed in <a href="#filepos3159775">Table 13.8</a>.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><a></a><span class="bold">TABLE 13.8 Contributed Arduino Libraries</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3159775" class="calibre3"><span><img alt="image" src="images/01924.jpg" class="calibre1608"/></span></div>
<div class="calibre30"><span>For more information about Arduino, the official Arduino website (<a href="http://www.arduino.cc">http://www.arduino.cc</a>) should be your first port of call.</span></div>
<div id="filepos3160171" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">13.4.6   Arduino Example Project</span></span></span></span></span></div>
<div class="calibre11"><span>We are going to repeat the BASIC Stamp example project, using the same external electronics, but controlled by an Arduino rather than a BSII. The following listing shows the code needed to control the robot.</span></div>
<div class="calibre6"><span><img alt="image" src="images/01925.jpg" class="calibre1609"/></span></div>
<div class="calibre6"><span><img alt="image" src="images/01926.jpg" class="calibre1610"/></span></div>
<div class="calibre6"><span><img alt="image" src="images/01927.jpg" class="calibre1611"/></span></div>
<div class="calibre30"><span><a></a><a></a>There are many obvious similarities with the BASIC Stamp version. However, the C language used by Arduino provides a little more structure to the program, and seasoned programmers will probably feel happier using C rather than BASIC.</span></div>
<div class="calibre26"><span>As noted in the previous section, a feature of the Arduino platform is the large number of libraries, both official and user-supplied, that can be included in the program. The first line includes a library for controlling servos. Strictly speaking, this is C++, the object-oriented extension to C. So, to control a servo, we first need to create an instance (well, two in this case):</span></div>
<div class="calibre6"><span><img alt="image" src="images/01928.jpg" class="calibre1612"/></span></div>
<div class="calibre30"><span>Then we need to associate it with a particular pin using the following:</span></div>
<div class="calibre6"><span><img alt="image" src="images/01929.jpg" class="calibre1613"/></span></div>
<div class="calibre30"><span>From now on, all we need to do is give the servo an angle in degrees, using the write command, like this:</span></div>
<div class="calibre6"><span><img alt="image" src="images/01930.jpg" class="calibre1614"/></span></div>
<div class="calibre30"><span>There is no need to worry about pulse lengths; all this is handled for us automatically.</span></div>
<div id="filepos3162875" class="calibre48"><span class="bold"><span class="italic"><span><span class="italic">13.4.7   Taking the Arduino Offboard</span></span></span></span></div>
<div class="calibre11"><span>For all its convenience and ease of use, an Arduino Uno is just a microcontroller with the necessary support components to provide it with a regulated voltage and allow it to be programmed over USB. When the time comes to create a product, if it is a one-off, you will probably just use the Arduino as it is, and buy yourself a replacement for the next project. If however, you will be producing a number of devices, you will probably want to lose the Arduino board and just use the programmed microcontroller in your project.</span></div>
<div class="calibre26"><span>Taking the Arduino offboard means that you will probably design your own PCB for the microcontroller that includes just those features of the Uno that you need in your project, along with those extra components that may have been provided by a shield or connections to other electronics on, say, a breadboard.</span></div>
<div class="calibre26"><span>The ATmega328 is not as easy to run using an internal oscillator as the ATtiny.</span></div>
<div class="calibre26"><span>The IDE expects an external clock (crystal or ceramic resonator). You will probably also want to use a voltage regulator IC to provide a stable voltage to the microcontroller.</span></div>
<div class="calibre26"><span>The schematic shown in <a href="#filepos3164748">Fig. 13.13</a> was produced in Eagle CAD, along with the corresponding board shown in <a href="#filepos3165031">Fig. 13.14</a>.</span></div>
<div id="filepos3164748" class="calibre3"><span><img alt="image" src="images/01931.jpg" class="calibre954"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.13</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3165031" class="calibre3"><span><img alt="image" src="images/01932.jpg" class="calibre1615"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.14</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3165307" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">13.5   Interfacing with Microcontrollers</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Whether you are using an ATtiny, a PIC, or an Arduino, you can be fairly certain that you will need to connect some components to it. At the very least, there will probably be a switch or two.</span></div>
<div class="calibre26"><span>You can use three types of interfaces to your microcontroller:</span></div>
<div class="calibre187"><span>•  <span class="italic">Digital:</span> Switches as inputs, LEDs or similar as outputs</span></div>
<div class="calibre27"><span>•  <span class="italic">Analog:</span> Sensors of various types (see <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_011.html#filepos1954140">Chap. 6</a>)</span></div>
<div class="calibre27"><span>•  <span class="italic">Serial:</span> A serial communications protocol of which there are four main types: TTL serial, I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C, 1-Wire, and Serial Peripheral Interface (SPI).</span></div>
<div class="calibre30"><span>In the following sections, we will assume that your microcontroller has both analog and digital inputs, as well as digital and PWM outputs. It is also assumed that the microcontroller is operating at 5V. This may not always be the case, as many microcontrollers can be used at lower voltages, and 3.3 V is another common choice. If this is the case, you will need to adapt some of the schematics.</span></div>
<div id="filepos3167243" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">13.5.1   Switches</span></span></span></span></span></div>
<div class="calibre1"><span class="calibre17"><span><span class="bold">Single Switches</span></span></span></div>
<div class="calibre11"><span>Switches are easy to connect to a digital input (see <a href="#filepos3168073">Fig. 13.15</a>). Note the use of pullup resistors that keep the pin high until it is closed. When the switch is of the normally closed variety, then that current will be drawn continually, so you may want to use a high value of resistor there—say, 10 kΩ. However, for a normally open switch, current will flow only when the switch is pressed, so 1 kΩ is fine.</span></div>
<div id="filepos3168073" class="calibre3"><span><img alt="image" src="images/01933.jpg" class="calibre1616"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.15</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>With the switch to GND, as shown in all the examples in <a href="#filepos3168073">Fig. 13.15</a>, when the switch is closed, the digital input will go low. This means that the logic of a button being pressed is inverted, as shown in the following sample Arduino C code.</span></div>
<div class="calibre4"><span><img alt="image" src="images/01934.jpg" class="calibre1617"/></span></div><div class="calibre10"> </div>
<div class="calibre26"><span><a></a>It is also possible to swap over the switch and resistor, so that the resistor is now a pulldown resistor, and the switch being closed will result in a logical HIGH at the input.</span></div>
<div class="calibre26"><span>The choice of pullup resistor depends on how electrically noisy your environment is and how long the leads are from the microcontroller to the switch. Essentially, it is a compromise between immunity to noise and current consumption. Given that for a normally open switch, current will flow only when the button is pressed, 5 mA using a 1 kΩ resistor is not normally a problem. In fact, some would advocate a lower value, such as 270 Ω.</span></div>
<div class="calibre26"><span>Many microcontrollers include internal pullup resistors that can be turned on and off for a particular digital input. On an ATmega and ATtiny microcontroller, this resistor typically has a value of 20 k to 40 kΩ, so in a noisy environment or if the lead to the switch is long, an external pullup resistor may be better.</span></div>
<div class="calibre3"><span><span class="bold">Multiple Switches to One Analog Input</span></span></div>
<div class="calibre11"><span>If you have a lot of switches and do not want to tie up a load of digital inputs, then a common technique is to use an analog input and a number of resistors. The voltage at the analog input will then depend on the switches that are pressed (see <a href="#filepos3170588">Fig. 13.16</a>).</span></div>
<div id="filepos3170588" class="calibre3"><span><img alt="image" src="images/01935.jpg" class="calibre1618"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.16</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a href="#filepos3170588">Figure 13.16</a> is taken from the schematic diagram for the Freetronics Arduino LCD shield, where it is used for the five switches of a joystick type arrangement of push buttons (thanks to Freetronics for permission to use this diagram). Note how the decimal values for 10-bit A to D for each button are given as a table.</span></div>
<div class="calibre3"><span><span class="bold">Multiple switches and an analog input</span></span></div>
<div class="calibre26"><span><a></a>The analog reading will not normally be exactly the value required due to resistor tolerances and power supply voltage changes, so in the code that interprets this, you would normally specify a band that would indicate a certain button, rather than just one value.</span></div>
<div class="calibre3"><span><span class="bold">Using a Matrix Keypad</span></span></div>
<div class="calibre11"><span>Keypads use switches arranged in a matrix, as shown in <a href="#filepos3172502">Fig. 13.17</a>. The 4 × 3 keypad shown in the figure has a key at the intersection of each row and column. To determine which keys are pressed, the microcontroller will take each of the output pins Q0 to Q2 high in turn, and see what value is presented at each of the inputs I0 to I3. Note that if the microprocessor does not support internal pullup resistors, then these pullup resistors would be required on each input.</span></div>
<div id="filepos3172502" class="calibre3"><span><img alt="image" src="images/01936.jpg" class="calibre1619"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.17</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>In practice, this is such a common component for microcontrollers that to write your own code for it would be needlessly reinventing the wheel. As an example, the following is the Arduino code for this that uses a library.</span></div>
<div class="calibre6"><span><img alt="image" src="images/01937.jpg" class="calibre1620"/></span></div>
<div class="calibre6"><span><img alt="image" src="images/01938.jpg" class="calibre1621"/></span></div>
<div class="calibre30"><span><a></a>This example code will send any key that is pressed out through the Arduino serial monitor.</span></div>
<div class="calibre3"><span><span class="bold">Debouncing</span></span></div>
<div class="calibre11"><span>Attach an oscilloscope to the output of any of the circuits in <a href="#filepos3168073">Fig. 13.15</a>, and you are likely to see an output something like what is shown in <a href="#filepos3174038">Fig. 13.18</a> when the switch is closed. This is called <span class="italic">bouncing</span>.</span></div>
<div id="filepos3174038" class="calibre3"><span><img alt="image" src="images/01939.jpg" class="calibre1582"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.18</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Switch bouncing can cause problems. Imagine the situation where pressing a button toggles an LED on and off. If there are an even number of bounces, then the LED will toggle on and then immediately off again, giving the impression that nothing happened.</span></div>
<div class="calibre26"><span>It is therefore a good idea to <span class="italic">debounce</span> any switches that are connected to a microcontroller input. Although it is perfectly possible to do this with hardware—say, with a monostable that ignores subsequent pulses from the switch after triggering—it reduces the component count if you do the debouncing in software.</span></div>
<div class="calibre26"><span><a></a>As with keyboard matrices, debouncing is a common problem that has been solved many times. The essence of software debouncing is the same as hardware debouncing, and that is to take action on the first transition and then ignore any subsequent transitions of the output until a safe debounce period has elapsed. Depending on what else the microcontroller has to do, this can be as simple as inserting a delay for the debounce period in the code that immediately follows the detection of the first transition. However, sometimes this is not possible, such as when the microcontroller has other responsibilities (like refreshing an LED display). In these cases, a common approach is to set a variable to the milliseconds tick after the first transition and make a condition of actioning the button press that sufficient debounce time has elapsed. The Arduino code for this is as follows.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01940.jpg" class="calibre1622"/></span></div>
<div id="filepos3176211" class="calibre48"><span class="bold"><span class="italic"><span><span class="italic"><span class="bold">13.5.2   Analog Inputs</span></span></span></span></span></div>
<div class="calibre11"><span>Many of the sensors described in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_011.html#filepos1954140">Chap. 6</a> provide an analog output to indicate the property that they are reading. For example, the TMP36 temperature sensor IC would typically be connected directly to an analog input of a microcontroller, as shown in <a href="#filepos3176773">Fig. 13.19</a>.</span></div>
<div id="filepos3176773" class="calibre3"><span><img alt="image" src="images/01941.jpg" class="calibre1623"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.19</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>If you are measuring a voltage that is outside the range of the microcontroller’s analog input (say 0 to 10 V), then you can just use two resistors as a voltage divider to reduce the voltage appropriately. If there is a risk that the voltage may exceed the expected range, you can protect the microcontroller’s analog input by adding a zener diode (see <a href="#filepos3177545">Fig. 13.20</a>).</span></div>
<div id="filepos3177545" class="calibre3"><span><img alt="image" src="images/01942.jpg" class="calibre1624"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.20</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>In practice, the zener diode will start to conduct before 5.1 V, to the detriment of the linearity of the readings, which is why the input range is labeled as 0 to 50 V, rather than 0 to 55 V. Remember the voltage divider is 1:11, not 1:10.</span></div>
<div class="calibre26"><span>If switching behavior is required, then this should be implemented in code rather than through hardware. This approach allows more flexibility, for instance, for adding hysteresis or changing the set temperature. The following Arduino C code illustrates a simple temperature-control algorithm with 4 (±2) degrees of hysteresis.</span></div>
<div class="calibre6"><span><img alt="image" src="images/01943.jpg" class="calibre1625"/></span></div>
<div class="calibre30"><span>This example assumes that there is a user-supplied function called read Temperature.</span></div>
<div class="calibre26"><span>For measuring resistance, sensors that are resistive, like LDRs and thermistors, will usually simply be used as one leg of a potential divider to produce a voltage that can be read. This is discussed in the relevant sensor sections in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_011.html#filepos1954140">Chap. 6</a>.</span></div>
<div id="filepos3179266" class="calibre48"><span class="bold"><span class="italic"><span><span class="italic"><span class="bold">13.5.3   High-Power Digital Outputs</span></span></span></span></span></div>
<div class="calibre11"><span>Most microcontrollers will reliably provide us with only around 20 mA of source or sink current as a direct digital output. If you want to drive a higher power load, such as a relay or a high-power LED, then you need to use a transistor.</span></div>
<div class="calibre26"><span>Note that Arduino will handle up to 40 mA per pin with a maximum per chip of 200 mA. These figures should be derated by 25 percent for a production product, but Atmel says that the chip can comfortably cope with the absolute maximum current ratings, as these figures are already derated.</span></div>
<div class="calibre26"><span><a href="#filepos3180392">Figure 13.21</a> shows how to accomplish this with bipolar transistors, and <a href="#filepos3180675">Fig. 13.22</a> shows how to use MOSFETs.</span></div>
<div id="filepos3180392" class="calibre3"><span><img alt="image" src="images/01944.jpg" class="calibre1626"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.21</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3180675" class="calibre3"><span><img alt="image" src="images/01945.jpg" class="calibre1627"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.22</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>MOSFETs have a number of advantages over bipolar transistors. One is that for most applications, they do not need a gate resistor. However, MOSFETs are a capacitative load, so the inrush current when the pin changes state can be very high, albeit for a very short duration. Microcontrollers will generally cope with this, but for ultimate adherence to design rules, use a gate resistor of around 1 kΩ.</span></div>
<div class="calibre26"><span><a></a>Another advantage of using MOSFETs as switches is their exceptionally low drain-source on resistance and high off resistance. This makes a small MOSFET capable of controlling quite big loads. However, you should check the gate threshold voltage to make sure that it is not above the logic level. For instance, an N-channel MOSFET with a gate threshold voltage of 6 V is not going to turn on when the gate goes to just 5 V. This is more of a problem with high-power MOSFETs. When using high-power MOSFETs, look for those described as “logic-level” MOSFETs, meaning that they have a gate threshold significantly less than 5 V.</span></div>
<div class="calibre3"><span><span class="bold">Relays and Other Inductive Loads</span></span></div>
<div class="calibre11"><span>With the exception of some reed relays, very few relays will switch with a current less than 50 mA, and therefore you will nearly always need to use a transistor as just described. You also need to remember to use a reverse-biased diode across the relay’s coil, to prevent voltage spikes damaging the transistor during switching. <a href="#filepos3182800">Figure 13.23</a> shows this arrangement.</span></div>
<div id="filepos3182800" class="calibre3"><span><img alt="image" src="images/01946.jpg" class="calibre1628"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.23</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Pulse-Width Modulation</span></span></div>
<div class="calibre11"><span>The schematic shown in <a href="#filepos3182800">Fig. 13.23</a> is also suitable for controlling inductive loads like dc motors. If the digital output is driven as PWM, then this circuit can also be used to control the power going to the motor, and hence its speed (see <a href="#filepos3183588">Fig. 13.24</a>).</span></div>
<div id="filepos3183588" class="calibre3"><span><img alt="image" src="images/01947.jpg" class="calibre1629"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.24</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>The waveforms on the right in <a href="#filepos3183588">Fig. 13.24</a> show how you can control the motor speed by adjusting the duty-cycle (proportion of time the power is on). The pseudocode on the right shows how this is accomplished. Note that some microcontrollers also have dedicated hardware support to simplify the process of generating PWM signals.</span></div>
<div class="calibre26"><span>If your microcontroller has fairly robust output drivers, then there is probably little point in using the 74HC07 buffer.</span></div>
<div class="calibre3"><span><span class="bold">Directional Motor Control</span></span></div>
<div class="calibre11"><span>Directional control of motors can be achieved using an H-bridge, as shown in <a href="#filepos3184850">Fig. 13.25</a>.</span></div>
<div id="filepos3184850" class="calibre3"><span><img alt="image" src="images/01948.jpg" class="calibre1630"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.25</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Most useful for controlling motor currents of less than a couple of amps are IC H-bridges such as the TB6612FNG, which combine all the transistors into one package. They often also have features such as thermal shutdown, to protect against overloading.</span></div>
<div class="calibre3"><span><span class="bold">Servo Motor Control</span></span></div>
<div class="calibre11"><span>We have already touched on controlling servo motors in our robot example project. Since the servo uses a control signal, this can be provided directly from a digital output (see <a href="#filepos3185888">Fig. 13.26</a>).</span></div>
<div id="filepos3185888" class="calibre3"><span><img alt="image" src="images/01949.jpg" class="calibre1631"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.26</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Stepper Motor Control</span></span></div>
<div class="calibre11"><span>A stepper motor has a number of coils that must be energized in the correct sequence to move the rotor. The arrangement shown in <a href="#filepos3186574">Fig. 13.27</a> can be used to accomplish this.</span></div>
<div id="filepos3186574" class="calibre3"><span><img alt="image" src="images/01950.jpg" class="calibre1632"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.27</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>See <a href="#filepos3220805">Chap. 14</a> for more information about motors.</span></div>
<div id="filepos3187014" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">13.5.4   Sound Interfaces</span></span></span></span></span></div>
<div class="calibre11"><span><a href="#filepos3187655">Figure 13.28</a> shows a schematic for detecting sound. The second comparator stage is optional, and the output of the first stage could be fed directly into an analog input, allowing the sound to be sampled. Most microcontroller ADCs are not terribly fast, but even so, they should be able to sample at above 10 kHz, allowing some primitive digital signal processing.</span></div>
<div id="filepos3187655" class="calibre3"><span><img alt="image" src="images/01951.jpg" class="calibre1633"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.28</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>When it comes to generating sound, being digital devices, few activities come more naturally to a microcontroller than generating a squarewave. All it needs to do is set a pin high, wait, set it low, then wait again, and keep repeating those steps. As demonstrated earlier in the chapter, both the Arduino library and the BASIC Stamp provide commands to do this directly. If you are using a piezo speaker, this can be driven directly from a digital output. If you are using a electromagnetic loudspeaker, then this will be beyond the drive capabilities of an output pin, and you will need to amplify the signal. For a range of audio amplifier circuits, refer to <a href="#filepos3266649">Chap. 15</a>. But given that a squarewave sounds pretty harsh, then high-quality amplification is unnecessary, and a circuit like the one shown in <a href="#filepos3180392">Fig. 13.21</a>, where the load is a loudspeaker, will work just fine. Make sure you do the math to check that the transistor can cope with the collector current, as most loudspeakers are 8 Ω.</span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.31</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Generating a sine wave requires a bit of thought and effort. A first idea may be to use the PWM output of one of the pins to write out the waveform. However, the PWM switching frequency for most microcontrollers is at an audio frequency, so without a lot of care, the signal will sound as bad as a squarewave. A better way is to use a DAC, which has a number of digital inputs and produces an output voltage proportional to the digital input value. Fortunately, it is very easy to make a simple DAC—all you need are resistors.</span></div>
<div class="calibre26"><span><a href="#filepos3190437">Figure 13.29</a> shows a DAC using an R-2R resistor network. It uses resistors of a value <span class="italic">R</span> and twice <span class="italic">R</span>, so <span class="italic">R</span> might be 5 KΩ and 2R 10 KΩ. Each of the digital inputs will be connected to an Arduino digital output. The four digits represent the 4 bits of a digital number, so this gives us 16 different analog outputs. Higher-resolution DACs can be made by using more stages. Alternatively, DAC ICs, which can be more convenient to use, are available.</span></div>
<div id="filepos3190437" class="calibre3"><span><img alt="image" src="images/01952.jpg" class="calibre1634"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.29</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3190720" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">13.5.5   Serial Interfaces</span></span></span></span></span></div>
<div class="calibre11"><span>There are a number of different standards for serial interfaces to microcontrollers, which use different numbers of pins and approaches to communication. In this section, we will explore some of them and look at how they can be used to connect things to a microcontroller.</span></div>
<div class="calibre26"><span>When communicating with a peripheral, whichever serial interface it uses, there are a number of ways that the microcontroller might interact with the device. You may simply issue commands from the microcontroller, usually in the form of a 1-byte code that means something like “take a temperature reading,” or in the case of serial EEPROM, “store this data here.” The device then may respond with a result or value. Another common, but far less intuitive, approach is for the device to use registers, and some of the commands concerned with fetching and setting bits in the register that then control the electronics of the device. So, for instance, setting an I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C FM receiver IC to operate in stereo rather than mono involves setting the appropriate bit in a register using a general-purpose write-register command, rather than a command specific to setting the mode to mono or stereo.</span></div>
<div class="calibre3"><span><span class="bold">1-Wire Bus</span></span></div>
<div class="calibre11"><span>As the name implies, the 1-Wire serial bus uses just a single connection (apart from a common ground) to communicate. This standard was developed by Dallas Semiconductors and is used in a variety of sensors and other devices such as ADCs and EEPROM. It can operate at either 5 V or 3.3 V, so always check that a device you are connecting to your microcontroller operates at the same voltage. If it doesn’t, then damage may ensue.</span></div>
<div class="calibre26"><span>The DS18B20 temperature sensor uses the 1-Wire interface. This sensor was introduced in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_011.html#filepos1954140">Chap. 6</a>. In this chapter, we will look at how the sensor can be used in parasitic power mode, so that only two connections are needed from the microcontroller to the device. Furthermore, up to 255 devices can be connected to the same wire.</span></div>
<div class="calibre26"><span><a href="#filepos3194218">Figure 13.30</a> shows a DS18B20 attached to a microcontroller. 1-Wire devices act as either a master or slave. The microcontroller will be the master, and the peripheral devices, such as sensors, the slave. The slave devices contain a capacitor that is charged from the bus when no data is being transferred and used to power the slave device while the bus is being used for data. When the DS18B20 is being used this way, its GND and Vdd connections are tied together. The communication is two-way, so the microcontroller will use the pin as both an input and an output, changing the pin’s direction while the program is running. Every slave device has a unique 64-bit identifier that is programmed into ROM during manufacture.</span></div>
<div id="filepos3194218" class="calibre3"><span><img alt="image" src="images/01953.jpg" class="calibre1635"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.30</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Communication is always initiated by the master (microcontroller), which will put the data line into output mode and send a command as a sequence of pulses. The data line is pulled up to 5 V, so pulses are from 5 V to GND. A pulse of 60 μS signifies a 0, and 15 μS indicates a 1.</span></div>
<div class="calibre26"><span>When the microcontroller needs to issue a command, it first sends a reset pulse of at least 480 μS, followed by the command sequence that includes the identifier of the device. The available device IDs are found by a special search protocol where the master sends a command that requests devices with a particular bit in their ID to respond. If more than one responds, then it tries another bit, and in this way, efficiently identifies all the devices.</span></div>
<div class="calibre26"><span>Any microcontroller that you use with 1-Wire will have a library and example code for using the bus, so there is little point in looking at the low-level protocol. The following fragments of code illustrate how the Arduino OneWire library is used with a DS18B20.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01954.jpg" class="calibre1636"/></span></div>
<div class="calibre30"><span><a></a>The first step is to include the OneWire library and define some byte arrays to hold the data and the device ID for the DS18B20. The setup function opens a serial port, so that the temperature readings can be sent to the Arduino serial monitor, and then searches for devices on the 1-Wire bus. There should only be one, and if it is found, then a suitable message is displayed.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01955.jpg" class="calibre1637"/></span></div>
<div class="calibre30"><span>The main loop simply calls the function getReading, sends it to the Arduino serial monitor, and then pauses for a second.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01956.jpg" class="calibre1638"/></span></div>
<div class="calibre30"><span>The getReading function is where most of the work goes on. It has two commands: one to start the temperature conversion and another to read the data resulting from the conversion.</span></div>
<div class="calibre26"><span>Each command is preceded by a reset. Note how the slave to be communicated with is set using ds.select(). We then read the response into the byte array called data. To actually decode the temperature, we need only the first 2 bytes of the data, which are combined into a 16-bit integer and multiplied by the scaling factor (defined in the DS18B20 data sheet) as 0.0625.</span></div>
<div class="calibre26"><span>Next, we have this line:</span></div>
<div class="calibre6"><span><img alt="image" src="images/01957.jpg" class="calibre1639"/></span></div>
<div class="calibre30"><span>This first shifts the byte contained in data[1] left by 8 bits, and then adds in the lower 8 bits contained in data[0]. This results in a 16-bit integer that must be multiplied by 0.0625 to produce a temperature in degrees Celsius (see the data sheet for the DS18B20).</span></div>
<div class="calibre26"><span>The resulting trace in the Arduino serial monitor should look something like <a href="#filepos3198465">Fig. 13.31</a>.</span></div>
<div id="filepos3198465" class="calibre4"><span><img alt="image" src="images/01958.jpg" class="calibre1640"/></span></div><div class="calibre32"> </div>
<div class="calibre26"><span>We have touched on only two of the DS18B20’s commands. For a full list of commands and more information about the protocol, look at the DS18B20 data sheet (<a href="http://datasheets.maxim-ic.com/en/ds/DS18B20.pdf">http://datasheets.maxim-ic.com/en/ds/DS18B20.pdf</a>).</span></div>
<div class="calibre3"><span><span class="bold">I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C (TWI)</span></span></div>
<div class="calibre11"><span>On the face of it, the I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C, also sometimes known as the Two-Wire Interface (TWI), serves much the same purpose as 1-Wire, although it has two wires rather than one for data. Like 1-Wire, it is a bus and can support multiple devices connected to the same two wires. It also can run at either 5 V or 3.3 V. However, it is faster than 1-Wire, with top speeds of up to 400 kbits/s.</span></div>
<div class="calibre26"><span>The two data lines of I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C are open-drain connections that operate as both inputs and outputs at the microcontroller. They must have pullup resistors in the same way as 1-Wire, but there is no equivalent to the 1-Wire parasitic mode, so remote sensors will generally require four wires in total: two for data and two for power.</span></div>
<div class="calibre26"><span><a href="#filepos3200349">Figure 13.32</a> shows how two microcontrollers might communicate using I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C.</span></div>
<div id="filepos3200349" class="calibre3"><span><img alt="image" src="images/01959.jpg" class="calibre1641"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.32</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C devices are either masters or slaves, and there can be more than one master device per bus. In fact, devices are allowed to change roles, although this is not usually done. It is common for microcontrollers to have an I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C interface and use it to exchange data between microcontrollers.</span></div>
<div class="calibre26"><span>The serial clock line (SCL) is a clock, and the serial data line (SDA) carries the data. The timing of these pins is shown in <a href="#filepos3201661">Fig. 13.33</a>. The master supplies the SCL clock, and when there is data to be transmitted, the sender (master or slave) takes the SDA line out of tri-state and sends data as logic highs or lows in time with the clock signal. When transmission is complete, the clock can stop and the SDA pin be taken back to tri-state.</span></div>
<div id="filepos3201661" class="calibre3"><span><img alt="image" src="images/01960.jpg" class="calibre1642"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.33</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Whether using I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C or 1-Wire, from a microcontroller, the code is likely to be similar, and a library is provided to hide the low-level timing of the protocol.</span></div>
<div class="calibre26"><span>The following example, in Arduino C, shows I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C in action to send data from one microcontroller to another. When using I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C to interface with a sensor or other I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C slave device, the process is similar, but the messages will generally be packed into byte arrays. For this kind of application, every device will be different, and the data sheet for the device should be studied to determine the format of the messages that it expects. These examples are adapted from the examples provided with the Arduino environment. Thanks to Nicholas Zambetti for making this code public domain.</span></div>
<div class="calibre26"><span>We start with the code for the transmitting microcontroller.</span></div>
<div class="calibre6"><span><img alt="image" src="images/01961.jpg" class="calibre1643"/></span></div>
<div class="calibre30"><span>The transmission is very simple. We just say which device on the bus we want to send to, and then send it the data. In this case, the data is a string, but the write method can also take a single byte or a byte array as arguments for the data to be sent.</span></div>
<div class="calibre26"><span>Receiving the data is a little more complex.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01962.jpg" class="calibre1644"/></span></div>
<div class="calibre3"><span><img alt="image" src="images/01963.jpg" class="calibre1645"/></span></div>
<div class="calibre30"><span><a></a>In this case, the receiver is a slave device and must identify itself—in this case, using the number 4 as its argument to Wire.begin. It then registers a function receiveEvent, which should be invoked whenever there is incoming data for this device. This function simply loops over each byte of data in the message, displaying it on the Arduino serial monitor.</span></div>
<div class="calibre3"><span><span class="bold">Serial Peripheral Interface</span></span></div>
<div class="calibre11"><span>Yet another microcontroller bus standard is the SPI bus. This one uses four data lines and is faster than the previous buses that we have looked at (up to 80 Mbits/s).</span></div>
<div class="calibre26"><span><a href="#filepos3205208">Figure 13.34</a> shows how a number of peripherals can be connected to the bus. Note that there can only be one master device.</span></div>
<div id="filepos3205208" class="calibre3"><span><img alt="image" src="images/01964.jpg" class="calibre1646"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.34</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>The slave devices are not assigned addresses. Instead, the master (usually a microcontroller) must have a dedicated Slave Select (SS) line for each of the slave devices, just selecting the one it communicates with. The other extra line is required because separate lines are used for each direction of communication. The Master Out/Slave In (MOSI) line carries the data from the master to the slave device, and the Master In/ Slave Out (MISO) line does the reverse.</span></div>
<div class="calibre26"><span><a></a>Many different data protocols have been layered over the physical serial interface, but the basic principal is the same as for the other buses that we have looked at. The approach to take is to find the SPI library for the microcontroller that you intend to use and read the data sheet for the device you wish to communicate with.</span></div>
<div class="calibre26"><span>The SPI specification does not define the bit order for sending data, so make sure that your code agrees with the device in this respect.</span></div>
<div class="calibre26"><span>SPI is also used as a means of ICSP on some microcontrollers, such as the ATmega and ATtiny families.</span></div>
<div class="calibre3"><span><span class="bold">Serial</span></span></div>
<div class="calibre11"><span>Many devices use yet another type of interface called just <span class="italic">serial</span>. This is a very old standard with its roots dating back to the days of teletypes. Some computers with serial ports can still be found. In the “good old days,” people used to attach modems to them for communicating over phone lines with other computers.</span></div>
<div class="calibre26"><span>The normal voltages used in the signals for serial ports conform to the standard RS-232 and use voltages that swing both positive and negative with respect to GND. This is not terribly convenient when using microcontrollers. For this reason, microcontrollers use the same communication protocol, but at logic levels. This is called TTL Serial, although more and more, it is being used by devices using 3.3 V rather than 5 V. See the next section for information about level conversion.</span></div>
<div class="calibre26"><span>Electrically, TTL Serial uses two data pins: Tx and Rx (Transmit and Receive). It is not a bus, and the connection is point to point, so there are no problems with addressing different devices.</span></div>
<div class="calibre26"><span>Another remnant from early computer history is the nomenclature around the bandwidth of serial connections. A serial connection must be set to the same baud rate at both ends of the connection. The baud rate is the number of bits per second, but that does include start, stop, and potentially parity bits, so the actual transmission of data is a little slower than the baud rate. To simplify matching up the baud rates at each end of the connection, a set of standard baud rates is used: 110, 300, 600, 1200, 2400, 4800, 9600, 14400, 19200, 38400, 57600, 115200, 128000, and 256000. Of these, 1200 is probably the slowest baud rate commonly in use, and many TTL serial devices will not go as high as 115200. 9600 is a very commonly used baud rate, and devices will often default to this rate, but be configurable to other rates.</span></div>
<div class="calibre26"><span>As well as the baud rate, other parameters that define a serial connection are the number of bits per word, the type of parity bit, and the number of start and stop bits. Almost universally, these are defined as 8, none, and 1, respectively, which is often abbreviated to 8N1.</span></div>
<div class="calibre26"><span><a></a>Bits are simply sent as high or low logic levels (see <a href="#filepos3209983">Fig. 13.35</a>). As there is no separate clock signal, timing is critical, so after the start bit, the receiver will sample at the appropriate rate until it has read the 8 data bits and the 1 stop bit. The least significant bit of the data is sent first.</span></div>
<div id="filepos3209983" class="calibre3"><span><img alt="image" src="images/01965.jpg" class="calibre1647"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.35</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Most microcontrollers will either have dedicated hardware for TTL Serial (a UART) or manufacturer-developed software libraries for serial.</span></div>
<div id="filepos3210487" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">13.5.6   Level Conversion</span></span></span></span></span></div>
<div class="calibre11"><span>There is a recent trend for microcontrollers and other ICs to use 3.3 V or even 1.8 V rather than 5 V. Lower-voltage devices use less current and can be more convenient to power from batteries. The same is also true of modules that the microcontrollers need to communicate with. While some 3.3 V devices can tolerate 5 V, many cannot. This means that if you are communicating with them using one of the bus and serial interfaces discussed previously, you will need to make sure that you convert voltage levels appropriately.</span></div>
<div class="calibre3"><span><span class="bold">SPI and TTL Serial Level Conversion</span></span></div>
<div class="calibre11"><span>Converting levels on SPI and TTL Serial is quite easy, because they have separate lines for each direction of communication. <a href="#filepos3211704">Figure 13.36</a> shows how resistors can be used as simple voltage dividers.</span></div>
<div id="filepos3211704" class="calibre3"><span><img alt="image" src="images/01966.jpg" class="calibre1648"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.36</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>The Tx output of the 3.3 V device can be connected directly to the Rx input of the 5 V microprocessor, because it will see any input over about 2.5 V as a logical high anyway. The voltage divider is required when the 5 V Tx output of the microprocessor must be reduced to prevent damage to the 3.3 V device.</span></div>
<div class="calibre3"><span><span class="bold">I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C and 1-Wire Level Conversion</span></span></div>
<div class="calibre11"><span>The problem is more complex when pins change modes, from being an input and being an output, as they do with I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C and 1-Wire. In both these cases, the best solution is to use a custom level-shifting IC such as the TXS0102, which can convert two levels (ideal for I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C). <a href="#filepos3213227">Figure 13.37</a> shows the TXS0102 used to convert levels for I<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>C. Alternative ICs that perform the same role are the MAX3372, PCA9509, and PCA9306.</span></div>
<div id="filepos3213227" class="calibre3"><span><img alt="image" src="images/01967.jpg" class="calibre1649"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.37</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3213510" class="calibre48"><span class="bold"><span class="italic"><span><span class="italic"><span class="bold">13.5.7   LED Display Interfaces</span></span></span></span></span></div>
<div class="calibre11"><span>LED displays made up of a number of LEDs encapsulated in a single package can be a challenge to control. Such displays will normally be controlled using a microcontroller, however, it is not necessary to use a microcontroller to pin each individual LED. Instead, multi-LED displays are organized as common anode or common cathode, with all the LED terminals of the anode or cathode connected together and brought out through one pin. <a href="#filepos3214313">Figure 13.38</a> shows how a common anode seven-segment display might be wired internally.</span></div>
<div id="filepos3214313" class="calibre3"><span><img alt="image" src="images/01968.jpg" class="calibre1650"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.38</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>In a common cathode display like this, the common cathode would be connected to ground, and each segment anode driven by a microcontroller pin through a separate current-limiting resistor. Do not be tempted to use one resistor on the common pin and no resistors on the noncommon connections, as the current will be limited no matter how many LEDs are lit, and so the display would get dimmer as more LEDs were illuminated.</span></div>
<div class="calibre3"><span><span class="bold">Multiplexing LED Displays</span></span></div>
<div class="calibre11"><span>It is quite common for multiple displays to be contained in the same case. For example, <a href="#filepos3215741">Fig. 13.39</a> shows a three-digit seven-segment common cathode LED display. In this kind of display, each digit of the display is like the single-digit display of <a href="#filepos3215741">Fig. 13.39</a> and has its own common cathode. But, in addition, all the A segment anodes are connected together, as is each segment.</span></div>
<div id="filepos3215741" class="calibre3"><span><img alt="image" src="images/01969.jpg" class="calibre182"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 13.39</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>The microcontroller, or LED driver IC, using the display will activate each common cathode in turn, turn on the appropriate segments for that digit, and then move on to the next digit. This refresh happens very quickly, so that the display appears to show different numbers on each digit. This is called <span class="italic">multiplexing</span>. The same approach can be used with LED matrices, where each column is activated in turn, and then the appropriate pins are set for the rows of that column.</span></div>
<div class="calibre26"><span>Note the use of transistors to control the common cathodes. This is simply to handle the current of potentially eight LEDs at once, which would be too much for most microcontrollers.</span></div>
<div class="calibre3"><span><span class="bold">Charlieplexing</span></span></div>
<div class="calibre11"><span>When looking to minimize the number of pins used to display a matrix of LEDs, an interesting technique called Charlieplexing can be used. (The name comes from the inventor Charlie Allen at Maxim.) This technique takes advantage of the feature of modern microcontroller I/O pins that allows them to be changed from outputs to high-impedance inputs while a program is executing. <a href="#filepos3217544">Figure 13.40</a> shows the arrangement for controlling six LEDs with three pins.</span></div>
<div id="filepos3217544" class="calibre3"><span><img alt="image" src="images/01970.jpg" class="calibre1651"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 13.40</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>Charlieplexing is a dynamic activity, so rather like multiplexing, not all the LEDs that you want to be lit are lit at the same time, but they will appear lit as the display is refreshed faster than the eye can keep up. To do this, the pins will be high, low, or high impedance input, as shown in <a href="#filepos3218563">Table 13.9</a>.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><span class="bold">TABLE 13.9 Charliplexing LED Addressing</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3218563" class="calibre3"><span><img alt="image" src="images/01971.jpg" class="calibre1652"/></span></div>
<div class="calibre30"><span>The number of LEDs that can be controlled per microcontroller pin is given by the following formula:</span></div>
<div class="calibre19"><span>LEDs = <span class="italic">n</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small> – <span class="italic">n</span></span></div>
<div class="calibre30"><span>So, if we use 4 pins, we can have 16 – 2, or 12, LEDs, and 10 pins would give us a massive 90 LEDs. However, there are problems with scaling Charlieplexing up. One is due to the fact that the refresh rate needs to be fast enough to fool the eye, and a large number of pins will need a lot of sequence steps to energize all the LEDs that need energizing in a refresh cycle. This will also result in the LEDs becoming dim, as their duty cycle will be low. You can compensate for this to some extent by increasing the current through the LEDs, which will cope with fairly large peak currents for a small duration. This does lead to the problem that if the microcontroller freezes for some reason, the LEDs could burn out.</span></div>
<div class="calibre3"><span><span class="bold">Controlling the Color of RGB LEDs</span></span></div>
<div class="calibre11"><span>RGB LEDs are actually three LEDs in one package (one red, one green, and one blue). The package will often be common anode or common cathode. By controlling the power to each of the LEDs separately, it’s possible to set the overall color of the LED module to any color at any intensity.</span></div>
<div class="calibre26"><span>While you could change the intensity of each color channel by controlling the current to the LED in an analog fashion, it is far better to control it with a PWM signal. The duty cycle will control the brightness of the LED in a far more linear manner than controlling the current in an analog fashion.</span></div>  <div class="mbppagebreak"></div><div id="filepos3220805" class="calibre8"><span><a></a><span class="bold">CHAPTER 14</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Motors</span></span></span></span></div><div class="calibre21"> </div>
<div class="calibre11"><span>Perhaps one of the most entertaining things to do with electronics is make some mechanical device move. Three very popular devices used to “make things move” include dc motors, RC servos, and stepper motors.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01972.jpg" class="calibre1653"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.1</span></span></span></span></div><div class="calibre35"> </div>
<div id="filepos3221642" class="calibre3"><span class="calibre7"><span><span class="bold">14.1   DC Continuous Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>A <span class="italic">dc motor</span> is a simple two-lead, electrically controlled device that comes with a rotary shaft on which wheels, gears, propellers, etc., can be mounted. A dc motor generates a considerable amount of revolutions per minute (rpm) for its size and can be made to rotate clockwise or counterclockwise by reversing the polarity applied to the leads. At low speeds, dc motors provide little torque and minimal position control, making them impractical for pointlike position-control applications.</span></div>
<div class="calibre26"><span><a></a>dc motors are available in many different shapes and sizes. Most dc motors provide rotational speeds anywhere between 3000 and 8000 rpm at a specific operating voltage typically set between 1.5 and 24 V. The operating voltage provided by the manufacturer tells you at what voltage the motor runs most efficiently. Now, the actual voltage applied to a motor can be made slightly lower to make the motor slower or can be elevated to make the motor faster. However, when the applied voltage drops to below around 50 percent of the specified operating voltage, the motor usually will cease to rotate. Conversely, if the applied voltage exceeds the operating voltage by around 30 percent, there is a chance that the motor will overheat and become damaged. In practice, as you will see in a second, the speed of a dc motor is most efficiently controlled by means of pulse-width modulation, whereby the motor is rapidly turned on and off. The width of the applied pulse, as well as the period between pulses, controls the speed of the motor. Also, it is worth noting that a freely running motor (no load) may draw little current (power). However, if a load is applied, the amount of current drawn by the motor’s inner coils goes up immensely (up to 1000 percent or more). Manufacturers usually will provide what is called a <span class="italic">stall current</span> rating for their motors. This rating specifies the amount of current drawn at the moment the motor stalls. If your motor’s stall current rating is not listed, it is possible to determine it by using an ammeter; slowly apply a force to the motor’s shaft, and note the current level at the point when the motor stalls. Another specification given to dc motors is a torque rating. This rating represents the amount of force the motor can exert on a load. A motor with a high torque rating will exert a larger force on a load placed at a tangent to its rotational arm than a motor with a lower torque rating. The torque rating of a motor is usually given in lb/ft, g/cm, or oz/in.</span></div>
<div id="filepos3224674" class="calibre3"><span class="calibre7"><span><span class="bold">14.2   Speed Control of DC Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre3"><span><img alt="image" src="images/01973.jpg" class="calibre1654"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.2</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre6"><span class="calibre17"><span class="bold"><span>A seemingly obvious approach to control the speed of a dc motor would be simply to limit the current flow by using a potentiometer, as shown in the circuit to the left in the figure. According to Ohm’s law, as the resistance of the pot increases, the current decreases, and the motor will slow down. However, using a pot to control the current flow is inefficient. As the pot’s resistance increases, the amount of current energy that must be converted into heat increases. Producing heat in order to slow a motor down is not good—it consumes supply power and may lead to potentiometer meltdown. Another seemingly good but inefficient approach to control the speed of a motor is to use a transistor amplifier arrangement like the one shown to the right in the figure. However, again, there is a problem. As the collector-to-emitter resistance increases with varying base voltage/ current, the transistor must dissipate a considerable amount of heat. This can lead to transistor meltdown.</span></span></span></div>
<div class="calibre4"><span><img alt="image" src="images/01974.jpg" class="calibre1655"/></span></div><div class="calibre32"> </div>
<div class="calibre6"><span class="calibre17"><span class="bold"><span>In order to conserve energy and prevent component meltdown, an approach similar to what was used in switching power supplies is used to control the speed of the motor. This approach involves sending the motor short pulses of current. By varying the width and frequency of the applied pulses, the speed of the motor can be controlled. Controlling a motor’s speed in this manner prevents any components from experiencing continuous current stress. <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_019.html#filepos3094482">Figure 13.3</a> shows three simple circuits used to provide the desired motor-control pulses.</span></span></span></div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span>In the first circuit, a UJT relaxation oscillator generates a series of pulses that drives an SCR on and off. To vary the speed of the motor, the UJT’s oscillatory frequency is adjusted by changing the RC time constant.</span></span></span></div>
<div class="calibre4"><span><a></a><img alt="image" src="images/01975.jpg" class="calibre1656"/></span></div><div class="calibre32"> </div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span>In the second circuit, a pair of NAND gates make up the relaxation oscillator section, while an enhancement-type power MOSFET is used to drive the motor. Like the preceding circuit, the speed of the motor is controlled by the oscillator’s <span class="italic">RC</span> time constant. Notice that if one of the input leads of the left NAND gate is pulled out, it is possible to create an extra terminal that can be used to provide on/off controls that can be interfaced with CMOS logic circuits.</span></span></span></div>
<div class="calibre4"><span><img alt="image" src="images/01976.jpg" class="calibre1657"/></span></div><div class="calibre32"> </div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span>The third circuit is a 555 timer that is used to generate pulses that drive a power MOSFET. By inserting a diode between pins 7 and 6, as shown, the 555 is placed into low-duty cycle operation. <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, and <span class="italic">C</span> set the frequency and on/off duration of the output pulses. The formulas accompanying the diagram provide the details.</span></span></span></div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span>A microcontroller-based dc control circuit with speed control is found in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_019.html#filepos3084490">Chap. 13</a>.</span></span></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.3</span></span></span></span></div><div class="calibre35"> </div>
<div id="filepos3229416" class="calibre3"><span class="calibre7"><span><span class="bold">14.3   Directional Control of DC Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>To control the direction of a motor, the polarity applied to the motor’s leads must be reversed. A simple manual-control approach is to use a DPDT switch (see leftmost circuit in <a href="#filepos3230777">Fig. 14.4</a>). Alternately, a transistor-driven DPDT relay can be used (see middle circuit). If you do not like relays, you can use a push-pull transistor circuit (see leftmost circuit). This circuit uses a complementary pair of transistors (similar betas and power rating)—one is an <span class="italic">npn</span> power Darlington, and the other is a <span class="italic">pnp</span> power Darlington. When a high voltage (e.g., +5 V) is applied to the input, the upper transistor (<span class="italic">npn</span>) conducts, allowing current to pass from the positive supply through the motor and into ground. If a low voltage (0 V) is applied to the input, the lower transistor (<span class="italic">pnp</span>) conducts, allowing current to pass through the motor from ground into the negative supply terminal.</span></div>
<div id="filepos3230777" class="calibre3"><span><img alt="image" src="images/01977.jpg" class="calibre1434"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.4</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>Another very popular circuit used to control the direction of a motor (as well as the speed) is the H-bridge. <a href="#filepos3233082">Figure 14.5</a> shows two simple versions of the H-bridge circuit. The left H-bridge circuit is constructed with bipolar transistors, whereas the right H-bridge circuit is constructed from MOSFETs. To make the motor rotate in the forward direction, a high (+5-V) signal is applied to the forward input, while no signal is applied to the reverse input (applying a voltage to both inputs at the same time is not allowed). The speed of the motor is controlled by pulse-width modulating the input signal. Here is a description of how the bipolar H-bridge works: When a high voltage is applied to <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small>’s base, <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> conducts, which in turn allows the <span class="italic">pnp</span> transistor <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> to conduct. Current then flows from the positive supply terminal through the motor in the right-to-left direction (call it the <span class="italic">forward direction</span> if you like). To reverse the motor’s direction, the high voltage signal is removed from <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small>’s base and placed on <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small>’s base. This sets <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small> and <span class="italic">Q</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> into conduction, allowing current to pass through the motor in the opposite direction. The MOSFET H-bridge works in a similar manner. The diodes within the H-bridge circuits help dampen transient spikes that are generated by the motor’s coils so that they do not damage the other components within the circuit. All transistors (except the bipolar within the MOSFET circuit) should have high power ratings.</span></div>
<div id="filepos3233082" class="calibre3"><span><img alt="image" src="images/01978.jpg" class="calibre1237"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.5</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Now, it is possible to construct these H-bridge circuits from scratch, but it is far easier and usually cheaper to buy a motor-driven IC. For example, National Semiconductor’s LMD18200 motor-driver IC is a high-current, easy-to-use H-bridge chip that has a rating of 3 A and 12 to 55 V. This chip is TTL and CMOS compatible and includes clamping diodes, shorted load protection, and a thermal warning interrupt output lead. The L293D (Unitrode) is another popular motor-driver IC. This chip is very easy to use and is cheaper than the LMD18200, but it cannot handle as much current and does not provide as many additional features. There are many other motor-driver ICs out there, as well as a number of prefab motor-diver boards that are capable of driving a number of motors. Check the electronics catalogs and Internet to see what is available.</span></div>
<div id="filepos3234308" class="calibre3"><span class="calibre7"><span><span class="bold">14.4   RC Servos</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><a></a><span class="italic">Remote control</span> (<span class="italic">RC</span>) <span class="italic">servos</span>, unlike dc motors, are motorlike devices designed specifically for pointerlike position-control applications. An RC servo uses an external pulse-width-modulated (PWM) signal to control the position of its shaft to within a small fraction of its maximum range of rotation. To alter the position of the shaft, the pulse width of the modulated signal is varied. The amount of angular rotation of an RC servo’s shaft is limited to around 180 or 210° depending on the specific brand of servo. These devices can provide a significant amount of low-speed torque (due to an internal gearing system) and provide moderate full-swing displacement switching speeds. RC servos frequently are used to control steering in model cars, boats, and airplanes. They are also used commonly in robotics as well as in many sensor-positioning applications.</span></div>
<div class="calibre26"><span>The standard RC servo looks like a simple box with a drive shaft and three wires coming out of it. The three wires consist of a power supply wire (usually black), a ground wire (usually red), and the shaft-positioning control wire (color varies based on manufacturer). Within the box there is a dc motor, a feedback device, and a control circuit. The feedback device usually consists of a potentiometer whose control dial is mechanically linked to the motor through a series of gears. When the motor is rotated, the potentiometer’s control dial is rotated. The shaft of the motor is usually limited to a rotation of 180° (or 210°)—a result of the pot not being able to rotate indefinitely. The potentiometer acts as a position-monitoring device that tells the control circuit (by means of its resistance) exactly how far the shaft has been rotated. The control circuit uses this resistance, along with a pulse-width-modulated input control signal, to drive the motor a specific number of degrees and then hold. (The amount of holding torque varies from servo to servo.) The width of the input signal determines how far the servo’s shaft will be rotated.</span></div>
<div class="calibre26"><span><a></a>By convention, when the pulse width is set to 1.5 ms, the servo rotates its shaft to neutral position (e.g., 90° if the servo is constrained within a 0 to 180° range). To rotate the shaft a certain number of degrees from neutral position, the pulse width of the control signal is varied. To make the shaft go counterclockwise from neutral, a pulse wider than 1.5 ms is applied to the control input. Conversely, to make the shaft go clockwise from neutral, a pulse narrower than 1.5 ms is applied (see figure). Knowing exactly how much wider or narrower to make the pulse to achieve exact angular displacements depends largely on what brand of servo you are using. For example, one brand of servo may provide maximum counterclockwise rotation at 1 ms and maximum clockwise rotation at 2 ms, whereas another brand of servo may provide maximum counterclockwise rotation at 1.25 ms and maximum clockwise rotation at 1.75 ms. The supply voltage used to power servos is commonly 4.8 V but may be 6.0 V or so depending on the specific brand of servo. Unlike the supply voltage, the supply current drawn by a servo varies greatly, depending on servo’s power output.</span></div>
<div class="calibre26"><span>A simple 555 timer circuit like the one shown in <a href="#filepos3238645">Fig. 14.6</a> can be used to generate the servo control signal. In this circuit, R<small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> acts as the pulse-width control. Servos also can be controlled by a microprocessor or microcontroller. See <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_019.html#filepos3084490">Chap. 13</a> for two microcontroller-based servo control circuits.</span></div>
<div id="filepos3238645" class="calibre3"><span><img alt="image" src="images/01979.jpg" class="calibre38"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.6</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Now, when controlling servos within model airplanes, an initial control signal (generated by varying position-control potentiometers) is first sent to a radiowave modulator circuit that encodes the control signal within a carrier wave. This carrier wave is then radiated off as a radiowave by an antenna. The radiowave, in turn, is then transmitted to the model’s receiver circuit. The receiver circuit recovers the initial control signal by demodulating the carrier. After that, the control signal is sent to the designated servo within the model. If there is more than one servo per model, more channels are required. For example, most RC airplanes require a four-channel radio set; one channel is used to control the ailerons, another channel controls the elevator, another controls the rudder, and another controls the throttle. More complex models may use five or six channels to control additional features such as flaps and retractable landing gear. The FCC sets aside 50 frequencies in the 72-MHz band (channels 11–60) dedicated to aircraft use only. No license is needed to operate these radios. However, with an amateur (ham) radio operator’s license, it is possible to use a radio within the 50-MHz band. Also, there are frequencies set aside within the 27-MHz band that are legal for any kind of model use (surface or air). If you are interested in radio-controlled RC servos, a good starting point is to check out an RC model hobby shop. These shops carry a number of transmitter and receiver sets, along with the servos.</span></div>
<div class="calibre26"><span>As a final note, with a bit of rewiring, a servo can be converted into a drive motor with unconstrained rotation. A simple way to modify the servo is to break the feedback loop. This involves removing the three-lead potentiometer (and unlinking the gear system so that it can rotate 360°) and replacing it with a pair of voltage-divider resistors (the output of the voltage divider replaces the variable terminal of the potentiometer). The voltage divider is used to convince the servo control circuit that the servo is in neutral position. The exact values of the resistors needed to set the servo in neutral position can be determined by using the old potentiometer and an ohmmeter. Now, to turn the motor clockwise, a pulse wider than 1.5 ms is applied to the control input. As long as the control signal is in place, the motor will keep turning and not stop—you have removed the feedback system. To turn the motor counterclockwise, a pulse narrower than 1.5 ms is applied to the control input.</span></div>
<div id="filepos3241673" class="calibre3"><span class="calibre7"><span><span class="bold">14.5   Stepper Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><a></a><span class="italic">Stepper motors</span>, or <span class="italic">steppers</span>, are digitally controlled brushless motors that rotate a specific number of degrees (a step) every time a clock pulse is applied to a special translator circuit that is used to control the stepper. The number of degrees per step (resolution) for a given stepper motor can be as small as 0.72° per step or as large as 90° per step. Common general-purpose stepper resolutions are 15 and 30° per step. Unlike RC servos, steppers can rotate a full 360° and can be made to rotate in a continuous manner like a dc motor (but with a lower maximum speed) with the help of proper digital control circuitry. Unlike dc motors, steppers provide a large amount of torque at low speeds, making them suitable in applications where low-speed and high-precision position control is needed. For example, they are used in printers to control paper feed and are used to help a telescope track stars. Steppers are also found in plotter-and sensor-positioning applications. The list goes on. To give you a basic idea of how a stepper works, take a look at <a href="#filepos3243218">Fig. 14.7</a>.</span></div>
<div id="filepos3243218" class="calibre3"><span><img alt="image" src="images/01980.jpg" class="calibre1658"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.7</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre6"><span class="calibre17"><span class="bold"><span>Here is a simple model depicting a 15° per step variable-reluctance stepper. The stationary section of the motor, called the <span class="italic">stator</span>, has eight poles that are spaced 45° apart. The moving section of the motor, called the <span class="italic">rotor</span>, is made from a ferromagnetic material (a material that is attracted to magnetic fields) that has six teeth spaced 60° apart. To make the rotor turn one step, current is applied, at the same time, through two opposing pole pairs, or coil pairs. The applied current causes the opposing pair of poles to become magnetized. This in turn causes the rotor’s teeth to align with the poles, as shown in the figure. To make the rotor rotate 15° clockwise from this position, the current through coil pair 1 is removed and sent through coil pair 2. To make the rotor rotate another 15° clockwise from this position, the current is removed from coil pair 2 and sent through coil pair 3. The process continues in this way. To make the rotor spin counterclockwise, the coil-pair firing sequence is reversed.</span></span></span></div>
<div id="filepos3244697" class="calibre3"><span class="calibre7"><span><span class="bold">14.6   Kinds of Stepper Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>The model used in the last example was based on a variable-reluctance stepper. As it turns out, this model is incomplete—it does not show how a real variable-reluctance stepper is wired internally. Also, the model does not apply to a class of steppers referred to as <span class="italic">permanent-magnet steppers</span>. To make things more realistic, let’s take a look at some real-life steppers.</span></div>
<div class="calibre3"><span><span class="bold">Variable-Reluctance Steppers</span></span></div>
<div class="calibre11"><span><a href="#filepos3246600">Figure 14.8</a> shows a physical model and schematic diagram of a 30° per step variable-reluctance stepper. This stepper consists of a six-pole (or three-coil pair) stator and a four-toothed ferromagnetic rotor. Variable-reluctance steppers with higher angular resolutions are constructed with more coil pairs and/or more rotor teeth. Notice that in both the physical model and the schematic, the ends of all the coil pairs are joined together at a common point. (This joining of the coil ends occurs internally within the motor’s case.) The common and the coil pair free ends are brought out as wires from the motor’s case. These wires are referred to as the <span class="italic">phase wires</span>. The common wire is connected to the supply voltage, whereas the phase wires are grounded in sequence according to the table shown in <a href="#filepos3246600">Fig. 14.8</a>.</span></div>
<div id="filepos3246600" class="calibre3"><span><img alt="image" src="images/01981.jpg" class="calibre85"/></span></div>
<div class="calibre3"><span><a></a><img alt="image" src="images/01982.jpg" class="calibre67"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.8</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Permanent-Magnet Steppers (Unipolar, Bipolar, Universal)</span></span></div>
<div class="calibre3"><span><span class="bold">UNIPOLAR STEPPERS</span></span></div>
<div class="calibre11"><span><a></a>These steppers have a similar stator arrangement as the variable-reluctance steppers, but they use a permanent-magnet rotor and different internal wiring arrangements. <a href="#filepos3246600">Figure 14.8</a> shows a 30° per step unipolar stepper. It consists of a four-pole (or two-coil pair) stator with center taps between coil pairs and a six-toothed permanent-magnetic rotor. The center taps may be wired internally and brought out as one wire or may be brought out separately as two wires. The center taps typically are wired to the positive supply voltage, whereas the two free ends of a coil pair are alternately grounded to reverse the direction of the field provided by that winding. As shown in the figure, when current flows from the center tap of winding 1 out terminal 1a, the top stator pole “goes north,” while the bottom stator pole “goes south.” This causes the rotor to snap into position. If the current through winding 1 is removed, sent through winding 2, and out terminal 2a, the horizontal poles will become energized, causing the rotor to turn 30°, or one step. In <a href="#filepos3246600">Fig. 14.8</a>, three firing sequences are shown. The first sequence provides full stepping action (what I just discussed). The second sequence, referred to as the <span class="italic">power stepping sequence</span>, provides full stepping action with 1.4 times the torque but twice the power consumption. The third sequence provides half stepping (e.g., 15° instead of the rated 30°). Half stepping is made possible by energizing adjacent poles at the same time. This pulls the rotor in-between the poles, thus resulting in one-half the stepping angle. As a final note, unipolar steppers with higher angular resolutions are constructed with more rotor teeth. Also, unipolars come in either five-or six-wire types. The five-wire type has the center taps joined internally, while the six-wire type does not.</span></div>
<div class="calibre3"><span><span class="bold">BIPOLAR STEPPERS</span></span></div>
<div class="calibre11"><span>These steppers resemble unipolar steppers, but their coil pairs do not have center taps. This means that instead of simply supplying a fixed supply voltage to a lead, as was the case in unipolar steppers (supply voltage was fixed to center taps), the supply voltage must be alternately applied to different coil ends. At the same time, the opposite end of a coil pair must be set to the opposite polarity (ground). For example, in <a href="#filepos3246600">Fig. 14.8</a>, a 30° per step bipolar stepper is made to rotate by applying the polarities shown in the firing sequence table to the leads of the stepper. Notice that the firing sequence uses the same basic drive pattern as the unipolar stepper, but the “0” and “1” signals are replaced with “+” and “-” symbols to show that the polarity matters. As you will see in the next section, the circuitry used to drive a bipolar stepper requires an H-bridge network for every coil pair. Bipolar steppers are more difficult to control than both unipolar steppers and variable-reluctance steppers, but their unique polarity-shifting feature gives them a better size-to-torque ratio. As a final note, bipolar steppers with higher angular resolutions are constructed with more rotor teeth.</span></div>
<div class="calibre3"><span><span class="bold">UNIVERSAL STEPPERS</span></span></div>
<div class="calibre11"><span>These steppers represent a type of unipolar-bipolar hybrid. A universal stepper comes with four independent windings and eight leads. By connecting the coil windings in parallel, as shown in <a href="#filepos3246600">Fig. 14.8</a>, the universal stepper can be converted into a unipolar stepper. If the coil windings are connected in series, the stepper can be converted into a bipolar stepper.</span></div>
<div id="filepos3251433" class="calibre3"><span class="calibre7"><span><span class="bold">14.7   Driving Stepper Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Every stepper motor needs a driver circuit that can control the current flow sent through the coils within the stepper’s stator. The driver, in turn, must be controlled by a logic circuit referred to as a <span class="italic">translator</span>. I will discuss translator circuits after I have covered the driver circuits.</span></div>
<div class="calibre26"><span><a></a><a href="#filepos3253975">Figure 14.9</a> shows driver networks for a variable-reluctance stepper and for a unipolar stepper. Both drivers use transistors to control current flow through the motor’s individual windings. In both driver networks, input buffer stages are added to protect the translator circuit from the motor’s supply voltage in the event of transistor collector-to-base breakdown. Diodes are added to both drivers to protect the transistors and power supply from inductive kickback generated by the motor’s coils. (Notice that the unipolar driver uses extra diodes because inductive kickback can leak out on either side of the center tap. As you will see in a moment, a pair of diodes within this driver can be replaced with a single diode, keeping the diode count to four.) The single driver section shown in <a href="#filepos3253975">Fig. 14.9</a> provides a general idea of what kinds of components can be used within the driver networks. This circuit uses a high-power Darlington transistor, a TTL buffer, and a reasonably fast protection diode (the extra diode should be included in the unipolar circuit). If you do not want to bother with discrete components, transistor-array ICs, such as the ULN200x series by Allegro Microsystems or the DS200x series by National Semiconductor, can be used to construct the driver section. The ULN2003, shown in <a href="#filepos3253975">Fig. 14.9</a>, is a TTL-compatible chip that contains seven Darlington transistors with protection diodes included. The 7407 buffer IC can be used with the ULN2003 to construct a full-stepper driver. Other ICs, such as Motorola’s MC1414 Darlington array IC, can drive multiple motor winding directly from logic inputs.</span></div>
<div id="filepos3253975" class="calibre3"><span><img alt="image" src="images/01983.jpg" class="calibre1659"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.9</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>The circuitry used to drive a bipolar stepper requires the use of an H-bridge circuit. The H-bridge circuit acts to reverse the polarity applied across a given coil pair within the stepper. (Refer back to the section on dc direction control for details on how H-bridges work.) For each coil pair within a stepper, a separate H-bridge is needed. The H-bridge circuit shown in <a href="#filepos3255305">Fig. 14.10</a> uses four power Darlington transistors that are protected from the coil’s inductive kickback by diodes. An XOR logic circuit is added to the input to prevent two high (1’s) signals from being applied to the inputs at the same time. [If two high signals are placed at both inputs (assuming that there is no logic circuit present), the supply will short to ground. This is not good for the supply.] The table in <a href="#filepos3255305">Fig. 14.10</a> provides the proper firing sequence needed to create the desired polarities.</span></div>
<div id="filepos3255305" class="calibre3"><span><img alt="image" src="images/01984.jpg" class="calibre278"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.10</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>As mentioned in the dc motor section of this chapter, H-bridges can be purchased in IC form. SGS Thompson’s L293 dual H-bridge IC is a popular choice for driving small bipolar steppers drawing up to 1 A per motor winding at up to 36 V. The L298 dual H-bridge is similar to the L293 but can handle up to 2 A per winding. National Semiconductor’s LMD18200 H-bridge IC can handle up to 3 A, and unlike the L293 and L298, it has protection diodes built in. More H-bridge ICs are available, so check the catalogs.</span></div>
<div id="filepos3256200" class="calibre3"><span class="calibre7"><span><span class="bold">14.8   Controlling the Driver with a Translator</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>A translator is a circuit that enacts the sequencing pulses used to drive a driver. In some instances, the translator may simply be a computer or programmable interface controller, with software directly generating the outputs needed to control the driver leads. In most cases, the translator is a special IC that is designed to provide the proper firing sequences from its output leads when a clock signal is applied to one of its input leads; another input signal may control the direction of the firing sequence (the direction of the motor). There are a number of stepper translator ICs available that are easy to use and fairly inexpensive. Let’s take a look at one of these devices in a second. First, let’s take a look at some simple translator circuits that can be built from simple digital components.</span></div>
<div class="calibre26"><span>A simple way to generate a four-phase drive pattern is to use a CMOS 4017 decade counter/divider IC (or a 74194 TTL version). This device sequentially makes 1 of 10 possible outputs high (others stay low) in response to clock pulses. Tying the fifth output (Q<small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small>) to ground makes the decade counter into a quad counter. To enact the drive sequence, a clock signal is applied to the clock input (see <a href="#filepos3258294">Fig. 14.11</a>). Another four-phase translator circuit that provides power stepping control as well as direction control can be constructed with a CMOS 4027 dual JK flip-flop IC (or a 7476 TTL version). The CMOS 4070 XOR logic (or 7486 TTL XOR logic) is used to set up directional control.</span></div>
<div id="filepos3258294" class="calibre3"><span><a></a><img alt="image" src="images/01985.jpg" class="calibre1275"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.11</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a href="#filepos3259444">Figure 14.12</a> shows a circuit that contains the translator, driver, and stepper all in one. The motor, in this case, is a unipolar stepper, while the translator is a TTL 74194 shift counter. The 555 timer provides clock signals to the 74194, while the DPDT switch acts to control the direction of the motor. The speed of the motor is dependent on the frequency of the clock, which in turn is dependent on <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>’s resistance. The translator in this circuit also can be used to control a variable reluctance stepper. Simply use the variable-reluctance driver from <a href="#filepos3253975">Fig. 14.9</a> and the firing sequence shown in <a href="#filepos3246600">Fig. 14.8</a> as your guides.</span></div>
<div id="filepos3259444" class="calibre3"><span><img alt="image" src="images/01986.jpg" class="calibre1660"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.12</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>Perhaps the best translator circuits you can hope for come in integrated packages. A number of manufacturers produce stepper motor controller ICs that house both the translator and driver sections. These chips are fairly simple to use and inexpensive. A classic stepper controller chip is the Philips SAA1027. The SAA1027 is a bipolar IC that is designed to drive four-phase steppers. It consists of a bidirectional four-state counter and a code converter that are used to drive four outputs in sequence. This chip has high-noise-immunity inputs, clockwise and counterclockwise capability, a reset control input, high output current, and output voltage protection. Its supply voltage runs from 9.5 to 18 V, and it accepts input voltages of 7.5 V minimum for high (1) and 4.5 V maximum for low (0). It has a maximum output current of 500 mA. <a href="#filepos3260740">Figure 14.13</a> will paint the rest of the picture.</span></div>
<div id="filepos3260740" class="calibre3"><span><img alt="image" src="images/01987.jpg" class="calibre1661"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.13</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre6"><span class="calibre17"><span class="bold"><span><span class="italic">Count input C</span> (<span class="italic">pin 15</span>)—A low-to-high transition at this pin causes the outputs to change states.</span></span></span></div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span><span class="italic">Mode input M</span> (<span class="italic">pin 3</span>)—Controls the direction of the motor. See table to the left.</span></span></span></div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span><span class="italic">Reset input R</span> (<span class="italic">pin 2</span>)—A low (0) at the <span class="italic">R</span> input resets the counter to zero. The outputs take on the levels shown in the upper and lower line of the table to the left.</span></span></span></div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span><span class="italic">External resistor RX</span> (<span class="italic">pin 4</span>)—An external resistor connected to the RX terminal sets the base current of the transistor drivers. Its value is based on the required output current.</span></span></span></div>
<div class="calibre26"><span class="calibre17"><span class="bold"><span><span class="italic">Outputs Q<small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> through Q<small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small></span> (<span class="italic">pins 6, 8, 9, 11</span>)—Output terminals that are connected to the stepper motor.</span></span></span></div>
<div class="calibre16"> </div>
<div class="calibre26"><span>As mentioned, the SAA1027 is a classic chip (old chip). Newer, better stepper control ICs are available from a number of manufacturers. If you are interested in learning more about these chips, try searching the Internet. You will find some useful websites that discuss stepper controller ICs in detail. Also, these websites often will provide links to manufacturers and distributors of stepper motors and controller ICs.</span></div>
<div id="filepos3262981" class="calibre3"><span class="calibre7"><span><span class="bold">14.9   A Final Word on Identifying Stepper Motors</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><a></a>When it comes to identifying the characteristics of an unknown stepper, the following suggestions should help. The vast majority of the steppers on the market today are unipolar, bipolar, or universal types. Based on this, you can guess that if your stepper has four leads, it is most likely a bipolar stepper. If the stepper has five leads, then the motor is most likely a unipolar with common center taps. If the stepper has six leads, it is probably a unipolar with separate center taps. A motor with eight leads would most likely be a universal stepper. (If you think your motor might be a variable-reluctance stepper, try spinning the shaft. If the shaft spins freely, the motor is most likely a variable-reluctance stepper. A coglike resistance indicates that the stepper is a permanent-magnet type.)</span></div>
<div class="calibre26"><span>Once you have determined what kind of stepper you have, the next step is to determine which leads are which. A simple way to figure this out is to test the resistance between various leads with an ohmmeter.</span></div>
<div class="calibre26"><span>Decoding the leads of a bipolar stepper is easy. Simply use an ohmmeter to determine which wire pair yields a low resistance value. A low resistance indicates that the two wires are ends of the same winding. If the two wires are not part of the same winding, the resistance will be infinite. A universal stepper can be decoded using a similar approach. Decoding a six-wire unipolar stepper requires isolating two three-wire pairs. From there, you figure out which wire is the common center tap by noticing which measured pair among the isolated three wires gives a unit <span class="italic">R</span> worth of resistance and which pair gives a unit of 2<span class="italic">R</span> worth of resistance (see <a href="#filepos3266349">Fig. 14.14</a>). Now, decoding a five-wire unipolar (with common center tap) is a bit more tricky than the others because of the common, but hidden, center tap. To help decode this stepper, you can use the diagram and table shown in <a href="#filepos3266349">Fig. 14.14</a>. (The dots within the table represent where the ohmmeter’s two probes are placed within the diagram.) With the table you isolate <span class="italic">e</span> (common tap wire) by noting when the ohmmeter gives a resistance of <span class="italic">R</span> units. Next, you determine which of the two wires in your hand is actually <span class="italic">e</span> by testing one of the two with the rest of the wires. If you always get <span class="italic">R</span>, then you are holding <span class="italic">e</span>, but if you get 2<span class="italic">R</span>, you are not holding <span class="italic">e</span>. Once the <span class="italic">e</span> wire is determined, any more ohmmeter deducing does not work—at least in theory—because you will always get 2<span class="italic">R</span>. The best bet now is to connect the motor to the driver circuitry and see if the stepper steps. If it does not step, fiddle around with the wires until it does.</span></div>
<div id="filepos3266349" class="calibre3"><span><img alt="image" src="images/01988.jpg" class="calibre1662"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE 14.14</span></span></span></span></div><div class="calibre35"> </div>  <div class="mbppagebreak"></div><div id="filepos3266649" class="calibre8"><span><a></a><span class="bold">CHAPTER 15</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Audio Electronics</span></span></span></span></div><div class="calibre21"> </div>
<div class="calibre11"><span>Audio electronics, in part, deals with converting sound signals into electrical signals. This conversion process typically is accomplished by means of a microphone. Once the sound is converted, what is done with the corresponding electrical signal is up to you. For example, you can amplify the signal, filter out certain frequencies from the signal, combine (mix) the signal with other signals, transform the signal into a digitally encoded signal that can be stored in memory, modulate the signal for the purpose of radiowave transmission, use the signal to trigger a switch (e.g., transistor or relay), etc.</span></div>
<div class="calibre26"><span>Another aspect of audio electronics deals with generating sound signals from electrical signals. To convert electrical signals into sound signals, you can use a speaker. (If you are not interested in retaining frequency response—say, you are only interested in making a warning alarm—you can use an audible sound device such as a dc buzzer or compression washer.) The electrical signals used to drive a speaker may be sound-generated in origin or may be artificially generated by special oscillator circuits.</span></div>
<div id="filepos3268216" class="calibre3"><span class="calibre7"><span><span class="bold">15.1   A Little Lecture on Sound</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Before you start dealing with audio-related circuits, it is worthwhile reviewing some of the basic concepts of sound. Sound consists of three basic elements: <span class="italic">frequency, intensity</span> (<span class="italic">loudness</span>), and <span class="italic">timbre</span> (<span class="italic">overtones</span>).</span></div>
<div class="calibre26"><span>The frequency of a sound corresponds to the vibrating frequency of the object that produced the sound. In terms of human physiology, the human ear can perceive frequencies from around 20 to 20,000 Hz; however, the ear is most sensitive to frequencies between 1000 and 2000 Hz.</span></div>
<div class="calibre26"><span><a></a>The intensity of a sound corresponds to the amount of sound energy transported across a unit area per second (or W/m<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>) and depends on the amplitude of oscillation of the vibrating object. As you move further away from the vibrating object, the intensity drops in proportion to one over the distance squared. The human ear can perceive an incredible range of intensities, from 10-<small class="calibre28"><span class="calibre17"><sup class="calibre29">12</sup></span></small> to 1 W/m<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>. Because this range is so extensive, it is usually more convenient to use a logarithmic scale to describe intensity. For this purpose, decibels are used. When using decibels, sound intensity is defined as dB = 10 log<small class="calibre28"><span class="calibre17"><sub class="calibre37">10</sub></span></small> (<span class="italic">I</span>/<span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>), where <span class="italic">I</span> is the measured intensity in watts per meter, and <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small> = 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">−12</sup></span></small> W/m<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small> is defined as the smallest intensity that is perceived as sound by humans. In terms of decibels, the audio intensity range for humans is between 0 and 120 dB. <a href="#filepos3270721">Figure 15.1</a> shows a number of sounds, along with their frequency and intensity ranges.</span></div>
<div id="filepos3270721" class="calibre3"><span><img alt="image" src="images/01989.jpg" class="calibre1663"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.1</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Tonal quality, or timbre, represents the complex wave pattern that is generated when the overtones of an instrument, voice, etc., are present along with the fundamental frequency. To demonstrate what overtones mean, consider a simple tuning fork that has a resonant frequency of 261.6 Hz (middle C). If you treat the fork as an ideal vibrator, when it is hit, it will vibrate off soundwaves with a frequency of 261.6 Hz. In this case, you have no overtones—you only get one frequency. But now, if you play middle C on a violin, you get an intensely sounding 261.1 Hz, along with a number of other higher, typically less intense frequencies called <span class="italic">overtones</span> (or <span class="italic">harmonics</span>). The most intense frequency sounded is typically referred to as the <span class="italic">fundamental frequency</span>. The overtones of importance have frequencies that are integer multiples of the fundamental frequency (e.g., 2 × 261.1 Hz is the first harmonic, 3 × 261.1 Hz is the second harmonic, and <span class="italic">n</span> × 261.1 Hz is the <span class="italic">n</span>th harmonic). It is the specific intensity of each overtone within the harmonic spectrum of an instrument, voice, etc., that is largely responsible for giving the instrument, voice, etc. its unique tonal quality. (The reason for an instrument’s unique set of overtones depends on the construction of the instrument.) <a href="#filepos3272602">Figure 15.2</a><span class="italic">a</span> shows a harmonic spectrum (spectral plot) for an oboe that is tuned to middle C—the fundamental frequency.</span></div>
<div id="filepos3272602" class="calibre3"><span><img alt="image" src="images/01990.jpg" class="calibre1664"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.2</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>In theory, you can create the sound from any type of instrument (e.g., violin, tuba, banjo, etc.) by examining the harmonic spectrum of that instrument. To illustrate how this can be done, pretend that you have a number of ideal tuning forks. One fork represents the fundamental frequency; the other forks represent the various overtone frequencies. Using the harmonic spectrum of an instrument as a guide, you can mimic the sound of the instrument by varying the intensity of each “overtone fork.” (In reality, to accurately mimic an instrument, you also must consider rise and decay times of certain overtones—controlling the intensities of the overtones is not enough.) Mathematically, you can express a complex sound as the sum of all its overtones:</span></div>
<div class="calibre19"><span>Signal = a sin ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>t + b cos ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>t + c sin 2ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>t + d cos 2ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>t + e sin 3ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>t + f cos ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>t + …</span></div>
<div class="calibre6"><span>The coefficients <span class="italic">a, b, c, d</span>, etc., are the intensities of the overtones, and the fundamental frequency <span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small> = ω<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>/2π. This expression is referred to as a <span class="italic">Fourier series</span>. The coefficients must be calculated from the given waveform or the data from which it is plotted—although an instrument called a <span class="italic">harmonic analyzer</span> can automatically compute the coefficients. <a href="#filepos3272602">Figure 15.2</a><span class="italic">b</span> shows a complex sound made up of seven of its harmonics.</span></div>
<div class="calibre26"><span>The art of synthesizing sounds via electric circuits is fairly complex business. To accurately mimic an instrumental sound, train whistle, bird chirp, etc., you must design circuits that can generate complex waveforms that contain all the overtones and decay and rise time information. For this purpose, special oscillator and modulator circuits are needed.</span></div>
<div id="filepos3275410" class="calibre3"><span class="calibre7"><span><span class="bold">15.2   Microphones</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>A microphone converts variations in sound pressure into corresponding variations in electric current. The amplitude of the ac voltage generated by a microphone is proportional to the intensity of the sound, while the frequency of the ac voltage corresponds to the frequency of the sound. (Note that if overtones are present within the sound signal, these overtones also will be present in the electrical signal.) Three commonly used microphones are listed next.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01991.jpg" class="calibre1665"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>This type of microphone consists of a plastic diaphragm, voice coil, and a permanent magnet. The diaphragm is connected to one end of the voice coil, while the other end of the coil is loosely supported around (or within) the magnet. When an alternating pressure is applied to the diaphragm, the voice coil alternates in response. Since the voice coil is accelerating through the magnet’s magnetic field, an induced voltage is set up across the leads of the voice coil. You can use this voltage to power a very small load, or you can use an amplifier to increase the strength of the signal so as to drive a larger load. Dynamic microphones are extremely rugged, provide smooth and extended frequency response, do not require an external dc source to drive them, perform well over a wide range of temperatures, and have a low impedance output. Some dynamic microphones house internal transformers within their bodies, which give them the ability to have either a high- or low-impedance output—a switch is used to select between the two. Dynamic microphones are widely used in public address, hi-fi, and recording applications.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.3</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/01992.jpg" class="calibre1666"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>This type of microphone consists of a pair of charged plates that can be forced closer or further apart by variations in air pressure. In effect, the plates act like a sound-sensitive capacitor. One plate is made of a rigid metal that is fixed in place and grounded. The other plate is made of a flexible metal or metal-coiled plastic that is positively charged by means of an external voltage source. A very low-noise, high-impedance amplifier is required to operate this type of microphone and to provide low output impedance. Condenser microphones offer crisp, low-noise sound and are used for high-quality sound recording.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.4</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/01993.jpg" class="calibre1667"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>An electret microphone is a variation of the condenser microphone. Instead of requiring an external voltage source to charge the diaphragm, it uses a permanently charged plastic element (electret) placed in parallel with a conductive metal backplate. Most electret microphones have a small FET amplifier built into their cases. This amplifier requires power to operate—typically a voltage between +1.5 and +10 V is needed. This voltage is fed into the microphone through a resistor (1–10 K) (see figure). Electret microphones used to suffer from poor performance, but modern designs can achieve results comparable to those of a condenser microphone.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.5</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3279885" class="calibre3"><span class="calibre7"><span><span class="bold">15.3   Microphone Specifications</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>A microphone’s <span class="italic">sensitivity</span> represents the ratio of electrical output (voltage) to the intensity of sound input. Sensitivity is often expressed in decibels with respect to a reference sound pressure of 1 dyn/cm<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>.</span></div>
<div class="calibre26"><span>The <span class="italic">frequency response</span> of a microphone is a measure of the microphone’s ability to convert different acoustical frequencies into ac voltages. For speech, the frequency response of a microphone need only cover a range from around 100 to 3000 Hz. However, for hi-fi applications, the frequency response of the microphone must cover a wider range, from around 20 to 20,000 Hz.</span></div>
<div class="calibre26"><span><a></a>The <span class="italic">directivity characteristic</span> of a microphone refers to how well the microphone responds to sound coming from different directions. <span class="italic">Omnidirectional</span> microphones respond equally well in all directions, whereas <span class="italic">directional</span> microphones respond well only in specific directions.</span></div>
<div class="calibre26"><span>The <span class="italic">impedance</span> of a microphone represents how much the microphone resists the flow of an ac signal. Low-impedance microphones are classified as having an impedance of less than 600 Ω. Medium-impedance microphones range from 600 to 10,000 Ω, whereas high-impedance microphones extend above 10,000 Ω. In modern audio systems, it is desirable to connect a lower-impedance microphone to a higher-impedance input device (e.g., 50-Ω microphone to 600-Ω mixer), but it is undesirable to connect a high-impedance microphone to a low-impedance input. In the first case, not much signal loss will occur, whereas in the second case, a significant amount of signal loss may occur. The standard rule of thumb is to allow the load impedance to be 10 times the source impedance. We’ll take a closer look at impedance matching later on in this chapter.</span></div>
<div id="filepos3282410" class="calibre3"><span class="calibre7"><span><span class="bold">15.4   Audio Amplifiers</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Electrical signals within audio circuits often require amplification to effectively drive other circuit elements or devices. Perhaps the easiest and most efficient way to amplify a signal is to use an op amp. General-purpose op amps such as the 741 will work fine for many noncritical audio applications, but they may cause distortion and other undesirable effects when audio signals get complex. A better choice for audio applications is to use an audio op amp especially designed to handle audio signals. Audio amplifiers have high slew rates, high gain-bandwidth products, high input impedances, low distortion, high voltage/power operation, and very low input noise. There are a number of good op amps produced by a number of different manufacturers. Some high-quality op amps worth mentioning include the AD842, AD847, AD845, AD797, NE5532, NE5534, NE5535, OP-27, LT1115, LM833, OPA2604, OP249, HA5112, LM4562, OPA134, OPA2134, and LT1057.</span></div>
<div id="filepos3283753" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">15.4.1   Inverting Amplifier</span></span></span></span></span></div>
<div class="calibre11"><span>The following two circuits act as inverting amplifiers. The gain for both circuits is determined by −<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> (see <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_014.html#filepos2297020">Chap. 8</a> for the theory), while the input impedance is approximately equal to <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>. The first op amp circuit uses a dual power supply, while the second op amp circuit uses a single power supply.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01994.jpg" class="calibre1668"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>In both amplifier circuits, <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> acts as an ac coupling capacitor—it acts to pass ac signals while preventing unwanted dc signals from passing from the previous stage. Without <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, dc levels would be present at the op amp’s output, which in turn could lead to amplifier saturation and distortion as the ac portion of the input signal is amplified. <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> also helps prevent low-frequency noise from reaching the amplifier’s input.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre3"><span><img alt="image" src="images/01995.jpg" class="calibre1669"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>In the single-power-supply circuit, biasing resistors <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small> are needed to prevent the amplifier from clipping during negative swings in the audio input signals. They act to give the op amp’s output a dc level on which the ac signal can safely fluctuate. Setting <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> = <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small> sets the dc level of the op amp’s output to 1/2 (+V). For reliable results, the biasing resistors should have resistance values between 10 and 100 k. Now, to prevent passing the dc level onto the next stage, <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> (ac coupling capacitor) must be included. Its value should be equal to 1/(2π<span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37"><span class="italic">C</span></sub></span></small>R<small class="calibre28"><span class="calibre17"><sub class="calibre37"><span class="italic">L</span></sub></span></small>), where RL is the load resistance, and <span class="italic">f<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> is the cutoff frequency. <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small> acts as a filtering capacitor used to eliminate power-supply noise from reaching the op amp’s noninverting input.<br class="calibre16"/>    Notably, many audio op amps are especially designed for single-supply operation—they do not require biasing resistors.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.6</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3287242" class="calibre3"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">15.4.2   Noninverting Amplifier</span></span></span></span></span></div>
<div class="calibre11"><span>The preceding inverting amplifier works fine for many applications, but its input impedance is not incredibly large. To achieve a larger input impedance (useful when bridging a high-impedance source to the input of an amplifier), you can use one of the following noninverting amplifiers. The left amplifier circuit uses a dual power supply, whereas the right amplifier circuit uses a single power supply. The gain for both circuits is equal to <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> + 1.</span></div>
<div id="filepos3288065" class="calibre48"><span class="bold"><span class="italic"><span><span class="italic">15.4.3   Digital Amplifiers</span></span></span></span></div>
<div class="calibre11"><span>Digital power amplifiers are also known as class-D amplifiers or PWM amplifiers. They are extremely efficient and so run quite cool. This makes them ideal for very high-power amplifiers of powers in the hundreds of watts or even the kilowatts range.</span></div>
<div class="calibre3"><span><img alt="image" src="images/01996.jpg" class="calibre76"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a>FIGURE 15.7   Components <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, and the biasing resistors serve the same function as was seen in the inverting amplifier circuits. The noninverting input offers an exceptionally high input impedance and can be matched to the source impedance more readily by adjusting <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> (dual-supply circuit) or <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small> (single-supply circuit). The input impedance is approximately equal to <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> (dual-supply circuit) or <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">4</sub></span></small> (single-supply circuit).</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a href="#filepos3290313">Figure 15.8</a> shows the block diagram for a class-D amplifier. The input signal is converted into a PWM signal by comparing it with a triangle wave. This is a very neat trick. As the triangle wave rises, at some point, it will become greater than the signal voltage. If the signal voltage is high, this will take longer; if the voltage is low, it will happen sooner. In this way, the pulse length produced will be proportional to the instantaneous input voltage.</span></div>
<div id="filepos3290313" class="calibre3"><span><img alt="image" src="images/01997.jpg" class="calibre1670"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.8</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a href="#filepos3290875">Figure 15.9</a> shows the result of simulating the comparator with a triangle waveform of 10 kHz sampling a sine wave input signal at 1 kHz. The squarewave is the PWM output.</span></div>
<div id="filepos3290875" class="calibre3"><span><img alt="image" src="images/01998.jpg" class="calibre112"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.9</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>We have digitized our audio signal. It is now just on or off. So we can use that to switch as high a current as we like, using big MOSFETs in a complementary arrangement or some other switching transistor. This high-power PWM signal will be conveying the right energy at the right time, but it is being carried in the high-frequency switching squarewave. This needs low-pass filtering to remove this carrier, leaving just the original signal in amplified form.</span></div>
<div class="calibre26"><span>The quality of digital amplifiers can be very variable, but their efficiency makes them an attractive proposition. There are a number of ICs available that either encapsulate the whole amplifier in one device or provide outputs suitable for driving a complementary pair of MOSFETs. A couple devices to look at are the NCP2704 and LX1720.</span></div>
<div id="filepos3292134" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">15.4.4   Reducing Hum in Audio Amplifiers</span></span></span></span></span></div>
<div class="calibre11"><span>If your project includes an audio amplifier that you are designing yourself, then you need to consider <span class="italic">hum</span>. Domestic power lines and devices will easily induce an annoying 60 Hz hum in an audio amplifier. Some of this signal can arrive through the amplifier’s power supply. Hence, design of power supplies for hi-fi amplifiers is almost as important as the designs for the amplifiers themselves. The main thing is to add as much smoothing capacitance to the power supply as possible.</span></div>
<div class="calibre26"><span>Other 60 Hz signals will arrive in your audio amplifier circuit by mutual induction with wires and tracks on your PCB. You should make sure that you keep all PCB tracks and wires as short as possible. Wires should also be screened with the screening layer grounded.</span></div>
<div id="filepos3293252" class="calibre3"><span class="calibre7"><span><span class="bold">15.5   Preamplifiers</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>In most audio applications, the term <span class="italic">preamplifier</span> refers to a control amplifier that is used to control features such as input selection, level control, gain, and impedance levels. Here are a few simple microphone preamplifier circuits to get you started. (Note that “high Z” refers to a microphone with a high input impedance—one that is greater than ~600 Ω.)</span></div>
<div class="calibre3"><span><img alt="image" src="images/01999.jpg" class="calibre85"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.10</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3294319" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">15.6   Mixer Circuits</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Audio mixers are basically summing amplifiers—they add a number of different input signals together to form a single superimposed output signal. The two circuits below are simple audio mixer circuits. The left circuit uses a common-emitter amplifier as the summing element, while the right circuit uses an op amp. The potentiometers are used as independent input volume controls.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02000.jpg" class="calibre1494"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.11</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3295385" class="calibre3"><span class="calibre7"><span><span class="bold">15.7   A Note on Impedance Matching</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Is matching impedances between audio devices necessary? Not any more, at least when it comes to connecting a low-impedance source to a high-impedance load. In the era when vacuum-tube amplifiers were the standard, it was important to match impedances to achieve maximum power transfer between two devices. Impedance matching reduced the number of vacuum-tube amplifiers needed in circuit design (e.g., the number of vacuum-tube amplifiers needed along a telephone transmission line). However, with the advent of the transistor, more efficient amplifiers were created. For these new amplifiers, what was important—and still is important—was maximum voltage transfer, not maximum power transfer. (Think of an op amp with its extremely high input impedance and low output impedance. To initiate a large-output- current response from an op amp, practically no input current is required into its input leads.) For maximum voltage transfer to occur, it was found that the destination device (called the <span class="italic">load</span>) should have an impedance of at least 10 times that of the sending device (called the <span class="italic">source</span>). This condition is referred to as <span class="italic">bridging</span>. (Without applying the bridging rule, if two audio devices with the same impedances are joined, you would see around a 6 dB worth of attenuation loss in the transmitted signal.) Bridging is the most common circuit configuration used when connecting modern audio devices. It is also applied to most other electronic source-load connections, with the exception of certain radiofrequency circuits where matching impedance is usually desired and in cases where the signal being transmitted is a current rather than a voltage. If the transmitted signal is a current, the source impedance should be larger than the load impedance.</span></div>
<div class="calibre26"><span><a></a>Now, if you consider a high-impedance source connected to a low-impedance load (e.g., a high-impedance microphone connected to a low-impedance mixer), voltage transfer can result in significant signal loss. The amount of signal loss in this case would be equal to</span></div>
<div class="calibre19"><span><img alt="image" src="images/02001.jpg" class="calibre1671"/></span></div>
<div class="calibre6"><span>As a rule of thumb, a loss of 6 dB or less is acceptable for most applications.</span></div>
<div id="filepos3298271" class="calibre3"><span class="calibre7"><span><span class="bold">15.8   Speakers</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Speakers convert electrical signals into audible signals. The most popular speaker used today is the dynamic speaker. The dynamic speaker operates on the same basic principle as a dynamic microphone. When a fluctuating current is applied through a moving coil (voice coil) that surrounds a magnet (or that is surrounded by a magnet), the coil is forced back and forth. A large paper cone attached to the coil responds to the back-and- forth motion by “drumming off” sound waves.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02002.jpg" class="calibre110"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.12</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Every speaker is given a <span class="italic">nominal impedance Z</span> that represents the average impedance across its leads. (In reality, a speaker’s impedance varies slightly with frequency, above and below the nominal level.) In terms of applications, you can treat the speaker like a simple resistive load of impedance <span class="italic">Z</span>. For example, if you attach an 8-Ω speaker to an amplifier’s output, the amplifier will treat the speaker as an 8-Ω load. The amount of current drawn from the amplifier will be <span class="italic">I</span> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">Z</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">speaker</sub></span></small>. However, if you replace the 8-Ω speaker with a 4-Ω speaker, the current drawn from the amplifier will double.</span></div>
<div class="calibre26"><span>Driving two 8-Ω speakers in parallel is equivalent to driving a 4-Ω speaker. Driving two 4-Ω speakers in parallel is equivalent to driving a 2-Ω speaker. By using high-power resistors, it is possible to change the overall impedance sensed by the amplifier. For example, by placing a 4-Ω resistor in series with a 4-Ω speaker, you can create a load impedance of 8 Ω. However, using a series resistor to increase the impedance may hurt the sound quality. There are speaker-matching transformers that can change from 4 to 8 Ω, but a high-quality transformer like this can cost as much as a new speaker and can add slight frequency response and dynamic range errors.</span></div>
<div class="calibre26"><span><a></a>Another important characteristic of a speaker is its frequency response. <span class="italic">The frequency response</span> represents the range over which a speaker can effectively vibrate off audio signals. Speakers that are designed to respond to low frequencies (typically less than 200 Hz) are referred to as <span class="italic">woofers. Midrange speakers</span> are designed to handle frequencies typically between 500 and around 3000 Hz. A <span class="italic">tweeter</span> is a special type of speaker (typically dome or horn type) that can handle frequencies above midrange. Some speakers are designed as full-range units that are capable of reproducing frequencies from around 100 to 15,000 Hz. A full-range speaker’s sound quality tends to be inferior to a speaker system that incorporates a woofer, midrange, and tweeter speaker all together.</span></div>
<div id="filepos3302006" class="calibre3"><span class="calibre7"><span><span class="bold">15.9   Crossover Networks</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>To design a decent speaker system, it would be best to incorporate a woofer, midrange speaker, and tweeter together so that you get good sound response over the entire audio spectrum (20 to 20,000 Hz). However, simply connecting these speakers in parallel will not work because each speaker will be receiving frequencies outside its natural frequency-response range. What you need is a filter network that can divert high-frequency signals to the tweeter, low-frequency signals to the woofer, and midrange-frequency signals to the midrange speaker. The filter network that is used for this sort of application is called a <span class="italic">crossover network</span>.</span></div>
<div class="calibre26"><span>There are two types of crossovers: passive or active. Passive crossover networks consist of passive filter elements (e.g., capacitors, resistors, inductors) that are placed between the power amplifier and the speaker—they are placed inside the speaker cabinet. Passive crossover networks are cheap to make, easy to make foolproof, and can be tailored for a specific speaker. However, they are nonadjustable and always use up some amplifier power. Active crossover networks consist of a set of active filters (op amp filters) that are placed before the amplifier section. The fact that active crossover networks come before the power amplifier section makes it easier to manipulate the signal because the signal is still tiny (not amplified). Also, a single active crossover network can be used to control a number of different amplifier-speaker combinations at the same time. Since active crossover networks use active filters, the audio signal will not suffer as much attenuation loss as it would if it were applied through a passive crossover network.</span></div>
<div class="calibre26"><span><a href="#filepos3305352">Figure 15.13</a> shows a simple passive crossover network used to drive a three-speaker system. The graph shows typical frequency-response curves for each speaker. To produce an overall flat response from the system, you use a low-pass, bandpass, and high-pass filter. <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">t</sub></span></small></span> form the low-pass filter, <span class="italic">L</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, and <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">m</sub></span></small></span> form the bandpass filter, and <span class="italic">L</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> and <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">w</sub></span></small></span> form the low-pass filter (<span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">t</sub></span></small></span>, <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">m</sub></span></small></span>, and <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">w</sub></span></small></span> are the nominal impedances of the tweeter, midrange, and woofer speakers).</span></div>
<div id="filepos3305352" class="calibre3"><span><img alt="image" src="images/02003.jpg" class="calibre1672"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.13</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>To determine the component values needed to get the desired response, use the following: <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> = 1/(2π<span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>R<small class="calibre28"><span class="calibre17"><sub class="calibre37">t</sub></span></small>), <span class="italic">L</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> = R<small class="calibre28"><span class="calibre17"><sub class="calibre37">m</sub></span></small>/(2π<span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>), <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = 1/(2π<span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small><span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">m</sub></span></small></span>), and <span class="italic">L</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">w</sub></span></small></span>/2π<span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, where <span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> represent the 3-dB points shown in the graph. Usually, passive crossover networks are a bit more sophisticated than the one presented here. They often incorporate higher-order filters along with additional elements, such as an impedance compensation network, attenuation network, series notch filter, etc., all of which are used to achieve a flatter overall response.</span></div>
<div class="calibre26"><span><a></a>Here is a more practical passive crossover network (crossover frequency 1.8 kHz) used to drive a two-speaker system consisting of an 8-Ω tweeter and an 8-Ω woofer. An 18 × 12 × 8 in fiberboard box acts as a good resonant cavity for this system.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02004.jpg" class="calibre1673"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.14</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>The following is an active crossover network that is used to drive a two-speaker system that has a crossover frequency (3-dB point) around 600 Hz and 18 dB per octave response. A LF356 high-performance op amp is used as the active element. Remember that for active filters the output signals must be amplified before they are applied to the speaker inputs.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02005.jpg" class="calibre1674"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.15</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3308423" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">15.10   Simple ICs Used to Drive Speakers</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre3"><span><img alt="image" src="images/02006.jpg" class="calibre1675"/></span></div>
<div class="calibre3"><span><img alt="image" src="images/02007.jpg" class="calibre169"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The LM386 audio amplifier is designed primarily for low-power applications. A +4- to +15-V supply voltage is used to power the IC. Unlike a traditional op amp, such as the 741, the 386’s gain is internally fixed to 20. However, it is possible to increase the gain to 200 by connecting a resistor-capacitor network between pins 1 and 8. The 386’s inputs are referenced to ground, while internal circuitry automatically biases the output signal to one-half the supply voltage. This audio amplifier is designed to drive an 8-Ω speaker.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.16</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/02008.jpg" class="calibre1576"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The LM383 is a power amplifier designed to drive a 4-Ω speaker or two 8-Ω speakers in parallel. It contains thermal shutdown circuitry to protect itself from excessive loading. A heat sink is required to avoid shutdown at levels below the maximum power output.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.17</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3310523" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">15.11   Audible-Signal Devices</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>There are a number of unique audible-signal devices that are used as simple warning signal indicators. Some of these devices produce a continuous tone, others produce intermittent tones, and still others are capable of generating a number of different frequency tones, along with various periodic on/off cycling characteristics. Audible-signal devices come in both dc and ac types and in various shapes and sizes. Some of these devices are extremely small—no bigger than a dime. A good electronics catalog will provide a listing of audio-signal devices, along with their size, sound type, dB ratings, voltage ratings, and current-drain specifications.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02009.jpg" class="calibre1676"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.18</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3311870" class="calibre3"><span class="calibre7"><span><span class="bold">15.12   Miscellaneous Audio Circuits</span></span></span></div>
<div class="calibre11"><img alt="image" src="images/00007.jpg" class="calibre36"/></div>
<div class="calibre3"><span><img alt="image" src="images/02010.jpg" class="calibre1677"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.19</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/02011.jpg" class="calibre1678"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><a></a><a></a>FIGURE 15.20</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/02012.jpg" class="calibre1679"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.21</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/02013.jpg" class="calibre1680"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 15.22</span></span></span></div><div class="calibre35"> </div>  <div class="mbppagebreak"></div><div id="filepos3313314" class="calibre8"><span><a></a><span class="bold">CHAPTER 16</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Modular Electronics</span></span></span></span></div><div class="calibre21"> </div>
<div class="calibre11"><span>Electronics has changed over the past few years, and more and more people have an invention, but don’t necessarily want to learn degree-level electronics to make it a reality. Suppliers such as SparkFun, Seeed Studio, Pololu, and others support this by supplying modules and breakout boards that simplify the process of using complex devices. In addition, there are ICs for most of what you might want to do in electronics, and these will greatly simplify your project build. Also, there are whole systems, such as Arduino (see <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_019.html#filepos3084490">Chap. 13</a>), .NET Gadgeteer, and Netduino, that provide plug-together modules for pretty much anything that you might want to build that has a microcontroller at its heart.</span></div>
<div id="filepos3314393" class="calibre3"><span class="calibre7"><span><span class="bold">16.1   There’s an IC for It</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Although plenty of useful, general-purpose ICs are available, there are also some very specialized devices. Before designing anything complex from discrete devices, you should always check that you are not reinventing the wheel. There may be an IC that you can use that will reduce the component count and cost of your project.</span></div>
<div class="calibre26"><span><a href="#filepos3316041">Table 16.1</a> lists some of the ICs that you may find useful for your projects. Some of them are general purpose; others fill a very narrow niche. This is not intended to be any exhaustive list, but rather to provide inspiration. We have not listed part URLs. You can find places to buy components using the Octopart parts search engine (<a href="http://www.octopart.com">http://www.octopart.com</a>), where you will also be able to track down data sheets.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><a></a><span class="bold">TABLE 16.1   ICs for Electronics Projects</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3316041" class="calibre3"><span><img alt="image" src="images/02014.jpg" class="calibre1681"/></span></div>
<div id="filepos3316188" class="calibre3"><span class="calibre7"><span><span class="bold">16.2   Breakout Boards and Modules</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>You do not always need to start your design from scratch. Many ready-made modules and breakout boards are available to inventors to incorporate into their designs.</span></div>
<div class="calibre26"><span>The difference between a breakout board and a module is often a little blurred. The intention of a breakout board is that it simply “breaks out” the difficult-to-access pins of a surface-mounted device (SMD) IC into 0.1-in connections that are much easier to use. However, breakout boards often add a few extra components like a decoupling capacitor, voltage regulator, or level conversion. So the point at which a breakout board becomes a module is a bit arbitrary.</span></div>
<div class="calibre30"><span>Whatever you chose to call them, breakout boards and modules can be very useful in prototyping when you want to get something working to prove a concept using prebuilt modules, and then advance to a final design without the module.</span></div>
<div class="calibre26"><span>There are many sensor modules (see <a href="#filepos3318345">Table 16.2</a>), and some of these are covered in more detail in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_011.html#filepos1954140">Chap. 6</a>. <a href="#filepos3318345">Table 16.2</a> lists some of the more interesting modules that we have come across.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><span class="bold">TABLE 16.2   Some Modules and Breakout Boards</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos3318345" class="calibre3"><span><img alt="image" src="images/02015.jpg" class="calibre1682"/></span></div>
<div class="calibre3"><span><img alt="image" src="images/02016.jpg" class="calibre207"/></span></div>
<div id="filepos3318639" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">16.2.1   Radio Frequency Modules</span></span></span></span></span></div>
<div class="calibre11"><span><a></a><a></a>Radio frequency (RF) electronics is a specialized part of electronics that is a discipline in its own right. At high frequencies, PCB layout becomes critical, and design is not as straightforward as with more typical analog and digital design. For this reason, you will often find ready-to-use RF modules that can either be soldered onto your own PCB as part of a bigger design or plugged into socket headers. <a href="#filepos3319389">Figure 16.1</a> shows a variety of RF modules:</span></div>
<div id="filepos3319389" class="calibre3"><span><img alt="image" src="images/02017.jpg" class="calibre1683"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 16.1</span></span></span></div><div class="calibre35"> </div>
<div class="calibre187"><span>•  A 433MHz receiver and transmitter pair (A)</span></div>
<div class="calibre27"><span>•  A TEA5767 FM receiver board (B)</span></div>
<div class="calibre27"><span>•  A Bluetooth modem, which is actually one module on top of another, with the larger one providing level conversion (C)</span></div>
<div class="calibre27"><span>•  An XRF wireless serial module that fits a standard XBee socket (D)</span></div>
<div class="calibre30"><span>These represent just a small subset of the wide range of RF modules available to the inventor (see <a href="#filepos3318345">Table 16.2</a> for a more complete list).</span></div>
<div class="calibre3"><span><span class="bold">433 MHz and 315 MHz Modules</span></span></div>
<div class="calibre11"><span>The 433 MHz and 315 MHz modules (<a href="#filepos3319389">Fig. 16.1A</a>) are very low cost. They find their way into all sorts of consumer electronics requiring remote control, such as wireless door bells, remote car unlocking, smart meters, and remote-control toys.</span></div>
<div class="calibre26"><span><a></a>The data rates are generally low (8 kb/s is usually the top end, and 2 kb/s is quite common), but power consumption is also low. Their maximum range is normally about 100 yards, but can be much less indoors.</span></div>
<div class="calibre26"><span>These modules are usually separate transmitters and receivers, rather than a combined transceiver, and so they are generally used in situations where data is flowing in only one direction.</span></div>
<div class="calibre3"><span><span class="bold">Bluetooth Modules</span></span></div>
<div class="calibre11"><span>Bluetooth modules provide a great means of interfacing your electronics to a mobile phone. The module in <a href="#filepos3319389">Fig. 16.1C</a> is actually a basic 3.3 V Bluetooth module designed to be surface mounted onto another board. In this case, it is mounted on a level changing board that allows the module to operate at 5 V TTL serial levels, but 3.3 V modules like this often find themselves incorporated into products. Again, economies of scale mean that these modules can be bought for just a few dollars if you look around.</span></div>
<div class="calibre3"><span><span class="bold">XBee Modules</span></span></div>
<div class="calibre11"><span>XBee is a proprietary standard of Digi International, but the sockets have been adopted for a range of radio link modules from many manufacturers. These modules, such as the XRF module from Ciseco Plc (see <a href="#filepos3323185">Fig. 16.2</a>), act as a transparent serial interface between two devices. For example, one of the devices might be an Arduino with an XBee socket shield with an XRF module installed communicating with a low-power remote sensor with an XBee socket and another XRF module, as shown on the left in <a href="#filepos3323185">Fig. 16.2</a>.</span></div>
<div id="filepos3323185" class="calibre3"><span><img alt="image" src="images/02018.jpg" class="calibre1684"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 16.2</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">GSM/GPRS Modem Modules</span></span></div>
<div class="calibre11"><span>The GSM/GPRS modem modules are essentially cellular phone modules that provide most of the features of a cellular phone, including sending Short Message Service (SMS) text messages and Global System for Mobile Communications (GSM)/General Packet Radio Service (GPRS) data. Serial commands are sent to the module from a microcontroller to control its operation.</span></div>
<div id="filepos3324026" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">16.2.2   Audio Modules</span></span></span></span></span></div>
<div class="calibre11"><span>Although audio electronics is not as difficult as RF electronics, you still need to be careful to avoid earth loops and the dreaded 60 Hz hum that all too easily finds its way on to the signal path given half a chance.</span></div>
<div class="calibre26"><span><a></a>You will find a good selection of audio amplifier modules such as the class D amplifier based on the XMA2012, which is a 2 x 3 W power amp IC (see <a href="#filepos3324773">Fig. 16.3</a>).</span></div>
<div id="filepos3324773" class="calibre3"><span><img alt="image" src="images/02019.jpg" class="calibre1685"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 16.3</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>This kind of module is very convenient, as it comes with screw terminals for power and speakers and a socket for audio input. Economies of scale make the cost of such modules low.</span></div>
<div class="calibre26"><span>As well as power amp modules, you will also find audio modules for pre-amps, MP3 players, MIDI interfaces, and tone controls.</span></div>
<div id="filepos3325532" class="calibre3"><span class="calibre7"><span><span class="bold">16.3   Plug-and-Play Prototyping</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>When taken to its extreme, the modular approach can result in a system such as .NET Gadgeteer that allows complete plug-and-play development of a prototype (see <a href="#filepos3326269">Fig. 16.4</a>). This system is based on attaching a wide range of sensors and other modules to a microcontroller main board using plug-in cables.</span></div>
<div id="filepos3326269" class="calibre3"><span><img alt="image" src="images/02020.jpg" class="calibre1686"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 16.4</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>.NET Gadgeteer is programmed using Microsoft Visual Studio. When used with .NET Gadgeteer, this IDE includes a graphical editor that generates much of the boilerplate code, simply by connecting modules in the design window (see <a href="#filepos3326907">Fig. 16.5</a>).</span></div>
<div id="filepos3326907" class="calibre3"><span><img alt="image" src="images/02021.jpg" class="calibre1687"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 16.5</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>New modules for the .NET Gadgeteer are being developed all the time. The following are most of the modules available at the time of writing:</span></div>
<div class="calibre187"><span>•  Accelerometer</span></div>
<div class="calibre27"><span>•  Barometer</span></div>
<div class="calibre27"><span>•  Bluetooth</span></div>
<div class="calibre27"><span>•  Buttons</span></div>
<div class="calibre27"><span>•  Camera</span></div>
<div class="calibre27"><span>•  CAN (vehicle engine management unit)</span></div>
<div class="calibre27"><span>•  Cellular radio/GSM/GPRS modem</span></div>
<div class="calibre27"><span>•  Compass</span></div>
<div class="calibre27"><span>•  Current measurement (for smart meters and energy monitors)</span></div>
<div class="calibre27"><span>•  Display, touch screen LCD</span></div>
<div class="calibre27"><span>•  GPS</span></div>
<div class="calibre27"><span>•  Gyroscope</span></div>
<div class="calibre27"><span>•  Joystick</span></div>
<div class="calibre27"><span>•  LED, multicolor</span></div>
<div class="calibre27"><span>•  Light sensor</span></div>
<div class="calibre27"><span>•  Moisture sensor</span></div>
<div class="calibre27"><span><a></a>•  Motor driver</span></div>
<div class="calibre27"><span>•  MP3 music player</span></div>
<div class="calibre27"><span>•  OLED display</span></div>
<div class="calibre27"><span>•  Potentiometer</span></div>
<div class="calibre27"><span>•  Pulse oximeter (heart pulse rate measurement)</span></div>
<div class="calibre27"><span>•  Relay</span></div>
<div class="calibre27"><span>•  SD card</span></div>
<div class="calibre27"><span>•  USB interface</span></div>
<div class="calibre27"><span>•  Video output</span></div>
<div class="calibre27"><span>•  Wi-Fi</span></div>
<div class="calibre27"><span>•  XBee</span></div>
<div class="calibre30"><span>The module manufacturers also supply main boards of different sizes and specifications. For up-to-date lists, see the websites of the main suppliers of .NET Gadgeteer hardware: GHI Electronics, Seeed Studio, Sytech Designs, and DFRobot.</span></div>
<div class="calibre26"><span>If you want to learn more about using .NET Gadgeteer, the book <span class="italic">Getting Started with .NET Gadgeteer</span> by Simon Monk (Make, 2012) is a good place to start.</span></div>
<div id="filepos3331503" class="calibre3"><span class="calibre7"><span><span class="bold">16.4   Open Source Hardware</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Open source software has been with us for many years now, but open source hardware is a relatively new concept. The term <span class="italic">open source</span> really applies to the design files for the hardware, and means that the schematic and PCB design are made publicly available (usually in EAGLE CAD format). The implications of this are that anyone is free to take those design files and produce their own boards using the design. Often, the originator of a new piece of open source hardware will also manufacture the boards and sell them directly or through distributors. The originator will generally be known in the community, and these will be considered to be the “original” boards and therefore the most valuable. Copies and clones may appear if the design is successful, but the original boards are likely to remain the most used.</span></div>
<div class="calibre26"><span>Perhaps the most successful open source hardware design is the Arduino (see <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_019.html#filepos3084490">Chap. 13</a>). All the Arduino boards and most of the shields available for the Arduino are released under an open source or creative commons license. Other well-known open source hardware projects include the following:</span></div>
<div class="calibre187"><span>•  <span class="bold">BeagleBoard</span>   A single-board computer</span></div>
<div class="calibre27"><span>•  <span class="bold">MIDIbox</span>   MIDI music hardware</span></div>
<div class="calibre27"><span>•  <span class="bold">Monome</span>   A button and LED grid for controlling virtual synthesizers</span></div>
<div class="calibre27"><span>•  <span class="bold">Ultimaker, RepRap, and MakerBot</span>   3D printer designs</span></div>
<div class="calibre27"><span>•  <span class="bold">Chumby</span>   An embedded computer</span></div>
<div class="calibre27"><span>•  <span class="bold">Open</span>   EEG A medical device</span></div>
<div class="calibre30"><span>There are also many small modules that are released as open source designs.</span></div>
<div class="calibre26"><span><a></a><a></a>So, why would anyone want to give away their ideas for free for the world to use? Well, for one thing, many creative people make things for the fun of making them and not to get rich. There is a world of difference between having a good idea and building a business. If you want people to see and use what you have done, then why not release it into the wild? As with open source software, there are also opportunities for businesses to develop with the so called “halo effect,” providing consultation and support for the hardware.</span></div>  <div class="mbppagebreak"></div><div id="filepos3335084" class="calibre8"><span><a></a><span class="bold">APPENDIX A</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Power Distribution and Home Wiring</span></span></span></span></div><div class="calibre21"> </div>
<div id="filepos3335356" class="calibre3"><span class="calibre7"><span><span class="bold">A.1   Power Distribution</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><a href="#filepos3336129">Figure A.1</a> shows a typical power-distribution system found in the United States (region in California). The voltages listed are sinusoidal and are represented by their rms values. Note that the system in your area may look a bit different from the system shown here. Contact your local utility to learn about how things are set up in your region.</span></div>
<div id="filepos3336129" class="calibre3"><span><img alt="image" src="images/02022.jpg" class="calibre1688"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE A.1</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>As a note, ac is used in electrical distribution instead of dc because ac can be stepped up or down easily by using a transformer. Also, over long distances, it is more efficient to send electricity via high-voltage/low-current transmission lines. By reducing the current, less power is lost to resistive heating during transmission (lowering <span class="italic">I</span> within <span class="italic">P</span> = <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small><span class="italic">R</span> lowers <span class="italic">P</span>). Once electricity reaches a substation, it must be stepped down to a safe level before entering homes and businesses.</span></div>
<div class="calibre26"><span>Notice that industry typically uses three-phase electricity. The natural sequencing of the three phases is particularly useful for devices that perform rhythmic tasks. For example, three-phase electric motors (found in grinders, lathes, welders, air conditioners, and other high-power devices) often turn in near synchrony with the rising and falling voltages of the phases. Also, with three-phase electric power, there is never a time when all three phases are at the same voltage. With single-phase power, whenever the two phases have the same voltage, there is temporarily no electric power available. This is why single-phase electric devices must store energy to carry them over these dry spells. In three-phase power, a device can always obtain power from at least one pair of phases.</span></div>
<div id="filepos3337944" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">A.2   A Closer Look at Three-Phase Electricity</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>The simple generator shown in <a href="#filepos3338763">Fig. A.2</a> can be used to generate single-phase voltage. As the magnet is rotated by a mechanical force, a voltage is induced within the two coils (spaced 180° apart) that yields a single sinusoidal voltage. The output voltage is usually expressed as an rms voltage (<img alt="image" src="images/02023.jpg" class="calibre1689"/>).</span></div>
<div id="filepos3338763" class="calibre3"><span><img alt="image" src="images/02024.jpg" class="calibre1690"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE A.2</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>In the three-phase generator, three separate voltages are generated by using three different coils spaced 120° apart. As the magnet rotates, a voltage is induced across each of the generator’s coils. All the coil voltages are equal in magnitude but are 120° out of phase with each other. With this generator, you could power three separate loads of equal resistance, or you could drive a three-phase motor with a similar coil configuration; however, this requires using six separate wires. To reduce the number of wires, there are two tricks that can be used. The first trick involves rearranging the three-phase coil connections into what is called a <span class="italic">delta connection</span>—which yields three wires. The second trick involves rearranging the coil connection into what is called a <span class="italic">Y connection</span>—which yields four wires. Here are the details.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02025.jpg" class="calibre1691"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>A Y configuration is made by connecting one end of each of the generator’s coils together to form what is called the <span class="italic">neutral</span> lead. The remaining three coil ends are brought out separately and are considered the “hot” leads. The voltage between the neutral and any one of the hot lines is called the <span class="italic">phase voltage V<small class="calibre28"><span class="calibre17"><sub class="calibre37">p</sub></span></small></span>. The total voltage, or <span class="italic">line voltage V<small class="calibre28"><span class="calibre17"><sub class="calibre37">L</sub></span></small></span>, is the voltage across any two hot leads. The line voltage is the vector sum of the individual phase voltages. In a Y-loaded circuit, each load has two phases in series. This means that the current and voltage through and across a load must be determined by superimposing the phase currents and phase voltages. One way to do this is to make a phasor diagram, as shown in the figure. For practical purposes, what is important to note is the line voltage is about <img alt="image" src="images/02026.jpg" class="calibre1692"/> times the phase voltage. Also, the line currents are 30° out of phase with the line voltages. When a neutral is used, the line currents and line voltages are equal to the individual phases from the generator. No current flows in the neutral when the loads are equal across each phase (balanced load).</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE A.3</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/02027.jpg" class="calibre1656"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>A delta connection is made by placing the three-phase generator’s coils end to end, as shown in the figure. Because the delta configuration has no neutral lead, the phase voltages are equal to the line voltages. Again, like the Y configuration, all line voltages are 120° out of phase with each other. However, unlike the Y configuration, the line currents (<span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small>) are equal to the vector sum of the phase currents (<span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">A</sub></span></small></span>, <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">B</sub></span></small></span>, <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span>). When each of the phases are equally loaded, the line currents are all equal but 120° apart. The line currents are 30° out of phase with the line voltages, and they are <img alt="image" src="images/02026.jpg" class="calibre1692"/> times the phase currents.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE A.4</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3343178" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">A.3   Home Wiring</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>In the United States, three wires run from the pole transformer (or “green box” transformer) to the main service panel at one’s home. One wire is the A-phase wire (black in color), another is the B-phase wire (black in color), and the third is the neutral wire (white in color). (<a href="#filepos3344302">Figure A.5</a> shows where these three wires originate within the pole/ green box transformer.) The voltage between the A-phase and B-phase wires, or the “hot to hot” voltage, is 240 V, while the voltage between the neutral wire and either A-phase or B-phase wire, or the “neutral to hot” voltage, is 120 V. (These voltages are nominal and may vary from region to region.)</span></div>
<div id="filepos3344302" class="calibre3"><span><img alt="image" src="images/02028.jpg" class="calibre1693"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE A.5</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>At the home, the three wires from the pole/green box transformer are connected through a wattmeter and then enter a main service panel that is grounded to a long copper rod driven into the ground or to the steel in a home’s foundation. The A-phase and B-phase wires that enter the main panel are connected through a main disconnect breaker, while the neutral wire is connected to a terminal referred to as the <span class="italic">neutral bar</span> or <span class="italic">neutral bus</span>. A <span class="italic">ground bar</span> also may be present within the main service panel. The ground bar is connected to the grounding rod or to the foundation’s steel supports.</span></div>
<div class="calibre26"><span><a></a>Within main service panels, the neutral bar and the ground bar are connected together (they act as one). However, within subpanels (service panels that get their power from the main service panel but which are located some distance from the main service panel), the neutral and ground bars are not joined together. Instead, the subpanel’s ground bar receives a ground wire from the main service panel. Often the metal conduit that is used to transport the wires from the main service panel to the subpanel is used as the “ground wire.” However, for certain critical applications (e.g., computer and life-support systems), the ground wire probably will be included within the conduit. Also, if a subpanel is not located in the same building as the main panel, a new ground rod typically is used to ground the subpanel. Note that different regions within the United States may use different wiring protocols. Therefore, do not assume that what I am telling you is standard practice where you live. Contact your local electrical inspector.</span></div>
<div class="calibre26"><span>Within the main service panel, there are typically two bus bars into which circuit breaker modules are inserted. One of these bus bars is connected to the A-phase wire; the other bus bar is connected to the B-phase wire. To power a group of 120-V loads (e.g., upstairs lights and 120-V outlets), you throw the main breaker to the off position and then insert a single-pole breaker into one of the bus bars. (You can choose either the A-phase bus bar or the B-phase bus bar. The choice of which bus bar you use only becomes important when it comes to balancing the overall load—more on that in a second.) Next, you take a 120-V three-wire cable and connect the cable’s black (hot) wire to the breaker, connect the cable’s white (neutral) wire to the neutral bar, and connect the cable’s ground wire (green or bare) to the ground bar. You then run the cable to where the 120-V loads are located, connect the hot and neutral wires across the load, and fasten the ground wire to the case of the load (typically a ground screw is supplied on an outlet mounting or light figure for this purpose). To power other 120-V loads that use their own breakers, you basically do the same thing you did in the last setup. However, to maximize the capacity of the main panel (or subpanel) to supply as much current as possible without overloading the main circuit breaker in the process, it is important to balance the number of loads connected to the A-phase breakers with the number of loads connected to the B-phase breakers. This is referred to as <span class="italic">balancing the load</span>.</span></div>
<div class="calibre26"><span>Now, if you want to supply power to 240-V appliances (e.g., ovens, washers, etc.), you insert a double-pole breaker between the A-phase and B-phase bus bars in the main panel (or subpanel). Next, you take a 240-V three-wire cable and attach one of its hot wires to the A-phase terminal of the breaker and attach its other hot wire to the B-phase terminal of the breaker. The ground wire (green or bare) is connected to the ground bar. You then run the cable to where the 240-V loads are located and attach the wires to the corresponding terminals of the load (typically within a 240-V outlet). Also, 120-V/240-V appliances are wired in a similar manner, except you use a fourwire cable that contains an additional neutral (white) wire that is joined at the neutral bar within the main panel (or subpanel). (As a practical note, you could use a fourwire 120-V/240-V cable instead of a 240-V three-wire cable for 240-V applications—you would just leave the neutral wire alone in this case.)</span></div>
<div class="calibre26"><span>As a note of caution, do not attempt home wiring unless you are sure of your abilities. If you feel that you are capable, just make sure to flip the main breaker off before you start work within the main service panel. When working on light fixtures, switches, and outlets that are connected to an individual breaker, tag that breaker with tape so that you do not mistakenly flip the wrong breaker when you go back to test your connections.</span></div>
<div id="filepos3349738" class="calibre3"><span class="calibre7"><span><span class="bold">A.4   Electricity in Other Countries</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><a></a>In the United States, homes receive a 60-Hz, 120-V single-phase voltage, whereas industry typically receives a 60-Hz, 208-V/120-V three-phase voltage. Most other countries, on the other hand, work with a 50-Hz, 230-V single-phase voltage and a 415-V three-phase voltage. Now, if you were to take a U.S.-built 120-V, 60-Hz device over to Norway—where 230 V is used—and plug that device directly into the outlet (you would need an adapter to do this—their outlets look different), you run a risk of damaging the device. Some devices may not “care” about the voltage and frequency differences, but others will. You could use a converter (transformer plug-in device) to step down the voltage from the outlet, but you would still be stuck with 50 Hz. The 10-Hz difference will not affect most devices, but other devices, such as TVs and VCRs, may not function properly.</span></div>
<div class="calibre26"><span>Here’s a listing of single-phase voltages found in some countries. Note the plug types.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02029.jpg" class="calibre1694"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE A.6</span></span></span></div><div class="calibre35"> </div>  <div class="mbppagebreak"></div><div id="filepos3351531" class="calibre8"><span><a></a><span class="bold">APPENDIX B</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Error Analysis</span></span></span></span></div><div class="calibre21"> </div>
<div class="calibre11"><span>Reliability estimates of measurements greatly enhance their value. For example, saying the resistance of a resistor is 1000 Ω ± 50 Ω tells you much more than simply stating the resistance is 1000 Ω.</span></div>
<div class="calibre26"><span>The term <span class="italic">error</span> is basically interchangeable with <span class="italic">uncertainty</span>, but does not have the same meaning as <span class="italic">mistake</span>. Mistakes, such as errors in calculations, should be corrected before estimating the experimental error. In estimating the reliability of a single quantity (such as resistance), you should recognize three different kinds of sources of error:</span></div>
<div class="calibre187"><span>•  Actual variations of the quantity being measured, for example, resistance changes due to temperature variations. In electronics, for accurate measurements, you should consider the temperature ratings and the corresponding errors specified in the data sheets.</span></div>
<div class="calibre27"><span>•  Test equipment in error. The errors introduced by test equipment. Make sure that all equipment is calibrated, and be certain to take into account input impedance characteristics, such as the input impedance of a multimeter and oscilloscope.</span></div>
<div class="calibre27"><span>•  Human error. With digital equipment displays this is less of a problem. A scope with a graphical display will not give you high accuracy (only around 5 percent).</span></div>
<div id="filepos3353563" class="calibre3"><span class="calibre7"><span><span class="bold">B.1 Absolute Error, Relative Error, and Percent Error</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre2"/></span></div>
<div class="calibre11"><span><a></a>If Δ<span class="italic">x</span> is the <span class="italic">absolute error</span> (or <span class="italic">uncertainty</span> with a ± in front) in a measurement whose value is <span class="italic">x</span>, then Δ<span class="italic">x/x</span> is called the <span class="italic">relative error</span> (or <span class="italic">fractional uncertainty</span>). If we multiply the relative error by 100 percent, we get the <span class="italic">percent error</span>, or 100% ⋅ (Δ<span class="italic">x</span>/<span class="italic">x</span>). The term <span class="italic">tolerance</span> is interchangeable with both absolute error and percent error. For example, tolerances in length measurements are typically given in terms of absolute error values, while tolerances in resistances are typically given in percent error.</span></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Example 1:</span></span> What’s the relative error and percent error of 0.125A ± 0.01A?</span></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Answer:</span></span></span></div>
<div class="calibre6"><blockquote class="calibre22"><span>Relative error = <img alt="image" src="images/02030.jpg" class="calibre2"/> = 0.08</span></blockquote></div>
<div class="calibre6"><blockquote class="calibre22"><span>Percent error = 100%<img alt="image" src="images/02031.jpg" class="calibre2"/> = 100% × Relative error = 100 × 0.08 = 8%</span></blockquote></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Example 2:</span></span> What are the relative error and the absolute error or uncertainty of a 3300-Ω resistor with a tolerance of 5 percent? What’s the guaranteed range of resistance?</span></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Answer:</span></span> Here, tolerance represents percent error, so</span></div>
<div class="calibre19"><span>Relative error = <img alt="image" src="images/02032.jpg" class="calibre2"/> = 0.05</span></div>
<div class="calibre6"><span>The absolute error or uncertainty is:</span></div>
<div class="calibre19"><span>Δ<span class="italic">x</span> = <span class="italic">x</span> (relative error) = (3300 Ω)(0.05) = ±165 Ω</span></div>
<div class="calibre6"><span>The resistor is guaranteed for 3300 Ω ± 165 Ω or guaranteed to be between 3135 Ω and 3465 Ω.</span></div>
<div id="filepos3356423" class="calibre3"><span class="calibre7"><span><span class="bold">B.2   Uncertainty Estimates</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre2"/></span></div>
<div class="calibre11"><span>When dealing with equations with many independent variables, like the following RC charge response equation</span></div>
<div class="calibre19"><span><img alt="image" src="images/02033.jpg" class="calibre2"/></span></div>
<div class="calibre6"><span>the uncertainty or error in the final result (e.g., current) will depend on the individual uncertainties (e.g., uncertainties in resistance, capacitance, voltage, and time). The propagation of errors can be explained by first analyzing simple arithmetic cases:</span></div>
<div class="calibre187"><span>1. If the desired result is the <span class="italic">sum</span> or <span class="italic">difference</span> of two measurements, the absolute uncertainties add:</span></div>
<div class="calibre187"><span>   Let Δ<span class="italic">x</span> and Δ<span class="italic">y</span> be the errors in <span class="italic">x</span> and <span class="italic">y</span>, respectively. For the <span class="italic">sum</span>, we have:</span></div>
<div class="calibre19"><span>z = <span class="italic">x</span> + Δ<span class="italic">x</span> + <span class="italic">y</span> + Δ<span class="italic">y</span></span></div>
<div class="calibre187"><span>    and a relative error of</span></div>
<div class="calibre19"><span>(Δ<span class="italic">x</span> +Δ<span class="italic">y</span>)/(<span class="italic">x</span> + <span class="italic">y</span>)</span></div>
<div class="calibre187"><span>    <a></a>Since the signs of Δ<span class="italic">x</span> and Δ<span class="italic">y</span> can be opposite, adding the absolute values gives a pessimistic estimate of the uncertainty. If errors have a Gaussian distribution and are independent, they combine in quadrature (square root of the sum of the squares):</span></div>
<div class="calibre19"><span><img alt="image" src="images/02034.jpg" class="calibre2"/></span></div>
<div class="calibre187"><span>    For the <span class="italic">difference</span> of two measurements, we obtain a relative error of:</span></div>
<div class="calibre19"><span>(Δ<span class="italic">x</span> + Δ<span class="italic">y</span>)/(<span class="italic">x</span> − <span class="italic">y</span>)</span></div>
<div class="calibre187"><span>    which becomes very large if <span class="italic">x</span> is nearly equal to <span class="italic">y</span>. This is an important point to note; you must avoid designing experiments where two large quantities are measured and their difference obtained.</span></div>
<div class="calibre187"><span>2. If the desired result involves <span class="italic">multiplying</span> or <span class="italic">dividing</span> measured quantities, then the relative uncertainty of the result is the sum of the relative errors in each of the measured quantities. The most pessimistic case corresponds to adding the absolute value of each term, since the Δ<span class="italic">x<small class="calibre28"><span class="calibre17"><sub class="calibre37">i</sub></span></small></span> and Δ<span class="italic">x<small class="calibre28"><span class="calibre17"><sub class="calibre37">i</sub></span></small></span> can be of either sign:</span></div>
<div class="calibre19"><span><img alt="image" src="images/02035.jpg" class="calibre2"/></span></div>
<div class="calibre187"><span>    Again, if the measurement errors are independent and have a Gaussian distribution, the relative errors will add in quadrature:</span></div>
<div class="calibre19"><span><img alt="image" src="images/02036.jpg" class="calibre1695"/></span></div>
<div class="calibre187"><span>3. If the desired result is a <span class="italic">power</span> of the measured quantity, the relative error in the result is the relative error in the measured quantity multiplied by the power. For example, the uncertainty in</span></div>
<div class="calibre19"><span><span class="bold"><span class="italic">z</span> = <span class="italic">x<small class="calibre28"><span class="calibre17"><sup class="calibre29">n</sup></span></small></span></span></span></div>
<div class="calibre187"><span>    is:</span></div>
<div class="calibre19"><span><img alt="image" src="images/02037.jpg" class="calibre1696"/></span></div>
<div class="calibre187"><span>4. For anything more complex, the following equation gives the general method for finding uncertainty in measurements. For example, if <span class="italic">R</span> = <span class="italic">f</span>(<span class="italic">x</span>, <span class="italic">y</span>, <span class="italic">z</span>) is the functional relationship between three measurements <span class="italic">x</span>, <span class="italic">y</span>, <span class="italic">z</span>, then</span></div>
<div class="calibre19"><span><img alt="image" src="images/02038.jpg" class="calibre1697"/></span></div>
<div class="calibre187"><span>    gives the uncertainty in <span class="italic">R</span> when the uncertainties <span class="italic">dx, dy</span>, and <span class="italic">dz</span> are known.</span></div>
<div class="calibre30"><span>Usually, you don’t have to go to this extreme—you can usually get by with the rules for adding, subtracting, multiplying, dividing, and rising to the power. To make life easy on you, a cheat sheet is provided here.</span></div>
<div class="calibre16"> </div>
<div class="calibre53">
<div class="calibre16"><span><img alt="image" src="images/00023.jpg" class="calibre54"/></span></div>
<div class="calibre1"><span><a></a><span class="bold">FORMULAS TO CALCULATE UNCORRELATED ERRORS</span></span></div>
<div class="calibre6"><span>If <span class="italic">A</span> = <span class="italic"><img alt="image" src="images/02039.jpg" class="calibre1698"/></span> ± <span class="italic">a</span>, <span class="italic">B</span> = <img alt="image" src="images/02040.jpg" class="calibre1507"/> ± <span class="italic">b</span>, and <span class="italic">C</span> = <img alt="image" src="images/02041.jpg" class="calibre1699"/> ± <span class="italic">c</span>, where <span class="italic"><img alt="image" src="images/02039.jpg" class="calibre1698"/></span>, <img alt="image" src="images/02040.jpg" class="calibre1507"/>, <img alt="image" src="images/02041.jpg" class="calibre1699"/> are the measured values of the quantities <span class="italic">A, B, C</span>, and <span class="italic">a, b, c</span> are the respective errors, then the calculated values with error (assuming independent variables and Gaussian distribution) give:</span></div>
<div class="calibre6"><span><img alt="image" src="images/02042.jpg" class="calibre1700"/></span></div>
<div class="calibre16"><span><img alt="image" src="images/00023.jpg" class="calibre54"/></span></div>
</div>
<div class="calibre6"><span><span class="bold"><span class="italic">Example 1:</span></span> The voltages across two series resistors are measured using two different voltmeters. One digital meter reads 6.24 V ± 0.01 V across the first resistor; a less precise analog meter measures 14.3 V ± 0.2 V. What is the total voltage across the pair, including uncertainty in the result?</span></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Answer:</span></span> We simply add voltages and use Eq. 1 to determine the resultant uncertainty:</span></div>
<div class="calibre19"><span><span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> + <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = 6.24 V ± 14.3 V ± <img alt="image" src="images/02043.jpg" class="calibre1701"/> = 20.5 V ± 0.2 V</span></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Example 2:</span></span> The current through a 180-Ω, 5 percent resistor is 1.256 A ± 0.005 A. Determine the voltage across the resistor with uncertainty included.</span></div>
<div class="calibre6"><span><span class="bold"><span class="italic">Answer:</span></span> First convert the tolerance to absolute error (or uncertainty):</span></div>
<div class="calibre19"><span><img alt="image" src="images/02044.jpg" class="calibre1702"/></span></div>
<div class="calibre6"><span>Since the equation for voltage is Ohm’s law, <span class="italic">V</span> = <span class="italic">I</span> × <span class="italic">R</span>, we use Eq. 4:</span></div>
<div class="calibre19"><span><span class="italic">V</span> = <span class="italic">I</span> × <span class="italic">R</span> = 1.256 A × 180 Ω ± (1.256 A × 180 Ω) <img alt="image" src="images/02045.jpg" class="calibre1703"/> = 226 ± 11 V</span></div>  <div class="mbppagebreak"></div><div id="filepos3365728" class="calibre8"><span><a></a><span class="bold">APPENDIX C</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Useful Facts and Formulas</span></span></span></span></div><div class="calibre21"> </div>
<div id="filepos3365991" class="calibre3"><span class="calibre7"><span><span class="bold">C.1   Greek Alphabet</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<table class="calibre99">
<colgroup class="calibre791">
<col class="calibre1704"/>
<col class="calibre1705"/>
<col class="calibre1706"/>
</colgroup>
<tr class="calibre100">
<td class="calibre101">Alpha</td>
<td class="calibre101">A</td>
<td class="calibre101">α</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Beta</td>
<td class="calibre101">B</td>
<td class="calibre101">β</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Gamma</td>
<td class="calibre101"><img alt="image" src="images/02046.jpg" class="calibre1281"/></td>
<td class="calibre101">γ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Delta</td>
<td class="calibre101">Δ</td>
<td class="calibre101">δ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Epsilon</td>
<td class="calibre101">E</td>
<td class="calibre101">ε</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Zeta</td>
<td class="calibre101">Z</td>
<td class="calibre101">ζ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Eta</td>
<td class="calibre101">E</td>
<td class="calibre101">η</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Theta</td>
<td class="calibre101">Θ</td>
<td class="calibre101">θ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Iota</td>
<td class="calibre101">I</td>
<td class="calibre101">ι</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Kappa</td>
<td class="calibre101">K</td>
<td class="calibre101">κ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Lambda</td>
<td class="calibre101">Λ</td>
<td class="calibre101">Λ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Mu</td>
<td class="calibre101">M</td>
<td class="calibre101">μ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Nu</td>
<td class="calibre101">N</td>
<td class="calibre101">ν</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Xi</td>
<td class="calibre101">Ξ</td>
<td class="calibre101">ξ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Omicron</td>
<td class="calibre101">Π</td>
<td class="calibre101">ο</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Pi</td>
<td class="calibre101">Π</td>
<td class="calibre101">π</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Rho</td>
<td class="calibre101">Ρ</td>
<td class="calibre101">Ρ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Sigma</td>
<td class="calibre101">Σ</td>
<td class="calibre101">σ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Tau</td>
<td class="calibre101">Τ</td>
<td class="calibre101">τ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Upsilon</td>
<td class="calibre101">Υ</td>
<td class="calibre101">υ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Phi</td>
<td class="calibre101">Φ</td>
<td class="calibre101">φ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Chi</td>
<td class="calibre101">Χ</td>
<td class="calibre101">χ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Psi</td>
<td class="calibre101">Χ</td>
<td class="calibre101">ψ</td>
</tr>
<tr class="calibre100">
<td class="calibre101">Omega</td>
<td class="calibre101">Ω</td>
<td class="calibre101">ω</td>
</tr>
</table>
<div id="filepos3367862" class="calibre3"><span class="calibre7"><span><span class="bold">C.2   Powers of 10 Unit Prefixes</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<table class="calibre99">
<colgroup class="calibre791">
<col class="calibre1707"/>
<col class="calibre1707"/>
<col class="calibre793"/>
</colgroup>
<tr class="calibre100">
<td valign="bottom" class="calibre101"><span class="bold">PREFIX</span></td>
<td valign="bottom" class="calibre101"><span class="bold">SYMBOL</span></td>
<td class="calibre101"><span class="bold">MULTIPLYING<br class="calibre16"/>FACTOR</span></td>
</tr>
<tr class="calibre100">
<td class="calibre101">tera</td>
<td class="calibre101">T</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">12</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">giga</td>
<td class="calibre101">G</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">9</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">mega</td>
<td class="calibre101">M</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">kilo</td>
<td class="calibre101">K</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">3</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">centi</td>
<td class="calibre101">c</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">-2</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">milli</td>
<td class="calibre101">m</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">-3</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">micro</td>
<td class="calibre101">μ</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">-6</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">nano</td>
<td class="calibre101">n</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">-9</sup></span></small></td>
</tr>
<tr class="calibre100">
<td class="calibre101">pico</td>
<td class="calibre101">p</td>
<td class="calibre101">× 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">-12</sup></span></small></td>
</tr>
</table>
<div id="filepos3369398" class="calibre3"><span class="calibre7"><span><span class="bold">C.3   Linear Functions (<span class="italic">y</span> = <span class="italic">mx</span> + <span class="italic">b</span>)</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><img alt="image" src="images/02047.jpg" class="calibre1708"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The equation <span class="italic">y</span> = <span class="italic">mx</span> + <span class="italic">b</span> represents the equation of a line. The slope of the line (Δ<span class="italic">y</span>/Δ<span class="italic">x</span>) is equal to <span class="italic">m</span>, while the vertical shift, or point where the line crosses the y axis, is equal to <span class="italic">b</span>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE C.1</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3370388" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">C.4   Quadratic Equation (<span class="italic">y</span> = <span class="italic">ax</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small> + <span class="italic">bx</span> + <span class="italic">c</span>)</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><img alt="image" src="images/02048.jpg" class="calibre1709"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The equation <span class="italic">y</span> = <span class="italic">ax</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small> + <span class="italic">bx</span> + <span class="italic">c</span> traces out a parabola in the <span class="italic">xy</span> plane. The narrowness of the parabola is influenced by <span class="italic">a</span>, the horizontal shift is given by –<span class="italic">b</span>/2<span class="italic">a</span>, and the vertical shift is given by –<span class="italic">b</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>/<span class="italic">a</span> + <span class="italic">c</span>. To determine the roots of the equation (points where the parabola crosses the <span class="italic">x</span> axis), use</span></span></span></div><div class="calibre10"> </div>
<div class="calibre1"><span><img alt="image" src="images/02049.jpg" class="calibre1710"/></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE C.2</span></span></span></span></div><div class="calibre35"> </div>
<div id="filepos3371843" class="calibre3"><span class="calibre7"><span><span class="bold">C.5   Exponents and Logarithms</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><img alt="image" src="images/02050.jpg" class="calibre269"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE C.3</span></span></span></span></div><div class="calibre35"> </div>
<div id="filepos3372443" class="calibre3"><span class="calibre7"><span><span class="bold">C.6   Trigonometry</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><img alt="image" src="images/02051.jpg" class="calibre1711"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The angle θ subtended by an arc <span class="italic">S</span> of a circle of radius <span class="italic">R</span> is equal to the ratio θ = <span class="italic">S/R</span>, where θ is in radians. 1 radian = 180°/π = 57.296°, while 1° = π/180° = 0.17453 radians. If <span class="italic">R</span> is rotated counterclockwise from the positive <span class="italic">x</span> axis, θ is positive in sign. If <span class="italic">R</span> is rotated clockwise from the positive <span class="italic">x</span> axis, θ is negative in sign. The trigonometric functions of the angle θ are defined as specific ratios between the sides of the triangles shown in the figure and are expressed as</span></span></span></div><div class="calibre10"> </div>
<div class="calibre1"><span><img alt="image" src="images/02052.jpg" class="calibre1712"/></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span><span class="bold">FIGURE C.4</span></span></span></span></div><div class="calibre35"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="image" src="images/02053.jpg" class="calibre1713"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>The graph of <span class="italic">y</span> = <span class="italic">A</span> sin θ is shown to the far left. To alter the vertical, horizontal, period, and phase of this function, alter the equation to the form <span class="italic">y</span> = <span class="italic">A</span> sin (<span class="italic">Bx</span> + <span class="italic">C</span>) + <span class="italic">D</span>. <span class="italic">A</span> is amplitude, 2π/<span class="italic">B</span> is the period (<span class="italic">T</span>), <span class="italic">C</span> is the phase shift, and <span class="italic">D</span> is the vertical shift. In electronics, a voltage can be expressed as</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="image" src="images/02054.jpg" class="calibre1714"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small> is the peak voltage, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">dc</sub></span></small> is the dc offset, Φ is the phase shift, and ω is the angular frequency (rad/s), which is related to the conventional frequency (cycles/s) by</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="image" src="images/02055.jpg" class="calibre1715"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The graph of <span class="italic">y</span> = <span class="italic">A</span> cos <span class="italic">x</span> is shifted in phase by π/2 radians (or 90°) with respect to the graph <span class="italic">y</span> = <span class="italic">A</span> sin <span class="italic">x</span>. The following relations show how the sine and cosine functions are related:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre3"><span><img alt="image" src="images/02056.jpg" class="calibre1716"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE C.5</span></span></span></div><div class="calibre35"> </div>
<div id="filepos3376037" class="calibre3"><span class="calibre7"><span><span class="bold">C.7   Complex Numbers</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Complex numbers are covered in detail in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_000.html#filepos211756">Chap. 2</a>.</span></div>
<div id="filepos3376510" class="calibre3"><span class="calibre7"><span><span class="bold">C.8   Differential Calculus</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Say you have a function <span class="italic">f</span>(<span class="italic">x</span>). This function may represent a line, parabola, exponential curve, trigonometric curve, etc. Now pretend that you take a point and move it along the curve of <span class="italic">f</span>(<span class="italic">x</span>). At the same time, you envision a tangent line touching the curve at the point. As the point moves along the curve, the slope of the tangent line changes (“teeter-totters”)—provided the curve is not a line. Now, the slope of the tangent line has great significance in real-life situations. For example, if you graph a curve of the position of an object versus time, the slope at a particular time along the curve represents the instantaneous velocity of the object. Likewise, if you have an electrical charge versus time graph, the slope at time <span class="italic">t</span> represents the instantaneous current-flow. Now, the trick to finding the slope of a tangent line for any point along a curve involves using differential calculus. What differential calculus does is this: If you have a function, say, <span class="italic">y</span> = <span class="italic">x</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>—through the tricks of differential calculus—you can find another function, which is called the <span class="italic">derivative of y</span> (usually expressed as <span class="italic">y′</span> or <span class="italic">dy/dx</span>), that tells you the slope at every point along the curve of <span class="italic">y</span>. For <span class="italic">y</span> = <span class="italic">x</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>, the derivative is <span class="italic">dy/dx</span> = 2<span class="italic">x</span>. If you are interested in the slope of <span class="italic">y</span> at <span class="italic">x</span> = 2, you plug 2 into <span class="italic">dy/dx</span> to give you a slope of 4. But how do you find the derivative of <span class="italic">y</span> = <span class="italic">x</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>? Better yet, how do you find the derivative of any given function? The following provides the basic theory.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02057.jpg" class="calibre1717"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>To find the derivative of a function <span class="italic">y</span> = <span class="italic">f</span>(<span class="italic">x</span>), you let <span class="italic">P</span>(<span class="italic">x,y</span>) be a point of the graph of <span class="italic">y</span> = <span class="italic">f</span>(<span class="italic">x</span>) and let <span class="italic">Q</span>(<span class="italic">x</span> + Δ<span class="italic">x, y</span> + Δ<span class="italic">y</span>) be another point of the graph. The slope of the line between <span class="italic">P</span> and <span class="italic">Q</span> is then simply</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="image" src="images/02058.jpg" class="calibre1718"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Now you substitute the function into the preceding equation. For example, if <span class="italic">f</span>(<span class="italic">x</span>) = <span class="italic">x</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>, then <span class="italic">f</span>(<span class="italic">x</span> + Δ<span class="italic">x</span>) = (<span class="italic">x</span> + Δ<span class="italic">x</span>)<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>, and the whole expression equals [(<span class="italic">x</span> + Δ<span class="italic">x</span>)<small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small> – <span class="italic">x</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>]/Δ<span class="italic">x</span>. Next, you hold <span class="italic">x</span> fixed and let Δ<span class="italic">x</span> approach zero. If the slope approaches a value that depends only on <span class="italic">x</span>, you call this the slope of the curve at point <span class="italic">P</span>. The slope of the curve at <span class="italic">P</span> is itself a function of <span class="italic">x</span>, defined at every value of <span class="italic">x</span> at which the limit exists. You denote the slope by <span class="italic">f′</span>(<span class="italic">x</span>) (“<span class="italic">f</span> prime”), or <span class="italic">dy/dx</span> (“<span class="italic">dydx</span>”), or <span class="italic">df/dx</span> (“<span class="italic">dfdx</span>”), and call any one of these terms (your choice) the derivative of <span class="italic">f</span>(<span class="italic">x</span>):</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="image" src="images/02059.jpg" class="calibre1719"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>For the function <span class="italic">f</span>(<span class="italic">x</span>) = <span class="italic">x</span><small class="calibre28"><span class="calibre17"><sup class="calibre29">2</sup></span></small>, after carrying out the limit, you would get <span class="italic">f</span>′(<span class="italic">x</span>) = <span class="italic">dy/dx</span> = 2<span class="italic">x</span> as the derivative.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE C.6</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Now, in practice, if you need to find the derivative of a function, you do not bother using the preceding equation. To do so would be very time-consuming and might require a number of nasty mathematical tricks, especially if you are trying to find the derivative of a complex function such as 2<span class="italic">e<small class="calibre28"><span class="calibre17"><sup class="calibre29">x</sup></span></small></span> sin (3<span class="italic">x</span> + 2). Instead, what you do is memorize a few simple rules and memorize a few simple derivatives. The table below shows some of the rules and simple derivatives that will come in handy for many applications. In the table, <span class="italic">a</span> and <span class="italic">n</span> are constants, while <span class="italic">u</span> and <span class="italic">v</span> are functions.</span></div>
<div class="calibre3"><span><img alt="image" src="images/02060.jpg" class="calibre863"/></span></div>
<div id="filepos3382224" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">C.9   Integral Calculus</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>In differential calculus, our goal was to find the derivative of a function. In integral calculus, our goal is to find the <span class="italic">functions of a derivative</span>. In reality, calling one thing a derivative and another thing a function is somewhat confusing because a derivative is usually a function in itself. To avoid possible complications, we simply call anything that’s written as <span class="italic">y</span> = <span class="italic">f</span>(<span class="italic">x</span>) a function, call anything that’s written as <span class="italic">dy/dx</span> = <span class="italic">df</span>(<span class="italic">x</span>)/<span class="italic">dx</span> a derivative, and call anything that’s written as ∫ <span class="italic">dy</span> = ∫ <span class="italic">f</span>(<span class="italic">x</span>)<span class="italic">dx</span> an antiderivative or integral. In the last case, the “∫” is called the integral sign, the function <span class="italic">f</span>(<span class="italic">x</span>) is called the integrand, and <span class="italic">dx</span> is called the variable of integration. To integrate a function is to find all the functions that have it as a derivative—to find all of the given function’s antiderivatives. But, the term <span class="italic">integration</span> has a second, less technical meaning—to give the sum total of. In this meaning, integration represents a mathematical process that enables us to calculate the area of a region that has curved boundaries (see graph in <a href="#filepos3383918">Fig. C.7</a>).</span></div>
<div id="filepos3383918" class="calibre3"><span><img alt="image" src="images/02061.jpg" class="calibre1720"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>If we’re given an equation <span class="italic">dy/dx</span> = <span class="italic">f</span>(<span class="italic">x</span>) and wish to find <span class="italic">y</span>, we must integrate (antidifferentiate). In this case, we first rearrange the equation into the form <span class="italic">dy</span> = <span class="italic">f</span>(<span class="italic">x</span>)<span class="italic">dx</span>. Next, we integrate both sides:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre19"><span><img alt="image" src="images/02062.jpg" class="calibre1721"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Again, ∫ is an integral sign, the function <span class="italic">f</span>(<span class="italic">x</span>) is the integrand, and <span class="italic">C</span> is the constant of integration. We guessed that ∫ <span class="italic">dy</span> = <span class="italic">y</span> ± <span class="italic">C</span>, since if we were to take the derivative of any function of the form <span class="italic">y</span> ± <span class="italic">C</span> (<span class="italic">y</span> + 2, <span class="italic">y</span> – 54, etc.) we’d get <span class="italic">y</span> as the answer—we worked backward. Since <span class="italic">C</span> could be positive or negative, it’s arbitrary to give it a sign. This way, we simply add <span class="italic">C</span> to the left. In this form, we call the integral an indefinite integral.<br class="calibre16"/>    <span class="italic">Example:</span> Given <span class="italic">dy/dx</span> = 2, find <span class="italic">y</span>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre19"><span><img alt="image" src="images/02063.jpg" class="calibre1722"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>In real-life situations, it’s typically undesirable to have a constant in our answers, since we’re looking for a definite result. To get rid of the constant, <small class="calibre28"><span class="calibre17"><sup class="calibre29">we</sup></span></small>
<small class="calibre28"><span class="calibre17"><sup class="calibre29">a</sup></span></small>pply boundary conditions. For example, if we take our last example <span class="italic">dy/dx</span> = 2, we say we’re only interested in values of <span class="italic">dy/dx</span> from, say, 1 to 5—whatever range is appropriate for the situation. In that case, we take the definite integral</span></span></span></div><div class="calibre10"> </div>
<div class="calibre19"><span><img alt="image" src="images/02064.jpg" class="calibre1723"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Without getting too technical, F represents the definite integral without the constant sign, while the (<span class="italic">a</span>) and (<span class="italic">b</span>) terms mean to place the boundaries points into the <span class="italic">x</span> term of <span class="italic">F</span>. If we consider our example <span class="italic">dy/dx</span> = 2 with boundary condition 1 to 5, we’d get:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre19"><span><img alt="image" src="images/02065.jpg" class="calibre1724"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>We call this a definite integral. At this point, it’s worth introducing a graphical approach to visualizing integration. If we consider <span class="italic">dy/dx</span> = 2, and graph <span class="italic">dy/dx</span> versus <span class="italic">x</span>, we get a straight horizontal line at <span class="italic">dy/dx</span> = 2 for all values of <span class="italic">x</span>. By summing up the area under the curve, we get the integral. So incorporating the boundary conditions the area is (5 – 1) × 2 = 8.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>Now, if we attempt to integrate more complex functions, we’ll have a hard time guessing what the functions of the derivative are. Instead, we must apply some special tricks along the way. These tricks stem from a basic idea called the <span class="italic">fundamental theorem of calculus</span>, and they get fairly involved. Presenting the theory in such a short space isn’t going to do. However, in practice, you typically never use the fundamental theorem of calculus to find integrals of functions. Instead, you memorize a few fundamental integrals and learn a few tricks. The following list highlights some of the most common integrals and solutions. A mathematical handbook will provide a more extensive list. In the list, a <span class="italic">u</span> represents a function of <span class="italic">x</span>, while <span class="italic">v</span> represents another function of <span class="italic">x</span>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE C.7</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><img alt="image" src="images/02066.jpg" class="calibre1725"/></span></div>  <div class="mbppagebreak"></div><div id="filepos3388710" class="calibre19"><span><img alt="image" src="images/00006.jpg" class="calibre2"/></span></div>
<div class="calibre11"><span class="calibre9"><span class="bold"><span><span class="bold">INDEX</span></span></span></span></div><div class="calibre21"> </div>
<div class="calibre1203"><span>1-wire interface</span></div>
<div class="calibre1726">   <span>interfacing with microcontrollers</span></div>
<div class="calibre1726">   <span>voltage level conversion in microcontrollers</span></div>
<div class="calibre1203"><span>1.8 V, in microcontrollers</span></div>
<div class="calibre1203"><span>2’s complement representation</span></div>
<div class="calibre1203"><span>-3-dB frequency</span></div>
<div class="calibre1203"><span>3.3 V, in microcontrollers</span></div>
<div class="calibre1203"><span>4-bit transfer, on LCDs</span></div>
<div class="calibre1203"><span>+5-V power supply</span></div>
<div class="calibre1203"><span>8-bit parallel-to-serial interface, shift registers</span></div>
<div class="calibre1203"><span>8-bit serial-to-parallel converter with simultaneous data transfer, shift registers</span></div>
<div class="calibre1203"><span>10 percent rule, connecting resistors in series and</span></div>
<div class="calibre1203"><span>32-bit microcontrollers</span></div>
<div class="calibre1203"><span>74-BiCMOS logic family</span></div>
<div class="calibre1203"><span>74-low-voltage logic family</span></div>
<div class="calibre1203"><span>74F280 9-bit parity generator/checker</span></div>
<div class="calibre1203"><span>74HC74 switch debouncer</span></div>
<div class="calibre1203"><span>74HC85 comparator</span></div>
<div class="calibre1203"><span>74LS147 decimal-to-BCD encoder</span></div>
<div class="calibre1203"><span>74LS279A switch debouncer</span></div>
<div class="calibre1203"><span>117-volt plug/socket</span></div>
<div class="calibre1203"><span>120-volt power, mains power and</span></div>
<div class="calibre1203"><span>240-volt power, mains power and</span></div>
<div class="calibre1203"><span>315 MHz modules, RF modules</span></div>
<div class="calibre1203"><span>433 MHz modules, RF modules</span></div>
<div class="calibre1203"><span>555 timers</span></div>
<div class="calibre1726">   <span>applications of</span></div>
<div class="calibre1726">   <span>astable operation</span></div>
<div class="calibre1726">   <span>monostable operation</span></div>
<div class="calibre1726">   <span>overview of</span></div>
<div class="calibre1726">   <span>specifications and considerations regarding</span></div>
<div class="calibre1726">   <span>speed control of DC motors</span></div>
<div class="calibre1203"><span>556 timers, 691 558 timers</span></div>
<div class="calibre1203"><span>4017 decade counter/divider IC</span></div>
<div class="calibre1203"><span>7490 4-bit ripple counter, with MOD-2 and MOD-5 sections</span></div>
<div class="calibre1203"><span>7491A 8-bit serial-in/serial-out shift register</span></div>
<div class="calibre1203"><span>7492 divide-by-12 ripple counter, with MOD-2 and MOD-6 section</span></div>
<div class="calibre1203"><span>7493 4-bit ripple counter, with MOD-2 and MOD-8 sections</span></div>
<div class="calibre1203"><span>74148 octal-to-binary encoder</span></div>
<div class="calibre1203"><span>74160/63 presettable 4-Bit (MOD-16) synchronous up/down counters</span></div>
<div class="calibre1203"><span>74164 8-bit serial-in/serial-out shift register</span></div>
<div class="calibre1203"><span>74165 8-bit serial-in/serial-out shift register</span></div>
<div class="calibre1203"><span>74184 BCD-to-binary encoder</span></div>
<div class="calibre1203"><span>74185 binary-to-BCD encoder</span></div>
<div class="calibre1203"><span>74190/91 presettable decade (BCD or MOD-10) synchronous up/down counter</span></div>
<div class="calibre1203"><span>74192 presettable decade (BCD or MOD-10) synchronous up/down counter</span></div>
<div class="calibre1203"><span>74193 presettable 4-bit (MOD-16) synchronous up/down counter</span></div>
<div class="calibre1203"><span>74194 universal shift register</span></div>
<div class="calibre1203"><span>74299 universal shift/storage register with three-state interface shift register</span></div>
<div class="calibre6"><span class="bold"><span>A</span></span></div>
<div class="calibre1203"><span>A (amperes)</span></div>
<div class="calibre1726">   <span>measuring current</span></div>
<div class="calibre1726">   <span>measuring current through a conductor</span></div>
<div class="calibre1203"><span>A-phase wire, of mains power</span></div>
<div class="calibre1203"><span>absolute error</span></div>
<div class="calibre1203"><span>AC-actuated switch, in illustration of relay circuits</span></div>
<div class="calibre1203"><span>AC (alternating current)</span></div>
<div class="calibre1726">   <span>ac/dc resistance ratio as function of frequency</span></div>
<div class="calibre1726">   <span>in capacitors</span></div>
<div class="calibre1726">   <span>circuits. <span class="italic">See</span> circuits, AC</span></div>
<div class="calibre1726">   <span>inductors</span></div>
<div class="calibre1726">   <span>measuring RMS voltage and currents</span></div>
<div class="calibre1726">   <span>motor controller</span></div>
<div class="calibre1726">   <span>power distribution systems and</span></div>
<div class="calibre1726">   <span>relays</span></div>
<div class="calibre1726">   <span>resistors, RMS voltage, and current</span></div>
<div class="calibre1726">   <span>Thevenin’s theorem in AC form</span></div>
<div class="calibre1726">   <span>using oscilloscope as voltmeter</span></div>
<div class="calibre1203"><span>ac-coupling, capacitor functions</span></div>
<div class="calibre1203"><span>AC waveforms</span></div>
<div class="calibre1726">   <span>amplitude of</span></div>
<div class="calibre1726">   <span>frequency and period of</span></div>
<div class="calibre1726">   <span>overview of</span></div>
<div class="calibre1726">   <span>phase of</span></div>
<div class="calibre1203"><span>ACC (automatic current control), laser diode drive circuits</span></div>
<div class="calibre1203"><span>accelerometers</span></div>
<div class="calibre1726">   <span>illustration of</span></div>
<div class="calibre1726">   <span>measuring acceleration</span></div>
<div class="calibre1726">   <span>measuring tilt</span></div>
<div class="calibre1203"><span>accuracy principal, sensors and</span></div>
<div class="calibre1203"><span>active crossover networks</span></div>
<div class="calibre1203"><span>active filters</span></div>
<div class="calibre1726">   <span>bandpass filter design</span></div>
<div class="calibre1726">   <span>high-pass filter design</span></div>
<div class="calibre1726">   <span>low-pass filter design</span></div>
<div class="calibre1726">   <span>notch filter design</span></div>
<div class="calibre1726">   <span>overview of</span></div>
<div class="calibre1726">   <span>RC audio filter</span></div>
<div class="calibre1203"><span>active mode/region, bipolar transistors</span></div>
<div class="calibre1203"><span>active probes, oscilloscopes</span></div>
<div class="calibre1203"><span>active rectifiers, op amp applications</span></div>
<div class="calibre1203"><span>active region, MOSFETs</span></div>
<div class="calibre1203"><span>adapters</span></div>
<div class="calibre1726">   <span>illustration of</span></div>
<div class="calibre1726">   <span>in laboratory</span></div>
<div class="calibre1203"><span>ADC (analog-to-digital conversion)</span></div>
<div class="calibre1726">   <span>comparators used in</span></div>
<div class="calibre1726">   <span>converters</span></div>
<div class="calibre1726">   <span>DSP (digital signal processing) and</span></div>
<div class="calibre1726">   <span>overview of</span></div>
<div class="calibre1726">   <span>parallel-encoded (Flash conversion)</span></div>
<div class="calibre1726">   <span>successive approximation</span></div>
</body></html>
