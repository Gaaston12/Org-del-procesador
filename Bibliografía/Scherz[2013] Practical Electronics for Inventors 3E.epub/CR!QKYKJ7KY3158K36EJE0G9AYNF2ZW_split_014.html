<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Practical Electronics for Inventors, Third Edition</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<div class="calibre11"><span>Here are some other tools that you should have:</span></div>
<div class="calibre187"><span><span class="italic">Screwdriver set</span>: Both Philips and standard.</span></div>
<div class="calibre187"><span><span class="italic">Pliers set</span>: Standard needle-nose, long-nose, and curved-nose.</span></div>
<div class="calibre187"><span><span class="italic">Wrenches and nut driver</span>: In a range of sizes.</span></div>
<div class="calibre187"><span><span class="italic">Sheet metal shears, nibbling tool, and sheet metal bender</span>: For cutting sheet metal (shears) or removing small pieces of metal (nibbling tool). With a bender, you can create your own metal enclosures.</span></div>
<div class="calibre187"><span><span class="italic">IC remover</span>: To get small ICs out of sockets without damaging the pins.</span></div>
<div class="calibre187"><span><span class="italic">Tweezers</span>: For small work, such as positioning surface-mount components.</span></div>
<div class="calibre187"><span><span class="italic">Calipers</span>: Used for determining component lead diameters, component sizes, board thickness, and so on.</span></div>
<div class="calibre187"><span><span class="italic">Magnifying glass</span>: For inspecting boards, wires, and components for cracks, flaws, hairline solder shorts, and cold-soldered joints.</span></div>
<div class="calibre187"><span><span class="italic">X-acto knife</span>: For general-purpose cutting.</span></div>
<div class="calibre187"><span><span class="italic">Clip-on heat sink</span>: Clamps on component leads to absorb or dissipate heat during soldering and desoldering.</span></div>
<div class="calibre187"><span><span class="italic">Dremel tool</span>: With cutting, sanding, milling, and polishing attachments.</span></div>
<div class="calibre187"><span><span class="italic">Power drill</span> (<span class="italic">drill press</span>): For drilling holes in PCBs, enclosures, and so on.</span></div>
<div class="calibre187"><span><span class="italic">Files</span>: For enlarging holes and slots; removing burrs; shaping metal, wood, or plastic; and cleaning metal surfaces before soldering.</span></div>
<div class="calibre187"><span><span class="italic">Wire-wrap tools</span>: Only if you plan to use wire-wrap construction techniques. Get a proper-sized hand-wrapping tool, along with bits for your wire-wrap wires (30 AWG is the most common).</span></div>
<div class="calibre187"><span><span class="italic">Vise and circuit board holder</span>: PanaVise makes some excellent vises and board holders.</span></div>
<div class="calibre187"><span><span class="italic">Hack saw</span>: Used for cutting bolts and sheet and beam metal, as well as PCBs.</span></div>
<div id="filepos2279042" class="calibre48"><span class="bold"><span class="italic"><span><a></a><span class="bold"><span class="italic">7.5.19   Wires, Cables, Hardware, and Chemicals</span></span></span></span></span></div>
<div id="filepos2279231" class="calibre3"><span><img alt="image" src="images/01417.jpg" class="calibre51"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.74   (a) Hookup wire. (b) Magnet wire. (c) Heat-shrinkable tubing. (d) 0.100-in. male headers and 0.156-in. female crimp sockets. (e) Butt connectors, ring, spade, crimp-on quick disconnects, wire nuts. (f) Heat sinks and heat sink compound. (g) Nylon and aluminum standoffs, washers, bolts, rubber feet, and IC socket.</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Wire and Cable</span></span></div>
<div class="calibre11"><span>Get a selection of <span class="italic">solid</span> and <span class="italic">strained hookup wire</span> with different color coatings and gauges (16, 22, and 24 gauges are sufficient for most purposes). Jumper wire used for solderless breadboards can be made using solid 22-AWG hookup wire or ready-made male-to-male jumpers. If you desire flexible jumpers that won’t break as easily as solid-wire jumpers, you can use 22- or 24-AWG stranded hookup wire with 0.156-in. female crimp pins (with optional 0.100-in. male headers soldered in). See <a href="#filepos2280614">Fig. 7.75</a> for construction details.</span></div>
<div id="filepos2280614" class="calibre3"><span><img alt="image" src="images/01418.jpg" class="calibre103"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.75   Making your own stranded-wire, square header jumpers, using hookup wire, female 0.156-in. crimp sockets (solder a 0.100-in. male header pin into the socket for a male jumper), and <img alt="images" src="images/01334.jpg" class="calibre1209"/>- to <img alt="image" src="images/00093.jpg" class="calibre123"/>-in. shrink tubing. A crimping tool is needed to fasten sockets to wire, although you might get away with using needle-nose pliers and a bit of finesse.</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Other types of wire and cable worth keeping in stock include flat ribbon cable (28 AWG), CAT5 network cable, twisted-pair cable (24 AWG), coaxial cable (RG-59, RG-11, and so on), and household electrical wire, such as NM-B (indoor) or UF-B (outdoor). And don’t forget wire-wrap wire if you intend on doing wire-wrap circuit board construction. The #30 wire with a Kynar jacket is perhaps the most popular type, although you might need larger wire for higher current runs.</span></div>
<div class="calibre3"><span><a></a><span class="bold">Magnet Wire</span></span></div>
<div class="calibre11"><span>Magnet wire (see <a href="#filepos2279231">Fig. 7.74b</a>) is used to build custom coils and electromagnets or anything that requires a large number of loops, such as a tuning element in a radio receiver. Magnet wire is built of solid-core wire and is insulated by a varnish coating. A nice assortment of magnet wire ranging in gauge from 22 to 30 comes in handy.</span></div>
<div class="calibre3"><span><span class="bold">Heat-Shrinkable Tubing</span></span></div>
<div class="calibre11"><span>Heat-shrinkable tubing (see <a href="#filepos2279231">Fig. 7.74c</a>) is a necessity for covering exposed wires and terminal connections, as well as combining a number of different wires together into a tight, single multiconductor cable. You can buy spools of tubing or purchase kits with short pieces of various color and diameter. Standard inner diameters of shrinkable tubing before heat is applied include <img alt="image" src="images/01419.jpg" class="calibre1280"/>
<img alt="image" src="images/01420.jpg" class="calibre1281"/>, ½, <img alt="image" src="images/01421.jpg" class="calibre1282"/>, ¾, 1, 2, 3, and 4 in. A common shrink ratio is 2:1 (50 percent), so a <img alt="image" src="images/00093.jpg" class="calibre123"/>-in. tube would shrink to <img alt="images" src="images/01334.jpg" class="calibre1209"/> in., and so forth. However, you might also find shrink ratios of 3:1. A heat gun, or often even a hair dryer, can be used to shrink the tubes.</span></div>
<div class="calibre3"><span><span class="bold">Interconnects</span></span></div>
<div class="calibre11"><span>For temporary wire-to-wire connections, wire nuts, butt connectors, and various pin-and-socket connectors should be at hand (see <a href="#filepos2279231">Fig. 7.74d</a> and e). Wire nuts simply twist wires together and enclose the connection. Butt connectors join two different wire ends together within a metal-insulated crimped tube. Pin-and-socket connectors use various friction-fit mechanisms—male end on one wire, female end on the other.</span></div>
<div class="calibre26"><span>For connecting wires to more permanent structures, such as PCBs and chassis, a variety of connectors can be used. For PCBs, 0.100-in. male headers (straight or right-angle) with corresponding 0.156-in. female crimp sockets are extremely useful. For larger connections, PCB-mount terminal blocks or chassis terminal blocks with corresponding solderless terminals (what gets attached to the wire) are ideal. Look for solderless terminal kits that include male and female spade terminals, quick disconnect, and ring terminals, to accommodate various wire gauges.</span></div>
<div class="calibre3"><span><span class="bold">More Hardware</span></span></div>
<div class="calibre11"><span>Here are some additional hardware items to keep on hand (see <a href="#filepos2279231">Fig. 7.74g</a>):</span></div>
<div class="calibre187"><span><span class="italic">Battery holders</span>: AAA, AA, C, D, 9-V, and coin.</span></div>
<div class="calibre187"><span><span class="italic">Heat sinks</span>: TO-3, TO-92, TO-202, TO-218, TO-220, and DIP case styles. Also get heat-sink compound.</span></div>
<div class="calibre187"><span><span class="italic">Standoffs</span>: Aluminum and brass thread standoffs of 4-40, 6-32 thread of various lengths.</span></div>
<div class="calibre187"><span><span class="italic">Hardware</span>: Machine screws (4-40, 6-32), hex nuts (4-40, 6-32), and flat, split-lock washers (4, 6, and 8).</span></div>
<div class="calibre187"><span><span class="italic">Adhesive rubber feet</span>: For project boxes, to prevent slipping and surface scratches.</span></div>
<div class="calibre187"><span><span class="italic">Transistor and IC sockets</span>: Primarily 8, 14, and 16-pin DIP sockets.</span></div>
<div class="calibre187"><span><span class="italic">Instrumentation knobs</span>: <img alt="image" src="images/00093.jpg" class="calibre123"/>-in. and ¼-in. shaft diameters with a screw to secure the knob to the shaft. These are used on potentiometers and the like.</span></div>
<div class="calibre187"><span><span class="italic">Enclosures</span>: Plastic and aluminum, with PCB mounting hardware.</span></div>
<div class="calibre187"><span><a></a><span class="italic">Sheet metal</span>: This is usually sold in large sheets, 4 × 8 ft or larger, and is used for making metal chassis.</span></div>
<div class="calibre187"><span><span class="italic">Wire-wrap hardware</span>: You will need this if you plan on using wire-wrap construction techniques. Get assorted posts, IC sockets, and so on.</span></div>
<div class="calibre3"><span><span class="bold">Chemical-Related Items</span></span></div>
<div class="calibre11"><span>Following are some other items to stock:</span></div>
<div class="calibre187"><span><span class="italic">Epoxy</span>: Two-part epoxy resin works well for joining odd-shaped items together. It creates a thick, strong bond. Try to find one that dries clear.</span></div>
<div class="calibre187"><span><span class="italic">Silicon adhesive</span>: This is useful for gluing components, such as Molex connectors, to circuit boards. Silicon adhesive can stand high temperatures, which is good for anything that holds a part to be soldered. It also dries to a rubbery consistency, so it can be peeled off if the component needs to be removed.</span></div>
<div class="calibre187"><span><span class="italic">Deoxidizers and cleaners</span>: An example is DeoxIT, which acts as a deoxidizer, cleaner, and preservative for metal electrical connections, such as switches, relay contact pads, and banana and audio plugs.</span></div>
<div class="calibre187"><span><span class="italic">Defluxer</span>: This is used for removing flux from soldered boards. It prevents low-resistance bridges from forming.</span></div>
<div class="calibre187"><span><span class="italic">Antioxidant joint compound</span>: An example is Nolox, which is good for ensuring that electrical connections don’t corrode under moist conditions. For example, if you’re running low-voltage landscape wires to lights or other outdoor projects using wire-nut connections, apply a dab of the compound to the wire connections before securing things together with a wire nut.</span></div>
<div class="calibre187"><span><span class="italic">Conductive writer and circuit sealer pens</span>: A conductive silver-based ink pen, such as the CircuitWriter by CAIG Laboratories Inc., is handy for fixing up corroded or damaged circuit board traces. The pen is used to redraw the ruined traces. A carbon-based ink pen is good for coating button contacts and membranes, where soldering is out of the question. In addition, an acrylic-based sealer pen can be used to provide conductive and oxidation protection to unprotected and newly drawn traces.</span></div>
<div class="calibre187"><span><span class="italic">Circuit chiller</span>: This is used to rapidly cool components and for troubleshooting intermittently faulting capacitors, resistors, semiconductors, and other defective components. It also detects cold solder joints, cracks in PCBs, and oxidized junctions.</span></div>
<div class="calibre187"><span><span class="italic">PCB chemicals</span>: Kits will usually already have all the necessary items, but extra resist, tape, resist pens, paint, rub-on transfer, and etchant can’t hurt.</span></div>
<div id="filepos2290333" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">7.5.20   Electronics Catalogs</span></span></span></span></span></div>
<div class="calibre11"><span>Order a variety of paperback catalogs from companies such as Digi-Key, Jameco, and Mouser Electronics, and keep them handy in your laboratory. Here are some popular sources to check out:</span></div>
<div class="calibre3"><span><img alt="image" src="images/01422.jpg" class="calibre1283"/></span></div>
<div class="calibre3"><span><a></a><img alt="image" src="images/01423.jpg" class="calibre1284"/></span></div>
<div class="calibre30"><span>Many of these suppliers will ship worldwide. The following are some other international suppliers of note:</span></div>
<div class="calibre3"><span><img alt="image" src="images/01424.jpg" class="calibre1285"/></span></div>
<div class="calibre30"><span>The Octopart website (<a href="http://www.octopart.com">www.octopart.com</a>) is a search engine designed for finding electronic parts, and it’s a great way to locate suppliers for a particular part. There are also online auction sites.</span></div>
<div id="filepos2291749" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">7.5.21   Recommended Electronics Parts</span></span></span></span></span></div>
<div class="calibre11"><span>If you’re serious about electronics, you’ll want a decent stockpile of electronics components that you can resort to when unforeseen needs arise. <a href="#filepos2292706">Fig. 7.76a</a> and <a href="#filepos2292989">7.76b</a> show a suggested stockpile for your laboratory. While putting together your stockpile, you can cut down on cost by investing in component kits, such as resistor, capacitor, transistor, diode, LED, digital IC, and analog IC kits. Jameco (<a href="http://www.jameco.com">www.jameco.com</a>), Digi-Key (<a href="http://www.digikey.com">www.digikey.com</a>), and Mouser Electronics (<a href="http://www.mouser.com">www.mouser.com</a>) sell various component kits.</span></div>
<div id="filepos2292706" class="calibre3"><span><a></a><img alt="image" src="images/01425.jpg" class="calibre1286"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.76a</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2292989" class="calibre3"><span><a></a><img alt="image" src="images/01426.jpg" class="calibre1287"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.76b</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Another great source for parts can be found within discarded consumer products, such as microwaves, stereos, printers, and breadmakers. Hack them apart, and you’ll be amazed what you find: high-voltage transformers, large motors, stepper motors, laser diodes, gears, switches, relays, capacitors, wire connectors, and so on. Store what you find in boxes, and later retrieve what you need.</span></div>
<div id="filepos2293757" class="calibre48"><span class="bold"><span class="italic"><span><a></a><span class="bold"><span class="italic">7.5.22   Electronic CAD Programs</span></span></span></span></span></div>
<div class="calibre3"><span><img alt="image" src="images/01427.jpg" class="calibre529"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.77</span></span></span></div><div class="calibre35"> </div>
<div class="calibre11"><span>Electronic CAD programs are very important tools for learning, simulating, and constructing sophisticated circuits. Many software packages include schematic drawing, often simulation, and sometimes PCB design, autorouting, and even realistic 3D modeling. You can learn more about the various programs by surfing the Internet. Most of the software companies allow you to download a free demo version of their software. In addition, some of the most popular electronic CAD tools for hobby use are available for free (with restricted board size and layers) or as open source. Here are some CAD programs to check out:</span></div>
<div class="calibre3"><span><img alt="image" src="images/01428.jpg" class="calibre1288"/></span></div>
<div class="calibre30"><span>Here are a few commercial software packages worth checking out:</span></div>
<div class="calibre3"><span><img alt="image" src="images/01429.jpg" class="calibre73"/></span></div>
<div class="calibre1"><span><a></a><img alt="image" src="images/01430.jpg" class="calibre1289"/></span></div>
<div id="filepos2295510" class="calibre48"><span class="bold"><span class="italic"><span><span class="bold"><span class="italic">7.5.23   Building Your Own Workbench</span></span></span></span></span></div>
<div class="calibre11"><span>After much deliberation, I decided I wanted a new workbench with a large tabletop, five shelves, a metal frame to which to attach things, a built-in backboard with power outlets, an on/off switch for a hanging fluorescent lamp, and a large wire-spool holding rod. The plans for building the workbench are shown in <a href="#filepos2296437">Fig. 7.78a</a> and <a href="#filepos2296720">b</a>. The whole design is based on a Pro Rack model 07200 from Do+ Able Products, Inc. The rack cost only about $90, and the whole project ended up costing around $400 plus a good day’s work. I got all the material at Home Depot, where they even cut all the wood for me for free.</span></div>
<div id="filepos2296437" class="calibre3"><span><a></a><img alt="image" src="images/01431.jpg" class="calibre1290"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.78a</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2296720" class="calibre3"><span><a></a><img alt="image" src="images/01432.jpg" class="calibre1291"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 7.78b</span></span></span></div><div class="calibre35"> </div>  <div class="mbppagebreak"></div><div id="filepos2297020" class="calibre8"><span><a></a><span class="bold">CHAPTER 8</span></span></div><div class="calibre32"> </div>
<div class="calibre19"><span class="calibre5"><span class="bold"><span><span class="bold">Operational Amplifiers</span></span></span></span></div><div class="calibre21"> </div>
<div class="calibre11"><span>Operational amplifiers (op amps) are incredibly useful high-performance differential amplifiers that can be employed in a number of amazing ways. A typical op amp is an integrated device with a noninverting input, an inverting input, two dc power supply leads (positive and negative), an output terminal, and a few other specialized leads used for fine-tuning. The positive and negative supply leads, as well as the fine-tuning leads, are often omitted from circuit schematics. If you do not see any supply leads, assume that a dual supply is being used.</span></div>
<div class="calibre26"><span>Note that we have labeled the supply voltages +<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">s</sub></span></small></span> and −<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">s</sub></span></small></span>, as they are usually the same. However, they do not need to be, as you will see when we look at single-supply op amps in this chapter.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01433.jpg" class="calibre1292"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.1</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>By itself, an op amp’s operation is simple. If the voltage applied to the <span class="italic">inverting terminal V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> is more positive than the voltage applied to the <span class="italic">noninverting terminal V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small>, the output saturates toward the <span class="italic">negative supply voltage −V<small class="calibre28"><span class="calibre17"><sub class="calibre37">S</sub></span></small></span>. Conversely, if <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> &gt;
<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>, the output saturates toward the positive supply voltage +<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">S</sub></span></small></span> (see <a href="#filepos2299527">Fig. 8.2</a>). This “maxing out” effect occurs with the slightest difference in voltage between the input terminals.</span></div>
<div id="filepos2299527" class="calibre3"><span><img alt="images" src="images/01434.jpg" class="calibre1293"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.2</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>At first glance, it may appear that an op amp is not a very impressive device—it switches from one maximum output state to another whenever there’s a voltage difference between its inputs. Big deal, right? By itself, it does indeed have limited applications. The trick to making op amps useful devices involves applying what is called <span class="italic">negative feedback</span>.</span></div>
<div class="calibre26"><span>When voltage is “fed” back from the output terminal to the inverting terminal (this is referred to as <span class="italic">negative feedback</span>), the gain of an op amp can be controlled—the op amp’s output is prevented from saturating. For example, a feedback resistor <span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">F</sub></span></small></span> placed between the output and the inverting input, as shown in <a href="#filepos2302011">Fig. 8.3</a>, acts to convey the state of the output back to the op amp’s input. This feedback information basically tells the op amp to readjust its output voltage to a value determined by the resistance of the feedback resistor. The circuit in <a href="#filepos2302011">Fig. 8.3</a>, called an <span class="italic">inverting amplifier</span>, has an output equal to −<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>/(<span class="italic">R<small class="calibre28"><span class="calibre17"><sub class="calibre37">F</sub></span></small></span>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) (you will learn how to derive this formula later in this chapter). The negative sign means that the output is inverted relative to the input. The gain is then simply the output voltage divided by the input voltage, or −<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37"><span class="italic">F</span></sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> (the negative sign indicates that the output is inverted relative to the input). As you can see from this equation, if you increase the resistance of the feedback resistor, there is an increase in the voltage gain. On the other hand, if you decrease the resistance of the feedback resistor, there is a decrease in the voltage gain.</span></div>
<div id="filepos2302011" class="calibre3"><span><img alt="images" src="images/01435.jpg" class="calibre178"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.3</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>By adding other components to the negative-feedback circuit, an op amp can be made to do a number of interesting things besides pure amplification. Other interesting op amp circuits include voltage-regulator circuits, current-to-voltage converters, voltage-to-current converters, oscillator circuits, mathematical circuits (adders, subtractors, multipliers, differentiators, integrators, etc.), waveform generators, active filter circuits, active rectifiers, peak detectors, sample-and-hold circuits, etc. Most of these circuits will be covered in this chapter.</span></div>
<div class="calibre26"><span>Besides negative feedback, there’s positive feedback, where the output is linked through a network to the noninverting input. Positive feedback has the opposite effect as negative feedback; it drives the op amp harder toward saturation. Although positive feedback is seldom used, it finds applications in special comparator circuits that are often used in oscillator circuits. Positive feedback also will be discussed in detail in this chapter.</span></div>
<div id="filepos2303478" class="calibre3"><span class="calibre7"><span><span class="bold">8.1   Operational Amplifier Water Analogy</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>This is the closest thing I could come up with in terms of a water analogy for an op amp. To make the analogy work, you have to pretend that water pressure is analogous to voltage and water flow is analogous to current flow.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01436.jpg" class="calibre1294"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>The inverting and noninverting terminals of the water op amp are represented by the two tubes with elastic balloon ends. When the water pressure applied to both input tubes is equal, the lever arm is centered. However, if the water pressure applied to the noninverting tube is made larger than the pressure applied to the inverting tube, the noninverting balloon expands and forces the lever arm downward. The lever arm then rotates the rotator valve counterclockwise, thus opening a canal from the compressor tube (analogous to the positive supply voltage) to the output tube. (This is analogous to an op amp saturating in the positive direction whenever the noninverting input is more positive in voltage than the inverting input.) Now, if the pressure applied at the non-inverting tube becomes less than the pressure applied at the inverting tube, the lever arm is pushed upward by the inverting balloon. This causes the rotator valve to rotate clockwise, thus opening the canal from the vacuum tube (analogous to the negative supply voltage) to the output. (This is analogous to an op amp saturating in the negative direction whenever the inverting input is made more positive in voltage than the noninverting input.) See what you can do with the analogy in terms of explaining negative feedback. Also note that in the analogy there is an infinite “input water impedance” at the input tubes, while there is a zero “output water impedance” at the output tube. As you will see, ideal op amps also have similar input and output impedance. In real op amps, there are always some leakage currents.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.4</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2306145" class="calibre3"><span class="calibre7"><span><span class="bold">8.2   How Op Amps Work (The “Cop-Out” Explanation)</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>An op amp is an integrated device that contains a large number of transistors, several resistors, and a few capacitors. <a href="#filepos2306837">Figure 8.5</a> shows a schematic diagram of a typical low-cost general-purpose bipolar operational amplifier.</span></div>
<div id="filepos2306837" class="calibre3"><span><img alt="images" src="images/01437.jpg" class="calibre1295"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.5</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>This op amp basically consists of three stages: a high-input-impedance differential amplifier, a high-gain voltage amplifier with a level shifter (permitting the output to swing positive and negative), and a low-impedance output amplifier. However, realizing that an op amp is composed of various stages does not help you much in terms of figuring out what will happen between the input and output leads. That is, if you attempt to figure out what the currents and voltages are doing within the complex system, you will be asking for trouble. It is just too difficult a task. What is important here is not to focus on understanding the op amp’s internal circuitry but instead to focus on memorizing some rules that individuals came up with that require only working with the input and output leads. This approach seems like a “cop-out,” but it works.</span></div>
<div id="filepos2308080" class="calibre3"><span class="calibre7"><span><span class="bold">8.3   Theory</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>There is essentially only one formula you will need to know for solving op amp circuit problems. This formula is the foundation on which everything else rests. It is the expression for an op amp’s output voltage as a function of its input voltages <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> (noninverting) and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> (inverting) and of its <span class="italic">open-loop voltage gain A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small>:</span></span></div>
<div class="calibre6"><span><span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>)</span></div>
<div class="calibre6"><span>This expression says that an <span class="italic">ideal op amp</span> acts like an ideal voltage source that supplies an output voltage equal to <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>) (see <a href="#filepos2310378">Fig. 8.6</a>). Things can get a little more complex when we start talking about <span class="italic">real op amps</span>, but generally, the open-loop voltage expression above pretty much remains the same, except now we have to make some slight modifications to our equivalent circuit. These modifications must take into account the nonideal features of an op amp, such as its input resistance <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> and output resistance <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>. <a href="#filepos2310378">Figure 8.6</a>
<span class="italic">right</span> shows a more realistic equivalent circuit for an op amp.</span></div>
<div id="filepos2310378" class="calibre3"><span><img alt="images" src="images/01438.jpg" class="calibre1296"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.6</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>To give meaning to the open-loop voltage gain expression and to the ideal and real equivalent circuits, the values of <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>, <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>, and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> are defined within the following rules:</span></div>
<div class="calibre187"><span><span class="bold">Rule 1:</span> For an ideal op amp, the open-loop voltage gain is infinite (<span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> = ∞). For a real op amp, the gain is a finite value, typically between 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">4</sup></span></small> to 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small>.</span></div>
<div class="calibre187"><span><span class="bold">Rule 2:</span> For an ideal op amp, the input impedance is infinite (<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> = ∞). For a real op amp, the input impedance is finite, typically between 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small> (e.g., typical bipolar op amp) to 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">12</sup></span></small> Ω (e.g., typical JFET op amp). The output impedance for an ideal op amp is zero (<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = 0). For a real op amp, <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> is typically between 10 to 1000 Ω.</span></div>
<div class="calibre187"><span><span class="bold">Rule 3:</span> The input terminals of an ideal op amp draw no current. Practically speaking, this is true for a real op amp as well—the actual amount of input current is usually (but not always) insignificantly small, typically within the picoamps (e.g., typical JFET op amp) to nanoamps (e.g., typical bipolar op amp) range.</span></div>
<div class="calibre30"><span>Now that you are armed with <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>) and rules 1 through 3, let’s apply them to a few simple example problems.</span></div>
<div class="calibre3"><span><a></a><span class="bold">EXAMPLE 1</span></span></div>
<div class="calibre11"><span>Solve for the gain (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) of the circuit below.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01439.jpg" class="calibre1297"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Since <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> is grounded (0 V) and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> is simply <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>, you can plug these values into the open-loop voltage gain expression:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>)</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>         = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> − 0 V) = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small>V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Rearranging this equation, you get the expression for the gain:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01440.jpg" class="calibre1298"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>If you treat the op amp as ideal, <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> would be infinite. However, if you treat the op amp as real, <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> is finite (around 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">4</sup></span></small> to 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small>). This circuit acts as a simple noninverting comparator that uses ground as a reference. If <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> &gt; 0 V, the output ideally goes to +∞ V; if <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> &lt; 0V, the output ideally goes to −∞ V. With a real op amp, the output is limited by the supply voltages (which are not shown in the drawing but assumed). The exact value of the output voltage is slightly below and above the positive and negative supply voltages, respectively. These maximum output voltages are called the <span class="italic">positive</span> and <span class="italic">negative saturation voltages</span>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.7</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">EXAMPLE 2</span></span></div>
<div class="calibre11"><span>Solve for the gain (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) of the circuit below.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01441.jpg" class="calibre1299"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Since <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> is grounded (0V) and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> is simply <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>, you can substitute these values into the open-loop voltage gain expression:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>)</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>         = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(0 V − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) = −<span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small>V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Rearranging this equation, you get the expression for the gain:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01442.jpg" class="calibre424"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>If you treat the op amp as ideal, −<span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> is negatively infinite. However, if you treat the op amp as real, −<span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> is finite (around −10<small class="calibre28"><span class="calibre17"><sup class="calibre29">4</sup></span></small> to −10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small>). This circuit acts as a simple inverting comparator that uses ground as a reference. If <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> &gt; 0 V, the output ideally goes to −∞ V; if <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> &lt; 0 V, the output ideally goes to +∞ V. With a real op amp, the output swings are limited to the saturation voltages.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.8</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2319574" class="calibre3"><span class="calibre7"><span><span class="bold">8.4   Negative Feedback</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Negative feedback is a wiring technique where some of the output voltage is sent back to the inverting terminal. This voltage can be “sent” back through a resistor, capacitor, or complex circuit or simply can be sent back through a wire. So exactly what kind of formulas do you use now? Well, that depends on the feedback circuit, but in reality, there is nothing all that new to learn. In fact, there is really only one formula you need to know for negative-feedback circuits (you still have to use the rules, however). This formula looks a lot like our old friend <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>). There is, however, the <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> in the formula—this you must reconsider. <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> in the formula changes because now the output voltage from the op amp is “giving” extra voltage (positive or negative) back to the inverting terminal. What this means is that you must replace <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> with <span class="italic">fV</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>, where <span class="italic">f</span> is a fraction of the voltage “sent” back from <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>. That’s the trick!</span></div>
<div class="calibre26"><span><a></a>There are two basic kinds of negative feedback, voltage feedback and operational feedback, as shown in <a href="#filepos2321751">Fig. 8.9</a>.</span></div>
<div id="filepos2321751" class="calibre3"><span><img alt="images" src="images/01443.jpg" class="calibre1300"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.9</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Now, in practice, figuring out what the fraction <span class="italic">f</span> should be is not important. That is, you do not have to calculate it explicitly. The reason why I have introduced it in the open-loop voltage expression is to provide you with a bit of basic understanding as to how negative feedback works in theory. As it turns out, there is a simple trick for making op amp circuits with negative feedback easy to calculate. The trick is as follows: If you treat an op amp as an ideal device, you will notice that if you rearrange the open-loop voltage expression into <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> = (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>), the left side of the equation goes to zero—<span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span> is infinite for an ideal op amp. What you get in the end is then simply <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = 0. This result is incredibly important in terms of simplifying op amp circuits with negative feedback—so important that the result receives its own rule (the fourth and final rule).</span></div>
<div class="calibre187"><span><span class="bold">Rule 4:</span> Whenever an op amp senses a voltage difference between its inverting and noninverting inputs, it responds by feeding back as much current/voltage through the feedback network as is necessary to keep this difference equal to zero (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = 0). This rule only applies for negative feedback.</span></div>
<div class="calibre30"><span>The following sample problems are designed to show you how to apply rule 4 (and the other rules) to op amp circuit problems with negative feedback.</span></div>
<div class="calibre3"><span><span class="bold">Negative Feedback Example Problems</span></span></div>
<div class="calibre3"><span class="calibre17"><span><span class="bold">BUFFER (UNITY GAIN AMPLIFIER)</span></span></span></div>
<div class="calibre11"><span>Solve for the gain (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) of the circuit below.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01444.jpg" class="calibre1301"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Since you are dealing with negative feedback, you can apply rule 4, which says that the output will attempt to make <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = 0. By examining the simple connections, notice that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>. This means that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = 0. Rearranging this expression, you get the gain:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01445.jpg" class="calibre1302"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>A gain of 1 means that there is no amplification; the op amp’s output follows its input. At first glance, it may appear that this circuit is useless. However, it is important to recall that an op amp’s input impedance is huge, while its output impedance is extremely small (rule 2). This feature makes this circuit useful for circuit-isolation applications. In other words, the circuit acts as a buffer. With real op amps, it may be necessary to throw in a resistor in the feedback loop (lower circuit). The resistor acts to minimize voltage offset errors caused by input bias currents (leakage). The resistance of the feedback resistor should be equal to the source resistance. I will discuss input bias currents later in this chapter.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.10</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><a></a><span class="bold">INVERTING AMPLIFIER</span></span></div>
<div class="calibre11"><span>Solve for the gain (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) of the circuit below.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01446.jpg" class="calibre1303"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Because you have negative feedback, you know the output will attempt to make the difference between <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> zero. Since <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> is grounded (0 V), this means that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> also will be 0 V (rule 4). To figure out the gain, you must find currents <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> so you can come up with an expression containing <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> in terms of <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>. Using Ohm’s law, you find <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> to be</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01447.jpg" class="calibre1304"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Because an ideal op amp has infinite input impedance, no current will enter its inverting terminal (rule 3). Therefore, you can apply Kirchhoff’s junction rule to get <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = −<span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>. Substituting the calculated values of <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> into this expression, you get <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = −<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>. Rearranging this expression, you find the gain:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01448.jpg" class="calibre1305"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The negative sign tells you that the signal that enters the input will be inverted (shifted 180°). Notice that if <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> = <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, the gain is −1 (the negative sign simply means the output is inverted). In this case you get what’s called a <span class="italic">unity-gain inverter</span>, or an <span class="italic">inverting buffer</span>. When using real op amps that have relatively high input bias currents (e.g., bipolar op amps), it may be necessary to place a resistor with a resistance equal to <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>||<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> between the noninverting input and ground to minimize voltage offset errors.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.11</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">NONINVERTING AMPLIFER</span></span></div>
<div class="calibre3"><span>Solve for the gain (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>) of the circuit below.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01449.jpg" class="calibre1306"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>By inspection, you know that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>. By applying rule 4, you then can say that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small>. This means that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>. To come up with an expression relating <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> (so that you can find the gain), the voltage divider relation is used:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01450.jpg" class="calibre1307"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Rearranging this equation, you find the gain:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01451.jpg" class="calibre1308"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Unlike the inverting amplifier, this circuit’s output is in phase with its input—the output is “noninverted.” With real op amps, to minimize voltage offset errors due to input bias current, set <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>||<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">source</sub></span></small>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.12</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><a></a><span class="bold">SUMMING AMPLIFIER</span></span></div>
<div class="calibre11"><span>Solve for <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> in terms of <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01452.jpg" class="calibre1309"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Since you know that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> is grounded (0 V), and since you have feedback in the circuit, you can say that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = 0 V (rule 4). Now that you know <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small>, solve for <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, and <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> in order to come up with an expression relating <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> with <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>. The currents are found by applying Ohm’s law:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01453.jpg" class="calibre1310"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Like the last problem, assume that no current enters the op amp’s inverting terminal (rule 3). This means that you can apply Kirchhoff’s junction rule to combine <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, and <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> into one expression: <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> = −(<span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> + <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>) = −<span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> − <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>. Plugging the results above into this expression gives the answer:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01454.jpg" class="calibre1311"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>If you make <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> = <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> = <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small>, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = −(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> + <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>). Notice that the sum is negative. To get a positive sum, you can add an inverting stage, as shown in the lower circuit. Here, three inputs are added together to yield the following output: <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> + <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> + <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small>. Again, for some real op amps, an additional input-bias compensation resistor placed between the noninverting input and ground may be needed to avoid offset error caused by input bias current. Its value should be equal to the parallel resistance of all the input resistors.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.13</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">DIFFERENCE AMPLIFIER</span></span></div>
<div class="calibre11"><span>Determine <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01455.jpg" class="calibre1312"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>First, you determine the voltage at the noninverting input by using the voltage divider relation (again, assume that no current enters the inputs):</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01456.jpg" class="calibre1313"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Next, apply Kirchhoff’s current junction law to the inverting input (<span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> = <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>):</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01457.jpg" class="calibre1314"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Using rule 4 (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>), substitute the <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> term in for <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> in the last equation to get</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01458.jpg" class="calibre1315"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>If you set <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> = <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, then <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.14</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><a></a><span class="bold">INTEGRATOR</span></span></div>
<div class="calibre11"><span>Solve for <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> in terms of <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01459.jpg" class="calibre1316"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Because you have feedback, and because <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> = 0 V, you can say that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> is 0 V as well (rule 4). Now that you know <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>, solve for <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> and <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> so that you can come up with an expression relating <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> with <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>. Since no current enters the input of an op amp (rule 3), the displacement current <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> through the capacitor and the current <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> through the resistor must be related by <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small> + I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> = 0. To find <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span>, use Ohm’s law:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01460.jpg" class="calibre1317"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> is found by using the displacement current relation:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01461.jpg" class="calibre1318"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Placing these values of <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> and <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> into <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small> + I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> = 0 and rearranging, you get the answer:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01462.jpg" class="calibre1319"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Such a circuit is called an <span class="italic">integrator;</span> the input signal is integrated at the output. Now, one problem with the first circuit is that the output tends to drift, even with the input grounded, due to nonideal characteristics of real op amps such as voltage offsets and bias current. A large resistor placed across the capacitor can provide dc feedback for stable biasing. Also, a compensation resistor may be needed between the noninverting terminal and ground to correct voltage offset errors caused by input bias currents. The size of this resistor should be equal to the parallel resistance of the input resistor and the feedback compensation resistor.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.15</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">DIFFERENTIATOR</span></span></div>
<div class="calibre11"><span>Solve for <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> in terms of <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01463.jpg" class="calibre1320"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Since you know that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> is grounded (0 V), and since you have feedback in the circuit, you can say that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> = <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> = 0 V (rule 4). Now that you know <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>, solve for <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> and <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> so that you can come up with an expression relating <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> with <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>. Since no current enters the input of an op amp (rule 3), the displacement current <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> through the capacitor and the current <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> through the resistor must be related by <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small> + I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> = 0. To find <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span>, use the displacement current equation:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01464.jpg" class="calibre1321"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The current <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> is found using Ohm’s law:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01465.jpg" class="calibre1322"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Placing these values of <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> and <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small></span> into <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">R</sub></span></small> + I<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> = 0 and rearranging, you get the answer:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01466.jpg" class="calibre1323"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><a></a>Such a circuit is called a <span class="italic">differentiator;</span> the input signal is differentiated at the output. The first differentiator circuit shown is not in practical form. It is extremely susceptible to noise due to the op amp’s high ac gain. Also, the feedback network of the differentiator acts as an <span class="italic">RC</span> low-pass filter that contributes a 90° phase lag within the loop and may cause stability problems. A more practical differentiator is shown below the first circuit. Here, both stability and noise problems are corrected with the addition of a feedback capacitor and input resistor. The additional components provide high-frequency rolloff to reduce high-frequency noise. These components also introduce a 90° lead to cancel the 90° phase lag. The effect of the additional components, however, limits the maximum frequency of operation—at very high frequencies, the differentiator becomes an integrator. Finally, an additional input-bias compensation resistor placed between the noninverting input and ground may be needed to avoid offset error caused by input bias current. Its value should be equal to the resistance of the feedback resistor.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.16</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2348269" class="calibre3"><span class="calibre7"><span><span class="bold">8.5   Positive Feedback</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Positive feedback involves sending output voltage back to the noninverting input. In terms of the theory, if you look at our old friend <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>), the <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small> term changes to <span class="italic">fV</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> (<span class="italic">f</span> is a fraction of the voltage sent back), so you get <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = <span class="italic">A<small class="calibre28"><span class="calibre17"><sub class="calibre37">o</sub></span></small></span>(<span class="italic">fV</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>). Now, an important thing to notice about this equation (and about positive feedback in general) is that the voltage fed back to the noninverting input will act to drive the op amp “harder” in the direction the output is going (toward saturation). This makes sense in terms of the equation; <span class="italic">fV</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> adds to the expression. Recall that negative feedback acted in the opposite way; the <span class="italic">fV</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> (= <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small>) term subtracted from the expression, preventing the output from “maxing out.” In electronics, positive feedback is usually a bad thing, whereas negative feedback is a good thing. For most applications, it is desirable to control the gain (negative feedback), while it is undesirable to go to the extremes (positive feedback).</span></div>
<div class="calibre26"><span>There is, however, an important use for positive feedback. When using an op amp to make a comparator, positive feedback can make output swings more pronounced. Also, by adjusting the size of the feedback resistor, a comparator can be made to experience what is called <span class="italic">hysteresis</span>. In effect, hysteresis gives the comparator two thresholds. The voltage between the two thresholds is called the <span class="italic">hysteresis voltage</span>. By obtaining two thresholds (instead of merely one), the comparator circuit becomes more immune to noise that can trigger unwanted output swings. To better understand hysteresis, let’s take a look at the following comparator circuit that incorporates positive feedback.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01467.jpg" class="calibre1324"/></span></div>
<div class="calibre3"><span><img alt="images" src="images/01468.jpg" class="calibre173"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.17</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>Assume that the op amp’s output is at positive saturation, say, +15 V. If <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> is 0 V, the voltage difference between the inverting input and noninverting input (<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">d</sub></span></small></span>) will be 1.36 V. You get this by using Ohm’s law:</span></div>
<div class="calibre6"><span><span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">F</sub></span></small></span> = (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> − <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>)/(<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> + <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>)<br class="calibre16"/><span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">d</sub></span></small></span> = <span class="italic">I<small class="calibre28"><span class="calibre17"><sub class="calibre37">F</sub></span></small>R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small></span></div>
<div class="calibre6"><span>This does not do anything to the output; it remains at +15 V. However, if you reduce <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small>, there is a point when <span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">d</sub></span></small></span> goes to 0 V, at which time the output switches states. This voltage is called the <span class="italic">negative threshold voltage</span> (−<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span>). The negative threshold voltage can be determined by using the previous two equations—the end result being −<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span> = −<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/(<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>). In the example, −<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span> = −1.5 V. Now, if the output is at negative saturation (−15 V) and 0 V is applied to the input, <span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">d</sub></span></small></span> = −1.36 V. The output remains at −15 V. However, if the input voltage is increased, there is a point where <span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">d</sub></span></small></span> goes to zero and the output switches states. This point is called the <span class="italic">positive threshold voltage</span> (+<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span>), which is equal to +<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small>/(<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>). In the example, +<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37"><span class="italic">T</span></sub></span></small> = +1.5 V. Now the difference between the two saturation voltages is the hysteresis voltage: <span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">h</sub></span></small></span> = +<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span> − (−<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span>). In the example, <span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">h</sub></span></small></span> = 3 V.</span></div>
<div id="filepos2354809" class="calibre3"><span class="calibre7"><span><span class="bold">8.6   Real Kinds of Op Amps</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre1"><span class="calibre17"><span><span class="bold">General Purpose</span></span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01469.jpg" class="calibre1325"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>There is a huge selection of general-purpose and precision op amps to choose from. Precision op amps are specifically designed for high stability, low offset voltages, low bias currents, and low drift parameters. Because the selection of op amps is so incredibly large, I will leave it to you to check out the electronics catalogs to see what devices are available. When checking out these catalogs, you will find that op amps (not just general-purpose and precision) fall into one of the following categories (based on input circuitry): bipolar, JFET, MOSFET, or some hybrid thereof (e.g., BiFET). In general, bipolar op amps, like the 741 (industry standard), have higher input bias currents than either JFET or MOSFET types. This means that their input terminals have a greater tendency to “leak in” current. Input bias current results in voltage drops across resistors of feedback networks, biasing networks, or source impedances, which in turn can offset the output voltage. The amount of offset a circuit can tolerate ultimately depends on the application. Now, as I briefly mentioned earlier in this chapter, a compensation resistor placed between the noninverting terminal and ground (e.g., bipolar inverting amplifier circuit) can reduce these offset errors. (More on this in a minute.)</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.18</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><a></a><span class="bold">Precision</span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01470.jpg" class="calibre1326"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>A simple way to avoid problems associated with input bias current is to use a FET op amp. A typical JFET op amp has a very low input bias current, typically within the lower picoamp range as compared with the nanoamp range for a typical bipolar op amp. Some MOSFET op amps come with even lower input bias currents, often as low as a few tenths of a picoamp. Though FET op amps have lower input bias current than bipolar op amps, there are other features they have that are not quite as desirable. For example, JFET op amps often experience an undesired effect called <span class="italic">phase inversion</span>. If the input common-mode voltage of the JFET approaches the negative supply too closely, the inverting and noninverting input terminals may reverse directions—negative feedback becomes positive feedback, causing the op amp to latch up. This problem can be avoided by using a bipolar op amp or by restricting the common-mode range of the signal. Here are some other general comments about bipolar and FET op amps: offset voltage (low for bipolar, medium for JFET, medium to high for MOSFET), offset drift (low for bipolar, medium for FET), bias matching (excellent for bipolar, fair for FET), bias/temperature variation (low for bipolar, fair for FET).<br class="calibre16"/>    To avoid getting confused by the differences between the various op amp technologies, it is often easier to simply concentrate on the specifications listed in the electronics catalogs. Characteristics to look for include speed/slew rate, noise, input offset voltages and their drift, bias currents and their drift, common-mode range, gain, bandwidth, input impedance, output impedance, maximum supply voltages, supply current, power dissipation, and temperature range. Another feature to look for when purchasing an op amp is whether the op amp is internally or externally frequency compensated. An externally compensated op amp requires external components to prevent the gain from dropping too quickly at high frequencies, which can lead to phase inversions and oscillations. Internally compensated op amps take care of these problems with internal circuitry. All the terms listed in this paragraph will be explained in greater detail in a minute.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.19</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Programmable Op Amp</span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01471.jpg" class="calibre1327"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>A programmable op amp is a versatile device that is used primarily in low-power applications (e.g., battery-powered circuits). These devices can be programmed with an external current for desired characteristics. Some of the characteristics that can be altered by applying a programming current include quiescent power dissipation, input offset and bias currents, slew rate, gain-bandwidth product, and input noise characteristics—all of which are roughly proportional to the programming current. The programming current is typically drawn from the programming pin (e.g., pin 8 of the LM4250) through a resistor and into ground. The programming current allows the op amp to be operated over a wide range of supply currents, typically from around a few microamps to a few millamps. Because a programmable op amp can be altered so as to appear as a completely different op amp for different programming currents, it is possible to use a single device for a variety of circuit functions within a system. These devices typically can operate with very low supply voltages (e.g., 1 V for the LM4250). A number of different manufacturers make programmable op amps, so check the catalogs. To learn more about how to use these devices, check out the manufacturers’ literature (e.g., for National Semiconductor’s LM4250, go to <span class="italic"><a href="http://www.national.com">www.national.com</a></span>).</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.20</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><a></a><span class="bold">Single-Supply Op Amps</span></span></div>
<div id="filepos2361732" class="calibre3"><span><img alt="images" src="images/01472.jpg" class="calibre1328"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>These op amps are designed to be operated from a single positive supply (e.g., +12 V) and allow input voltages all the way down to the negative rail (normally tied to ground). <a href="#filepos2361732">Figure 8.21</a> shows a simple dc amplifier that uses a single-supply op amp. It is important to note that the output of the amplifier shown cannot go negative; thus it cannot be used for, say, ac-coupled audio signals. These op amps are frequently used in battery-operated devices.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.21</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Audio Amplifiers</span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01473.jpg" class="calibre1329"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>These are closely related to conventional op amps but designed specifically to operate best (low audio band noise, crossover distortion, etc.) within the audio-frequency spectrum (20 to 20,000 Hz). These devices are used mainly in sensitive preamplifiers, audio systems, AM-FM radio receivers, servo amplifiers, and intercom and automotive circuits. There are a number of audio amplifiers to choose from. Some of these devices contain unique features that differ when compared with those of conventional op amps. For example, the popular LM386 low-voltage audio amplifier has a gain that is internally fixed at 20 but which can be increased to up to 200 with an external capacitor and resistor placed across its gain leads (pins 1 and 8). This device is also designed to drive low-impedance loads, such as an 8-Ω speaker, and runs off a single supply from +4 to +12 V—an ideal range for battery-powered applications. The LM383 is another audio amplifier designed as a power amplifier. It is a high-current device (3.5 A) designed to drive a 4-Ω load (e.g., one 4-Ω speaker or two 8-Ω speakers in parallel). This device also comes with thermal shutdown circuitry and a heat sink. We’ll take a closer look at audio amplifiers in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_020.html#filepos3266649">Chap. 15</a>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.22</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2364420" class="calibre3"><span class="calibre7"><span><span class="bold">8.7   Op Amp Specifications</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span><span class="italic">Common-mode rejection ratio (CMRR)</span>. The input to a difference amplifier, in general, contains two components: a common-mode and a difference-mode signal. The common-mode signal voltage is the average of the two inputs, whereas the difference-mode signal is the difference between the two inputs. Ideally, an amplifier affects the difference-mode signals only. However, the common-mode signal is also amplified to some degree. The common-mode rejection ratio (CMRR), which is defined as the ratio of the difference signal voltage gain to the common-mode signal voltage gain provides an indication of how well an op amp does at rejecting a signal applied simultaneously to both inputs. The greater the value of the CMRR, the better is the performance of the op amp.</span></div>
<div class="calibre26"><span><a></a><span class="italic">Differential-input voltage range</span>. Range of voltage that may be applied between input terminals without forcing the op amp to operate outside its specifications. If the inputs go beyond this range, the gain of the op amp may change drastically.</span></div>
<div class="calibre26"><span><span class="italic">Differential input impedance</span>. Impedance measured between the noninverting and inverting input terminals.</span></div>
<div class="calibre26"><span><span class="italic">Input offset voltage</span>. In theory, the output voltage of an op amp should be zero when both inputs are zero. In reality, however, a slight circuit imbalance within the internal circuitry can result in an output voltage. The input offset voltage is the amount of voltage that must be applied to one of the inputs to zero the output.</span></div>
<div class="calibre26"><span><span class="italic">Input bias current</span>. Theoretically, an op amp should have an infinite input impedance and therefore no input current. In reality, however, small currents, typically within the nanoamp to picoamp range, may be drawn by the inputs. The average of the two input currents is referred to as the <span class="italic">input bias current</span>. This current can result in a voltage drop across resistors in the feedback network, the bias network, or source impedance, which in turn can lead to error in the output voltage. Input bias currents depend on the input circuitry of an op amp. With FET op amps, input bias currents are usually small enough not to cause serious offset voltages. Bipolar op amps, on the other hand, may cause problems. With bipolar op amps, a compensation resistor is often required to center the output. I will discuss how this is done in a minute.</span></div>
<div class="calibre26"><span><span class="italic">Input offset current</span>. This represents the difference in the input currents into the two input terminals when the output is zero. What does this mean? Well, the input terminals of a real op amp tend to draw in different amounts of leakage current, even when the same voltage is applied to them. This occurs because there is always a slight difference in resistance within the input circuitry for the two terminals that originates during the manufacturing process. Therefore, if an op amp’s two terminals are both connected to the same input voltage, different amounts of input current will result, causing the output to be offset. Op amps typically come with offset terminals that can be wired to a potentiometer to correct the offset current. I will discuss how this is done in a minute.</span></div>
<div class="calibre26"><span><span class="italic">Voltage gain (A<small class="calibre28"><span class="calibre17"><sub class="calibre37">V</sub></span></small>)</span>. A typical op amp has a voltage gain of 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">4</sup></span></small> to 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small> (or 80 to 120 dB; gain in dB = 20 log<small class="calibre28"><span class="calibre17"><sub class="calibre37">10</sub></span></small>A<small class="calibre28"><span class="calibre17"><sub class="calibre37">0</sub></span></small>11) at dc. However, the gain drops to 1 at a frequency called the <span class="italic">unity-gain frequency f<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span>, typically from 1 to 10 MHz—a result of high-frequency limitations in the op amp’s internal circuitry. I will talk more about high-frequency behavior in op amps in a minute.</span></div>
<div class="calibre26"><span><span class="italic">Output voltage swing</span>. This is the peak output voltage swing, referenced to zero, that can be obtained without clipping.</span></div>
<div class="calibre26"><span><span class="italic">Slew rate</span>. This represents the maximum rate of change of an op amp’s output voltage with time. The limitation of output change with time results from internal or external frequency compensation capacitors slowing things down, which in turn results in delayed output changes with input changes (propagation delay). At high frequencies, the magnitude of an op amp’s slew rate becomes more critical. A general-purpose op amp like the 741 has a 0.5 V/μs slew rate—a relatively small value when compared with the high-speed HA2539’s slew rate of 600 V/μs.</span></div>
<div class="calibre26"><span><span class="italic">Supply current</span>. This represents the current that is required from the power supply to operate the op amp with no load present and with an output voltage of zero.</span></div>
<div class="calibre26"><span><a href="#filepos2370832">Table 8.1</a> is a sample op amp specifications table.</span></div>
<div class="calibre4"><span class="calibre17"><span class="bold"><span><a></a><span class="bold">TABLE 8.1 Sample Op Amp Specifications</span></span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div id="filepos2370832" class="calibre3"><span><img alt="images" src="images/01474.jpg" class="calibre64"/></span></div>
<div id="filepos2370980" class="calibre3"><span class="calibre7"><span><span class="bold">8.8   Powering Op Amps</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Most op amp applications require a dual-polarity power supply. A simple split ±15-V supply that uses a tapped transformer is presented in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_016.html#filepos2575868">Chap. 11</a>. If you are using batteries to power an op amp, one of the following arrangements can be used.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01475.jpg" class="calibre1330"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.23</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>Now, it is often desirable to avoid split-supplies, especially with small battery-powered applications. One option in such a case is to use a single-supply op amp. However, as I pointed out a second ago, these devices will clip the output if the input attempts to go negative, making them unsuitable for ac-coupled applications. To avoid clipping while still using a single supply, it is possible to take a conventional op amp and apply a dc level to one of the inputs using a voltage-divider network. This, in turn, provides a dc offset level at the output. Both input and output offset levels are referenced to ground (the negative terminal of the battery). With the input offset voltage in place, when an input signal goes negative, the voltage applied to the input of the op amp will dip below the offset voltage but will not go below ground (provided you have set the bias voltage large enough, and provided the input signal is not too large; otherwise, clipping occurs). The output, in turn, will fluctuate about its offset level. To allow for input and output coupling, input and output capacitors are needed. The two circuits in <a href="#filepos2373342">Fig. 8.24</a> show noninverting and inverting ac-coupled amplifiers (designed for audio) that use conventional op amps that run off a single supply voltage.</span></div>
<div id="filepos2373342" class="calibre3"><span><img alt="images" src="images/01476.jpg" class="calibre285"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.24</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>In the noninverting circuit, the dc offset level is set to one-half the supply voltage by <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> to allow for maximum symmetrical swing. <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> (and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>) and <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> (and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">load</sub></span></small>) act as ac coupling (filtering) capacitors that block unwanted dc components and low-level frequencies. <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> should be equal to 1/(2<span class="italic">πf</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3dB</sub></span></small><span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>), while <span class="italic">C</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> should be equal to 1/(2<span class="italic">πf</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3dB</sub></span></small><span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">load</sub></span></small>), where <span class="italic">f</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3dB</sub></span></small> is the cutoff frequency (see <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_015.html#filepos2423538">Chaps. 9</a> and <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_020.html#filepos3266649">15</a>).</span></div>
<div class="calibre26"><span>When using conventional op amps with single supply voltages, make sure to stay within the minimum supply voltage rating of the op amp, and also make sure to account for maximum output swing limitations and maximum common-mode input range.</span></div>
<div id="filepos2375244" class="calibre3"><span class="calibre7"><span><span class="bold">8.9   Some Practical Notes</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>As a note of caution, never reverse an op amp’s power supply leads. Doing so can result in a zapped op amp IC. One way to avoid this fate is to place a diode between the op amp’s negative supply terminal and the negative supply, as shown in <a href="#filepos2375938">Fig. 8.25</a>.</span></div>
<div id="filepos2375938" class="calibre3"><span><img alt="images" src="images/01477.jpg" class="calibre416"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.25</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Also keep wires running from the power supply to the op amp’s supply terminals short and direct. This helps prevent unwanted oscillations/noise from arising in the output. Disturbances also may arise from variations in supply voltage. To eliminate these effects, place bypass capacitors from the supply terminals to ground as shown in <a href="#filepos2375938">Fig. 8.25</a>. A 0.1-μF disk capacitor or a 1.0-μF tantalum capacitor should do the trick.</span></div>
<div class="calibre26"><span><a></a>Both bipolar and JFET op amps can experience a serious form of latch if the input signal becomes more positive or negative than the respective op amp power supplies. If the input terminals go more positive than +<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">S</sub></span></small></span> + 0.7 V or more negative than −<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">s</sub></span></small></span> − 0.7 V, current may flow in the wrong direction within the internal circuitry, short-circuiting the power supplies and destroying the device. To avoid this potentially fatal latch-up, it is important to prevent the input terminals of op amps from exceeding the power supplies. This feature has vital consequences during device turn-on; if a signal is applied to an op amp before it is powered, it may be destroyed at the moment power is applied. A “hard wire” solution to this problem involves clamping the input terminals at risk with diodes (preferably fast low-forward-voltage Schottky diodes; see <a href="#filepos2375938">Fig. 8.25</a>). Current-limiting resistors also may be needed to prevent the diode current from becoming excessive. This protection circuitry has some problems, however. Leakage current in the diodes may increase the error. See manufacturers’ literature for more information.</span></div>
<div id="filepos2378166" class="calibre3"><span class="calibre7"><span><span class="bold">8.10   Voltage and Current Offset Compensation</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>In theory, the output voltage of an op amp should be zero when both inputs are zero. In reality, however, a slight circuit imbalance within the internal circuitry can result in an output voltage (typically within the microvolt to millivolt range). The input offset voltage is the amount of voltage that must be applied to one of the inputs to zero the output—this was discussed earlier. To zero the input offset voltage, manufacturers usually include a pair of offset null terminals. A potentiometer is placed between these two terminals, while the pot’s wiper is connected to the more negative supply terminal, as shown in <a href="#filepos2379461">Fig. 8.26</a>. To center the output, the two inputs can be shorted together and an input voltage applied. If the output saturates, the input offset needs trimming. Adjust the pot until the output approaches zero.</span></div>
<div id="filepos2379461" class="calibre3"><span><img alt="images" src="images/01478.jpg" class="calibre69"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.26</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span><a></a>Notice the resistor placed between the noninverting terminal and ground within the inverting amplifier circuit shown in <a href="#filepos2379461">Fig. 8.26</a>
<span class="italic">right</span>. What is the resistor used for? It is used to compensate for output voltage errors caused by a voltage drops across <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> as a result of input bias current. As discussed earlier, bipolar op amps tend to have larger input bias currents than FET op amps. With FET op amps, the input bias errors are usually so small (in the picoamp range) that the output voltage error is insignificant, and the compensation resistor is not needed. However, with bipolar op amps, this is not the case (input bias currents in the nanoamp range), and compensation is often necessary. Now, in the inverting amplifier, the bias current—assuming for now that the compensation resistor is missing—introduces a voltage drop equal to <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> = <span class="italic">I</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">bias</sub></span></small>(<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>||<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>), which is amplified by a factor of −<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>/<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>. In order to correct this problem, a compensation resistor with a resistance equal the <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>||<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> is placed between the noninverting terminal and ground. This resistor makes the op amp “feel” the same input driving resistance.</span></div>
<div id="filepos2381594" class="calibre3"><span class="calibre7"><span><span class="bold">8.11   Frequency Compensation</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>For a typical op amp, the open-loop gain is typically between 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">4</sup></span></small> and 10<small class="calibre28"><span class="calibre17"><sup class="calibre29">6</sup></span></small> (80 to 120 dB). However, at a certain low frequency, called the <span class="italic">breakover frequency f<small class="calibre28"><span class="calibre17"><sub class="calibre37">B</sub></span></small></span>, the gain drops by 3 dB, or drops to 70.7 percent of the open-loop gain (maximum gain). As the frequency increases, the gain drops further until it reaches 1 (or 0 dB) at a frequency called the <span class="italic">unity-gain frequency f<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span>. The unity-gain frequency for an op amp is typically around 1 MHz and is given in the manufacturer’s specifications (see <a href="#filepos2384067">Fig. 8.27</a>
<span class="italic">left</span>). The rolloff in gain as the frequency increases is caused by low-pass filter-like characteristics inherently built into the op amp’s inner circuitry. If negative feedback is used, an improvement in bandwidth results; the response is flatter over a wider range of frequencies, as shown in the far-left graph in <a href="#filepos2384067">Fig. 8.27</a>. Now op amps that exhibit an open-loop gain drop of more than 60 dB per decade at <span class="italic">f<small class="calibre28"><span class="calibre17"><sub class="calibre37">T</sub></span></small></span> are unstable due to phase shifts incurred in the filter-like regions within the interior circuitry. If these phase shifts reach 180° at some frequency at which the gain is greater than 1, negative feedback becomes positive feedback, which results in undesired oscillations (see center and right grafts in <a href="#filepos2384067">Fig. 8.27</a>). To prevent these oscillations, frequency compensation is required. <span class="italic">Uncompensated</span> op amps can be frequency compensated by connecting an <span class="italic">RC</span> network between the op amp’s frequency-compensation terminals. The network, especially the capacitor, influences the shape of the response curve. Manufacturers will supply you with the response curves, along with the component values of the compensation network for a particular desired response.</span></div>
<div id="filepos2384067" class="calibre3"><span><img alt="images" src="images/01479.jpg" class="calibre416"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.27</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Perhaps the easiest way to avoid dealing with frequency compensation is to buy an op amp that is internally compensated.</span></div>
<div id="filepos2384553" class="calibre3"><span class="calibre7"><span><span class="bold">8.12   Comparators</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>In many situations, it is desirable to know which of two signals is bigger or to know when a signal exceeds a predetermined voltage. Simple circuits that do just this can be constructed with op amps, as shown in <a href="#filepos2385862">Fig. 8.28</a>. In the noninverting comparator circuit, the output switches from low (0 V) to high (positive saturation) when the input voltage exceeds a reference voltage applied to the inverting input. In the inverting comparator circuit, the output switches from high to low when the input exceeds the reference voltage applied to the noninverting terminal. In the far-right circuit, a voltage divider (pot) is used to set the reference voltage.</span></div>
<div class="calibre26"><span><a></a>Note that not all op amps are able to operate with a grounded negative supply, and a special-purpose comparator IC is a better approach.</span></div>
<div id="filepos2385862" class="calibre3"><span><img alt="images" src="images/01480.jpg" class="calibre1331"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.28</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Another, more popular method for comparing two voltages is to use a special IC called a <span class="italic">comparator</span>. A comparator, like an op amp, has an inverting input, a non-inverting input, an output, and power supply leads—its schematic looks like an op amp, too. However, unlike op amps, comparators are not frequency compensated and therefore cannot be used as linear amplifiers. In fact, comparators never use negative feedback (they often use positive feedback, as you will see). If negative feedback were used with a comparator, its output characteristics would be unstable. Comparators are specifically designed for high-speed switching—they have much larger slew rates and smaller propagation delays than op amps. Another important difference between a comparator and an op amp has to do with the output circuitry. Unlike an op amp, which typically has a push-pull output stage, a comparator uses an internal transistor whose collector is connected to the output and whose emitter is grounded. When the comparator’s noninverting terminal is less positive in voltage than the inverting terminal, the output transistor turns on, grounding the output. When the noninverting terminal is made more positive than the inverting terminal, the output transistor is off. In order to give the comparator a high output state when the transistor is off (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">−</sub></span></small> &lt; <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small>), an external <span class="italic">pull-up resistor</span> connected from a positive voltage source to the output is used. The pull-up resistor acts like the collector resistor in a transistor amplifier. The size of the pull-up resistor should be large enough to avoid excessive power dissipation yet small enough to supply enough drive to switch whatever load circuitry is used on the comparator’s output. The typical resistance for a pull-up resistor is anywhere from a few hundred to a few thousand ohms. <a href="#filepos2388403">Figure 8.29</a> shows a simple noninverting and inverting comparator circuit with pull-up resistors included. Both circuits have an output swing from 0 to +5 V.</span></div>
<div id="filepos2388403" class="calibre3"><span><img alt="images" src="images/01481.jpg" class="calibre163"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.29</span></span></span></div><div class="calibre35"> </div>
<div class="calibre26"><span>Comparators are commonly used in analog-to-digital conversion. A typical application might be to connect a magnetic tape sensor or photodiode to an input of a comparator (with reference voltage set at the other input) and allow the sensor to drive the <a></a>comparator’s output to a low or high state suitable for driving logic circuits. Analog-to-digital conversion is discussed in greater detail in <a href="CR%21QKYKJ7KY3158K36EJE0G9AYNF2ZW_split_016.html#filepos2635639">Chap. 12</a>.</span></div>
<div id="filepos2389214" class="calibre3"><span class="calibre7"><span><span class="bold">8.13   Comparators with Hysteresis</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Now there is a basic problem with both comparator circuits shown in <a href="#filepos2388403">Fig. 8.29</a>. When a slowly varying signal is present that has a level near the reference voltage, the output will “jitter” or flip back and forth between high and low output states. In many situations having such a “finicky” response is undesirable. Instead, what is usually desired is a small “cushion” region that ignores small signal deviations. To provide the cushion, positive feedback can be added to the comparator to provide hysteresis, which amounts to creating two different threshold voltages or triggering points. The details of how hysteresis works within comparator circuits are given in the following two examples.</span></div>
<div id="filepos2390388" class="calibre48"><span class="bold"><span class="italic"><span><span class="italic">8.13.1   Inverting Comparator with Hysteresis</span></span></span></span></div>
<div class="calibre11"><span>In the inverting comparator circuit shown in <a href="#filepos2392117">Fig. 8.30</a>, positive feedback through <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> provides the comparator with two threshold voltages or triggering points. The two threshold voltages result from the fact that the reference voltage applied to the noninverting terminal is different when <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> is high (+15 V) and when <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> is low (0 V)—a result of feedback current. Let’s call the reference voltage when the output is high <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small>, and call the reference voltage when <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> is low <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref2</sub></span></small>. Now let’s assume that the output is high (transistor is off) and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> &gt;
<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small>. In order for the output to switch high, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> must be greater than <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small>. However, what is <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small>? It is simply the reference voltage that pops up at the noninverting terminal when the output transistor is off and the output is high (+15 V).</span></div>
<div id="filepos2392117" class="calibre3"><span><img alt="images" src="images/01482.jpg" class="calibre890"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>To calculate <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small>, simply use the basic resistor network shown below the main circuit and to the left:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01483.jpg" class="calibre1332"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>If <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> &gt;
<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small> when the output is already high, the output suddenly goes low—transistor turns on. With the output now low, a new reference voltage <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref2</sub></span></small> is in place. To calculate <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref2</sub></span></small>, use the resistor network shown to the right of the first:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01484.jpg" class="calibre1332"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>When the input voltage decreases to <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref2</sub></span></small> or lower, the output suddenly goes high. The difference in the reference voltages is called the <span class="italic">hysteresis voltage</span>, or Δ<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">ref</sub></span></small></span>:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01485.jpg" class="calibre1333"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Now, let’s try the theory out on a real-life design example.<br class="calibre16"/>    <a></a>Say we want to design a comparator circuit with a <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small> = +6 V, a <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref2</sub></span></small> = +5 V, and +<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> = +15 V that drives a 100-kΩ load. The first thing to do is pick a pull-up resistor. As a rule of thumb,</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small> &lt; <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">load</sub></span></small><br class="calibre16"/><span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> &gt;
<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Why? Because heavier loading on <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small> (smaller values of <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">load</sub></span></small>) reduce the maximum output voltage, thereby reducing the amount of hysteresis by lowering the value of <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref1</sub></span></small>. Pick <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small> = 3 kΩ, and choose <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small> equal to 1 MΩ. Combining equations above gives us the practical formulas below the diagrams. With equation (1), calculate <span class="italic">n</span>, which is (6 V − 5 V)/5 V = 0.20. Next, using equation (2), find <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small>, which is simply (0.2)(1 M) = 200 kΩ. Using equation (3), find <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">3</sub></span></small>, which is 166 k/(15 V/6 V − 1) = 111 kΩ. These are the values presented in the circuit.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.30</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2396383" class="calibre3"><span class="bold"><span class="italic"><span><span class="italic"><span class="bold">8.13.2   Noninverting Comparator with Hysteresis</span></span></span></span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01486.jpg" class="calibre1334"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>What’s desired: <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in1</sub></span></small> = 8 V, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in2</sub></span></small> = 6 V, given +<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span> = 10 V and load of 100 kΩ. Question: What should <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref</sub></span></small>, <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small>, <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> be?<br class="calibre16"/>    First, choose <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small> &lt; <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">load</sub></span></small>, and <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small> &gt;
<span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small> to minimize the effects of loading. For <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">pull-up</sub></span></small>, choose 1 kΩ, and for <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">2</sub></span></small>, choose 1 M. Next, using the equations to the right, we find <span class="italic">R</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">1</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref</sub></span></small>.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01487.jpg" class="calibre1335"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>Unlike the inverting comparator, the noninverting comparator only requires two resistors for hysteresis to occur. (Extra resistors are needed if you wish to use a voltage divider to set the reference voltage. However, these resistors do not have a direct role in developing the hysteresis voltage.) Also, the terminal to which the input signal is applied is the same location where the threshold shifting occurs—a result of positive feedback. The threshold level applied to the noninverting terminal is shifted about the reference voltage as the output changes from high (+<span class="italic">V<small class="calibre28"><span class="calibre17"><sub class="calibre37">C</sub></span></small></span>) to low (0 V). For example, assume that <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> is at a low enough level to keep <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> low. For the output to switch high, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> must rise to a triggering voltage, call it <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in1</sub></span></small>, which is found simply by using the resistor network shown to the far left:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01488.jpg" class="calibre1336"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>As soon as <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> switches high, the voltage at the noninverting terminal will be shifted to a value that’s greater than <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref</sub></span></small> by:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01489.jpg" class="calibre1337"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>To make the comparator switch back to its low state, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> must go below Δ<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">+</sub></span></small>. In other words, the applied input voltage must drop below what is called the lower trip point, <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in2</sub></span></small>:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01490.jpg" class="calibre1338"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>The hysteresis is then simply the difference between <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in1</sub></span></small> and <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in2</sub></span></small>:</span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span><img alt="images" src="images/01491.jpg" class="calibre1339"/></span></span></span></div><div class="calibre10"> </div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>A practical design example is presented to the left.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.31</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2401631" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">8.14   Using Single-Supply Comparators</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>Like op amps, comparator ICs come in both dual- and single-supply forms. With single-supply comparators, the emitter and the “negative supply” are joined internally and grounded, whereas the dual-supply comparator has separate emitter (ground) and negative supply leads. A few sample comparator ICs, along with two single-supply comparator circuits are shown below.</span></div>
<div class="calibre3"><span><img alt="images" src="images/01492.jpg" class="calibre1340"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.32</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2402707" class="calibre3"><span class="calibre7"><span><span class="bold">8.15   Window Comparator</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>A window comparator is a very useful circuit that changes its output state whenever the input voltage is anywhere between predetermined high and low reference voltages. The region between these two reference voltages is called the <span class="italic">window</span>. <a href="#filepos2404458">Figure 8.33</a> shows a simple window comparator built with two comparators (op amps also can be used). In the left-most circuit, the window is set between +3.5 V (<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref,high</sub></span></small>) and +6.5 V(<span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">ref,low</sub></span></small>). If <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> is below +3.5 V, the lower comparator’s output is grounded, while the upper comparator’s output floats. Only one ground is needed, however, to make <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> = 0 V. If <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> is above +6.5 V, the upper comparator’s output is grounded, while the lower comparator’s output floats—again <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">out</sub></span></small> goes to 0 V. Only when <span class="italic">V</span><small class="calibre28"><span class="calibre17"><sub class="calibre37">in</sub></span></small> is between +3.5 and +6.5 V will the output go high (+5 V). The right-most circuit uses a voltage-divider network to set the reference voltages.</span></div>
<div id="filepos2404458" class="calibre3"><span><img alt="images" src="images/01493.jpg" class="calibre1341"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.33</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2404734" class="calibre3"><span class="calibre7"><span><a></a><span class="bold">8.16   Voltage-Level Indicator</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre11"><span>A simple way to make a voltage-level indicator is to take a number of comparators that share a common input and then supply each comparator with a different reference or triggering voltage, as shown in <a href="#filepos2405787">Fig. 8.34</a>. In this circuit, the reference voltage applied to a comparator increases as you move up the chain of comparators (a result of the voltage-divider network). As the input voltage increases, the lower comparator’s output is grounded first (diode turns on), followed in succession by the comparators (LEDs) above it. The potentiometer provides proportional control over all the reference voltages.</span></div>
<div id="filepos2405787" class="calibre3"><span><img alt="images" src="images/01494.jpg" class="calibre1342"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.34</span></span></span></div><div class="calibre35"> </div>
<div id="filepos2406063" class="calibre3"><span class="calibre7"><span><span class="bold">8.17   Applications</span></span></span></div>
<div class="calibre11"><span><img alt="image" src="images/00007.jpg" class="calibre36"/></span></div>
<div class="calibre3"><span><span class="bold">Op Amp Output Drivers (for Loads That Are Either On or Off)</span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01495.jpg" class="calibre790"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.35</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><span class="bold">Comparator Output Drivers</span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01496.jpg" class="calibre853"/></span></div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.36</span></span></span></div><div class="calibre35"> </div>
<div class="calibre3"><span><a></a><span class="bold">Op Amp Power Booster (AC Signals)</span></span></div>
<div class="calibre3"><span><img alt="images" src="images/01497.jpg" class="calibre1343"/></span></div>
<div class="calibre11"><span class="calibre17"><span class="bold"><span>There are times when an op amp needs a boost in output power-handling capacity while at the same time maintaining both positive and negative output swings. A simple way to increase the output power while maintaining the swing integrity is to attach a complementary transistor push-pull circuit to the op amp’s output, as shown in this circuit. At high speeds, additional biasing resistors and capacitors are needed to limit crossover distortion. At low speeds, negative feedback helps eliminate much of the crossover distortion.</span></span></span></div><div class="calibre10"> </div>
<div class="calibre34"><span class="calibre17"><span class="bold"><span>FIGURE 8.37</span></span></span></div><div class="calibre35"> </div>
</body></html>
